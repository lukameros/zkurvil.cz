<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows XP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Tahoma", sans-serif;
            overflow: hidden;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        /* Classic XP Loading Screen */
        .xp-boot-screen {
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .xp-logo-container {
            text-align: center;
            margin-bottom: 80px;
        }

        .xp-logo-text {
            font-size: 48px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .xp-logo-subtitle {
            color: #fff;
            font-size: 14px;
            margin-top: 5px;
        }

        .xp-footer {
            position: absolute;
            bottom: 30px;
            color: #fff;
            font-size: 11px;
            text-align: center;
        }

        .xp-copyright {
            margin-bottom: 5px;
        }

        /* Desktop */
        #desktop {
            display: none;
            width: 100vw;
            height: 100vh;
            background:
                url('https://upload.wikimedia.org/wikipedia/en/2/27/Bliss_%28Windows_XP%29.png') center/cover no-repeat,
                linear-gradient(rgba(58, 110, 165, 0.2), rgba(58, 110, 165, 0.2)),
                linear-gradient(135deg, #5A8BB4 0%, #3A6EA5 50%, #5A8BB4 100%);
            background-size: cover;
            background-position: center;
            position: relative;
        }

        /* Windows XP Bliss wallpaper simulation */
        #desktop::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 30% 40%, rgba(135, 206, 250, 0.4) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 60%, rgba(144, 238, 144, 0.3) 0%, transparent 50%),
                linear-gradient(to bottom, 
                    rgba(135, 206, 250, 0.2) 0%,
                    rgba(135, 206, 250, 0.1) 30%,
                    rgba(144, 238, 144, 0.1) 60%,
                    rgba(144, 238, 144, 0.2) 100%
                );
            pointer-events: none;
        }

        .desktop-icons {
            padding: 20px;
        }

        .icon {
            width: 80px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            user-select: none;
            position: absolute;
        }

        .icon:hover {
            background: rgba(255, 255, 255, 0.2);
            border: 1px dotted #fff;
        }

        .icon.selected {
            background: rgba(51, 153, 255, 0.3);
            border: 1px dotted #fff;
        }

        .icon.dragging {
            opacity: 0.7;
            z-index: 1000;
        }

        .icon-img {
            width: 48px;
            height: 48px;
            margin: 0 auto 5px;
            background: linear-gradient(135deg, #4A90E2, #357ABD);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .icon-label {
            color: #fff;
            font-size: 11px;
            text-shadow: 1px 1px 2px #000;
        }

        /* Taskbar */
        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom, #245EDC 0%, #1941A5 100%);
            border-top: 2px solid #4A90E2;
            display: flex;
            align-items: center;
            padding: 0 5px;
        }

        .start-button {
            height: 32px;
            background: linear-gradient(to bottom, #3FA142 0%, #2E7D32 100%);
            border: 2px outset #4CAF50;
            border-radius: 5px;
            padding: 0 15px;
            color: white;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .start-button:active {
            border-style: inset;
        }

        .start-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #FF0000, #FF6B00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .taskbar-items {
            flex: 1;
            margin-left: 10px;
            display: flex;
            gap: 5px;
        }

        .taskbar-item {
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px outset #4A90E2;
            border-radius: 3px;
            padding: 0 10px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            max-width: 150px;
        }

        .taskbar-item.active {
            border-style: inset;
            background: rgba(0, 0, 0, 0.2);
        }

        .clock {
            color: white;
            font-size: 12px;
            padding: 0 10px;
            background: rgba(0, 0, 0, 0.2);
            height: 32px;
            display: flex;
            align-items: center;
            border: 1px inset #1941A5;
        }

        /* Start Menu */
        .start-menu {
            display: none;
            position: absolute;
            bottom: 42px;
            left: 5px;
            width: 350px;
            background: #3C5A99;
            border: 2px solid #4A90E2;
            border-radius: 8px 8px 0 0;
            overflow: hidden;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
        }

        .start-menu-header {
            background: linear-gradient(to right, #245EDC, #4A90E2);
            color: white;
            padding: 40px 20px 10px;
            font-size: 24px;
            font-weight: bold;
        }

        .start-menu-items {
            background: #D4D0C8;
            padding: 10px;
        }

        .start-menu-item {
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 3px;
        }

        .start-menu-item:hover {
            background: #3C5A99;
            color: white;
        }

        .start-menu-separator {
            height: 1px;
            background: #808080;
            margin: 3px 0;
        }

        /* Window */
        .window {
            position: absolute;
            width: 500px;
            height: 350px;
            background: #ECE9D8;
            border: 2px solid #0054E3;
            border-radius: 8px 8px 0 0;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
            display: none;
            z-index: 100;
            left: 100px;
            top: 100px;
        }

        .window.active {
            z-index: 200;
        }

        .window-title {
            background: linear-gradient(to bottom, #0997FF 0%, #0053EE 100%);
            color: white;
            padding: 5px 10px;
            font-size: 13px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .window-title.inactive {
            background: linear-gradient(to bottom, #7A96DF 0%, #5177D6 100%);
        }

        .window-buttons {
            display: flex;
            gap: 3px;
        }

        .window-button {
            width: 21px;
            height: 21px;
            background: linear-gradient(to bottom, #E8E5DC 0%, #C8C5BC 100%);
            border: 1px outset #fff;
            font-size: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .window-button:active {
            border-style: inset;
        }

        .window-content {
            padding: 20px;
            height: calc(100% - 30px);
            overflow: auto;
            background: white;
        }

        /* Context Menu */
        .context-menu {
            position: fixed;
            background: #D4D0C8;
            border: 2px outset #fff;
            box-shadow: 3px 3px 5px rgba(0,0,0,0.3);
            padding: 2px;
            min-width: 200px;
            display: none;
            z-index: 10000;
        }

        .context-menu-item {
            padding: 5px 25px 5px 30px;
            cursor: pointer;
            position: relative;
            font-size: 12px;
        }

        .context-menu-item:hover {
            background: #0A246A;
            color: white;
        }

        .context-menu-item.disabled {
            color: #888;
            cursor: default;
        }

        .context-menu-item.disabled:hover {
            background: transparent;
            color: #888;
        }

        .context-menu-separator {
            height: 1px;
            background: #808080;
            margin: 2px 0;
        }

        .context-menu-item .icon-left {
            position: absolute;
            left: 5px;
        }

        /* Selection box */
        .selection-box {
            position: absolute;
            border: 1px solid #0A246A;
            background: rgba(10, 36, 106, 0.1);
            pointer-events: none;
            display: none;
            z-index: 999;
        }

        /* Minimize/Maximize effects */
        @keyframes minimize {
            to {
                transform: scale(0) translate(-50%, 100%);
                opacity: 0;
            }
        }

        @keyframes maximize {
            from {
                transform: scale(0.5);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .minimizing {
            animation: minimize 0.3s forwards;
        }

        .maximizing {
            animation: maximize 0.3s forwards;
        }
    
        /* --- App chrome helpers --- */
        .menu-bar {
            background: #D4D0C8;
            border-bottom: 1px solid #888;
            padding: 4px 6px;
            font-size: 12px;
            display: flex;
            gap: 14px;
            user-select: none;
        }
        .menu-bar span { cursor: default; }
        .toolbar {
            background: #D4D0C8;
            border-bottom: 1px solid #888;
            padding: 6px;
            display: flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }
        .status-bar {
            position: sticky;
            bottom: 0;
            background: #D4D0C8;
            border-top: 1px solid #888;
            padding: 3px 6px;
            font-size: 11px;
            color: #222;
        }
        .xp-btn {
            padding: 4px 10px;
            border: 2px outset #fff;
            background: #ECE9D8;
            cursor: pointer;
            font-size: 12px;
        }
        .xp-btn:active { border-style: inset; }
        .xp-input {
            padding: 4px 6px;
            border: 2px inset #888;
            font-size: 12px;
        }
        .progress-outer {
            height: 14px;
            border: 2px inset #888;
            background: #fff;
            overflow: hidden;
        }
        .progress-inner {
            height: 100%;
            width: 0%;
            background: linear-gradient(to bottom, #5A9FD4, #2E5C8A);
            transition: width 0.2s;
        }

    
        /* --- More XP UI --- */
        .xp-list {
            border: 2px inset #888;
            background: #fff;
            font-size: 12px;
            overflow: auto;
        }
        .xp-list .row {
            display:flex;
            gap:10px;
            padding:6px 8px;
            border-bottom: 1px solid #eee;
            cursor: default;
            align-items:center;
        }
        .xp-list .row:hover { background:#B6D6FB; }
        .xp-list .row .mini { width:22px; text-align:center; }
        .calc-grid {
            display:grid;
            grid-template-columns: repeat(4, 1fr);
            gap:6px;
            padding:10px;
        }
        .calc-display {
            margin:10px;
            padding:8px;
            border:2px inset #888;
            background:#fff;
            font-family: 'Courier New', monospace;
            text-align:right;
            font-size:18px;
        }
        .explorer-split {
            display:grid;
            grid-template-columns: 200px 1fr;
            height: calc(100% - 62px);
        }
        .tree {
            border-right:1px solid #888;
            background:#fff;
            overflow:auto;
            font-size:12px;
            padding:8px;
        }
        .tree .node { padding:3px 4px; }
        .tree .node:hover { background:#B6D6FB; }
        .explorer-main {
            background:#fff;
            overflow:auto;
            padding:10px;
        }
        .explorer-grid {
            display:grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap:10px;
        }
        .drive {
            border:2px outset #fff;
            background:#ECE9D8;
            padding:8px;
            font-size:12px;
        }
        .drive .bar {
            height:10px;
            border:2px inset #888;
            background:#fff;
            margin-top:6px;
            overflow:hidden;
        }
        .drive .bar > div {
            height:100%;
            width:55%;
            background: linear-gradient(to bottom, #5A9FD4, #2E5C8A);
        }
        .toast {
            position: fixed;
            right: 18px;
            bottom: 52px;
            width: 280px;
            background: #FFFFE1;
            border: 1px solid #888;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.3);
            padding: 10px 12px;
            font-size: 12px;
            z-index: 25000;
            display:none;
        }

    
        /* --- XP Shop --- */
        .price-tag {
            font-size: 22px;
            font-weight: bold;
            color: #1b6e1b;
        }
        .product-card {
            border: 2px outset #fff;
            background: #ECE9D8;
            padding: 12px;
            margin-bottom: 10px;
        }
        .product-card h3 {
            margin: 0 0 6px 0;
        }
        .badge {
            display:inline-block;
            padding:2px 6px;
            border:1px solid #888;
            background:#fff;
            font-size:11px;
            margin-left:6px;
        }

    
        /* --- Windows 11 mode --- */
        body.win11 {
            font-family: "Segoe UI", Tahoma, sans-serif;
        }
        #desktop11 {
            position: fixed;
            inset: 0;
            display: none;
            background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.18), rgba(255,255,255,0.02) 45%),
                        linear-gradient(135deg, #0b2a58 0%, #0c3a7a 55%, #0b2a58 100%);
            overflow: hidden;
        }
        .w11-icons {
            position: absolute;
            inset: 0 0 48px 0;
            padding: 22px;
        }
        .w11-icon {
            width: 92px;
            text-align: center;
            color: #fff;
            user-select: none;
            cursor: default;
            display: inline-block;
            margin: 10px;
        }
        .w11-icon .img {
            width: 56px;
            height: 56px;
            margin: 0 auto 6px auto;
            border-radius: 14px;
            background: rgba(255,255,255,0.14);
            border: 1px solid rgba(255,255,255,0.22);
            display:flex;
            align-items:center;
            justify-content:center;
            font-size: 26px;
            backdrop-filter: blur(8px);
        }
        .w11-icon .lbl {
            font-size: 12px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.55);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .w11-taskbar {
            position: absolute;
            left: 50%;
            bottom: 10px;
            transform: translateX(-50%);
            height: 44px;
            min-width: 420px;
            max-width: 860px;
            padding: 0 14px;
            border-radius: 14px;
            background: rgba(20, 28, 42, 0.55);
            border: 1px solid rgba(255,255,255,0.16);
            backdrop-filter: blur(14px);
            display:flex;
            align-items:center;
            justify-content: center;
            gap: 10px;
        }
        .w11-taskbar .tb-btn {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(255,255,255,0.10);
            border: 1px solid rgba(255,255,255,0.14);
            display:flex;
            align-items:center;
            justify-content:center;
            cursor:pointer;
            color:#fff;
            user-select:none;
        }
        .w11-panel {
            position: absolute;
            left: 50%;
            bottom: 62px;
            transform: translateX(-50%);
            width: 520px;
            border-radius: 16px;
            background: rgba(18, 22, 32, 0.72);
            border: 1px solid rgba(255,255,255,0.18);
            backdrop-filter: blur(16px);
            padding: 14px;
            color: #fff;
            display:none;
            z-index: 26000;
        }
        .w11-panel h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }
        .w11-panel .grid {
            display:grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        .w11-panel .app {
            border-radius: 12px;
            padding: 10px;
            background: rgba(255,255,255,0.10);
            border: 1px solid rgba(255,255,255,0.14);
            cursor:pointer;
            text-align:center;
            font-size:12px;
        }
        .w11-window {
            position:absolute;
            left: 120px;
            top: 90px;
            width: 760px;
            height: 520px;
            border-radius: 14px;
            background: rgba(26, 30, 42, 0.78);
            border: 1px solid rgba(255,255,255,0.18);
            backdrop-filter: blur(16px);
            box-shadow: 0 10px 32px rgba(0,0,0,0.45);
            display:none;
            z-index: 27000;
            color:#fff;
        }
        .w11-window .title {
            height: 44px;
            display:flex;
            align-items:center;
            justify-content: space-between;
            padding: 0 12px;
            border-bottom: 1px solid rgba(255,255,255,0.10);
            user-select:none;
        }
        .w11-window .title .left { font-weight:600; font-size:13px; }
        .w11-window .title .btns { display:flex; gap:8px; }
        .w11-window .title .b {
            width: 34px; height: 28px;
            border-radius: 8px;
            background: rgba(255,255,255,0.10);
            border: 1px solid rgba(255,255,255,0.14);
            display:flex; align-items:center; justify-content:center;
            cursor:pointer;
        }
        .w11-window .content {
            padding: 14px;
            height: calc(100% - 44px);
            overflow:auto;
            font-size: 13px;
            line-height: 1.4;
        }

    
        /* --- Windows 11 mode override --- */
        body.win11 { font-family: "Segoe UI Variable","Segoe UI",Tahoma,sans-serif; }
        #desktop11{
            position:fixed; inset:0; display:none; overflow:hidden;
            background:
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.35), rgba(255,255,255,0.0) 45%),
                radial-gradient(circle at 80% 70%, rgba(120,170,255,0.35), rgba(255,255,255,0.0) 50%),
                linear-gradient(135deg,#0b4aa2 0%,#0a2a66 55%,#061c44 100%);
        }
        .w11-taskbar{
            position:absolute; left:0; right:0; bottom:0;
            height:52px; display:flex; align-items:center; justify-content:center; gap:10px;
            background: rgba(18, 22, 32, 0.55);
            border-top: 1px solid rgba(255,255,255,0.14);
            backdrop-filter: blur(18px);
        }
        .w11-taskbar .tb-btn{
            width:40px; height:40px; border-radius:12px;
            background: rgba(255,255,255,0.10);
            border: 1px solid rgba(255,255,255,0.14);
            display:flex; align-items:center; justify-content:center;
            cursor:pointer; color:#fff; user-select:none;
            transition: transform .12s;
        }
        .w11-taskbar .tb-btn:hover { transform: translateY(-1px); }
        .w11-tray{
            position:absolute; right:14px; bottom:8px;
            height:36px; display:flex; align-items:center; gap:10px;
            color:#fff; font-size:12px; opacity:0.95;
        }
        .w11-panel{
            position:absolute; left:50%; bottom:64px; transform:translateX(-50%);
            width:640px; border-radius:16px; padding:16px; color:#fff; display:none;
            background: rgba(18, 22, 32, 0.72);
            border: 1px solid rgba(255,255,255,0.18);
            backdrop-filter: blur(18px);
            z-index:26000;
        }
        .w11-panel .search{
            border-radius:12px; padding:10px 12px; margin-bottom:14px;
            background: rgba(255,255,255,0.12);
            border: 1px solid rgba(255,255,255,0.16);
            font-size:12px; opacity:0.95;
        }
        .w11-panel h3{ margin:0 0 10px 0; font-size:13px; font-weight:600; }
        .w11-panel .grid{ display:grid; grid-template-columns: repeat(6,1fr); gap:10px; }
        .w11-panel .app{
            border-radius:12px; padding:10px 8px; text-align:center; font-size:12px; cursor:pointer;
            background: rgba(255,255,255,0.10);
            border: 1px solid rgba(255,255,255,0.14);
        }
        .w11-panel .app .aico{
            width:36px; height:36px; margin:0 auto 6px auto; border-radius:12px;
            background: rgba(255,255,255,0.16);
            display:flex; align-items:center; justify-content:center;
        }
        .w11-window{
            width:820px; height:560px;
        }
        /* --- end Windows 11 mode override --- */

    </style>
</head>
<body>
    <!-- BIOS/POST Screen -->
    <div id="bios-screen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #aaa; font-family: 'Courier New'; padding: 20px; z-index: 10000; overflow: auto;">
        <div style="color: #fff; margin-bottom: 20px;">
            <strong>American Megatrends BIOS v2.54</strong><br>
            Copyright (C) 1998-2004, American Megatrends Inc.
        </div>
        
        <div style="margin: 20px 0;">
            <div id="biosText"></div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="xp-boot-screen">
            <div class="xp-logo-container">
                <div class="xp-logo-text">Windows 9000</div>
                <div class="xp-logo-subtitle">Professional</div>
            </div>
            
            <!-- Progress bar for loading -->
            <div style="width: 250px; height: 10px; background: #000; border: 1px solid #3C3C3C; margin: 50px auto; position: relative; overflow: hidden;">
                <div id="loadingBar" style="height: 100%; width: 0%; background: linear-gradient(to bottom, #5A9FD4, #2E5C8A);"></div>
            </div>

            <div class="xp-footer">
                <div class="xp-copyright">Copyright Â© Microsoft Corporation</div>
                <div style="margin-top: 15px; color: #666;">NaÄÃ­tÃ¡nÃ­...</div>
            </div>
        </div>
    </div>

    <!-- Update Screen -->
    <div id="update-screen" style="
        position: fixed;
        inset: 0;
        background: #000;
        color: #0f0;
        font-family: 'Courier New', monospace;
        display: none;
        z-index: 9999;
        text-align: center;
        padding-top: 120px;
    ">
        <div style="font-size: 18px; line-height: 1.6">
            Applying Windows Update 0.1<br>
            - Kernel fixes<br>
            - Memory mapping fix<br>
            - RAM check ........ OK<br>
            - Disk integrity .... OK<br>
            - Registry .......... OK
        </div>

        <div style="font-size: 120px; margin: 40px 0;">â˜ </div>

        <div style="font-size: 22px; letter-spacing: 2px;">
            Starting Windows
        </div>
    </div>


    <!-- Desktop -->
    <div id="desktop">
        <div class="desktop-icons" id="desktopIcons">
            <div class="icon" data-icon-id="shop">
                <div class="icon-img">ğŸ›’</div>
                <div class="icon" id="win11Icon" data-icon-id="windows11" title="Windows 11" style="left: 240px; top: 100px; display:none;">
<script>document.getElementById("win11Icon")?.addEventListener("dblclick", openWindows11File);</script>
                <div class="icon-img">ğŸªŸ</div>
                <div class="icon-label">Windows 11</div>
            </div>
<div class="icon-label">Obchod</div>
            </div>
<div class="icon" data-icon-id="myComputer">
                <div class="icon-img">ğŸ’»</div>
                <div class="icon-label">MÅ¯j poÄÃ­taÄ</div>
            </div>
            <div class="icon" data-icon-id="recycleBin">
                <div class="icon-img">ğŸ—‘ï¸</div>
                <div class="icon-label">KoÅ¡ (plnÃ½)</div>
            </div>
            <div class="icon" data-icon-id="ie">
                <div class="icon-img">ğŸŒ</div>
                <div class="icon-label">Internet Explorer</div>
            </div>
            <div class="icon" data-icon-id="minesweeper">
                <div class="icon-img">ğŸ’£</div>
                <div class="icon-label">HledÃ¡nÃ­ min</div>
            </div>
            <div class="icon" data-icon-id="paint">
                <div class="icon-img">ğŸ¨</div>
                <div class="icon-label">MalovÃ¡nÃ­</div>
            </div>
            <div class="icon" data-icon-id="virus">
                <div class="icon-img">ğŸ¦ </div>
                <div class="icon-label">Antivirus XP</div>
            
            
            </div>
            <div class="icon" data-icon-id="virusExe">
                <div class="icon-img">ğŸ§ª</div>
                <div class="icon-label">virus.exe</div>
            </div>
            </div>
            <div class="icon" data-icon-id="notepad">
    
                <div class="icon-img">ğŸ“</div>
                <div class="icon-label">PoznÃ¡mkovÃ½ blok</div>
            </div>
            <div class="icon" data-icon-id="calculator">
                <div class="icon-img">ğŸ”¢</div>
                <div class="icon-label">KalkulaÄka</div>
            </div>
            <div class="icon" data-icon-id="gopnik">
                <div class="icon-img" style="background: linear-gradient(135deg, #FF1744, #D50000);">ğŸ‡·ğŸ‡º</div>
                <div class="icon-label">Gopnik Simulator</div>
            </div>
            <div class="icon" data-icon-id="pacman">
                <div class="icon-img" style="background: linear-gradient(135deg, #FFEB3B, #FBC02D);">ğŸ‘»</div>
                <div class="icon-label">Pac-Man Deluxe</div>
            </div>
            <div class="icon" data-icon-id="myDocuments">
                <div class="icon-img">ğŸ“</div>
                <div class="icon-label">Dokumenty</div>
            </div>
            <div class="icon" data-icon-id="myMusic">
                <div class="icon-img">ğŸµ</div>
                <div class="icon-label">Hudba</div>
            </div>
            <div class="icon" data-icon-id="myPictures">
                <div class="icon-img">ğŸ–¼ï¸</div>
                <div class="icon-label">ObrÃ¡zky</div>
            </div>
            <div class="icon" data-icon-id="network">
                <div class="icon-img">ğŸŒ</div>
                <div class="icon-label">SÃ­Å¥ovÃ© pÅ™ipojenÃ­</div>
            </div>
            <div class="icon" data-icon-id="controlPanel">
                <div class="icon-img">âš™ï¸</div>
                <div class="icon-label">OvlÃ¡dacÃ­ panely</div>
            </div>
        </div>

        <!-- Selection box -->
        <div class="selection-box" id="selectionBox"></div>

        <!-- Context menus -->
        <div class="context-menu" id="desktopContextMenu">
            <div class="context-menu-item" onclick="desktopRefresh()">
                <span class="icon-left">ğŸ”„</span>
                Aktualizovat
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="arrangeIcons()">
                <span class="icon-left">ğŸ“‹</span>
                UspoÅ™Ã¡dat ikony
            </div>
            <div class="context-menu-item" onclick="playClickSound(); systemMessage('Tato funkce je jen pro parÃ¡du ')">
                <span class="icon-left">ğŸ–¼ï¸</span>
                VloÅ¾it
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="createNewFile()">
                <span class="icon-left">ğŸ“„</span>
                NovÃ½ â–¶
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="openWindow('displayProps')">
                <span class="icon-left">âš™ï¸</span>
                Vlastnosti zobrazenÃ­
            </div>
        </div>

        <div class="context-menu" id="iconContextMenu">
            <div class="context-menu-item" onclick="openSelectedIcon()">
                <span class="icon-left">ğŸ“‚</span>
                OtevÅ™Ã­t
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="playClickSound(); systemMessage('ZkopÃ­rovÃ¡no! (ne doopravdy)')">
                <span class="icon-left">ğŸ“‹</span>
                KopÃ­rovat
            </div>
            <div class="context-menu-item" onclick="deleteToRecycleBin()">
                <span class="icon-left">ğŸ—‘ï¸</span>
                Odstranit
            </div>
            <div class="context-menu-item" onclick="playClickSound(); systemMessage('PÅ™ejmenovÃ¡no na: NovÃ½ nÃ¡zev ')">
                <span class="icon-left">âœï¸</span>
                PÅ™ejmenovat
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="playClickSound(); systemMessage('Vlastnosti: Velikost neznÃ¡mÃ¡ ')">
                <span class="icon-left">ğŸ“Š</span>
                Vlastnosti
            </div>
        </div>

        <!-- Taskbar -->
        <div class="taskbar">
            <div class="start-button" onclick="toggleStartMenu()">
                <div class="start-icon">âŠ</div>
                <span>Start</span>
            </div>
            <div class="taskbar-items" id="taskbarItems"></div>
            <div class="clock" id="clock">13:37</div>
        </div>

        <!-- Start Menu -->
        <div class="start-menu" id="startMenu">
            <div class="start-menu-header">Windows 9000</div>
            <div class="start-menu-items">
                <div class="start-menu-item" onclick="openWindow('myDocuments'); toggleStartMenu();">ğŸ“ Dokumenty</div>
                <div class="start-menu-item" onclick="openWindow('myPictures'); toggleStartMenu();">ğŸ–¼ï¸ ObrÃ¡zky</div>
                <div class="start-menu-item" onclick="openWindow('myMusic'); toggleStartMenu();">ğŸµ Hudba</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('myComputer'); toggleStartMenu();">ğŸ’» MÅ¯j poÄÃ­taÄ</div>
                <div class="start-menu-item" onclick="openWindow('network'); toggleStartMenu();">ğŸŒ SÃ­Å¥ovÃ© pÅ™ipojenÃ­</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('notepad'); toggleStartMenu();">ğŸ“ PoznÃ¡mkovÃ½ blok</div>
                <div class="start-menu-item" onclick="openWindow('wordpad'); toggleStartMenu();">ğŸ“ WordPad</div>
                <div class="start-menu-item" onclick="openWindow('calculator'); toggleStartMenu();">ğŸ”¢ KalkulaÄka</div>
                <div class="start-menu-item" onclick="openWindow('paint'); toggleStartMenu();">ğŸ¨ MalovÃ¡nÃ­</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('cmd'); toggleStartMenu();">âš« PÅ™Ã­kazovÃ½ Å™Ã¡dek</div>
                <div class="start-menu-item" onclick="openWindow('taskManager'); toggleStartMenu();">ğŸ“Š SprÃ¡vce Ãºloh</div>
                <div class="start-menu-item" onclick="openWindow('runDialog'); toggleStartMenu();">â–¶ï¸ Spustit...</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('diskCleanup'); toggleStartMenu();">ğŸ§¹ VyÄiÅ¡tÄ›nÃ­ disku</div>
                <div class="start-menu-item" onclick="openWindow('defrag'); toggleStartMenu();">ğŸ’¿ Defragmentace</div>
                <div class="start-menu-item" onclick="openWindow('systemRestore'); toggleStartMenu();">ğŸ”„ ObnovenÃ­ systÃ©mu</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="playClickSound(); systemMessage('NÃ¡povÄ›da: Vypni to a jdi ven! ')">â“ NÃ¡povÄ›da</div>
                <div class="start-menu-item" onclick="playClickSound(); systemMessage('HledÃ¡Å¡ smysl Å¾ivota? JÃ¡ taky! ğŸ”')">ğŸ” Hledat</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="shutdown()">ğŸ”´ Vypnout poÄÃ­taÄ</div>
            </div>
        </div>

        <!-- Windows -->
        <div class="window" id="myComputer">
            <div class="window-title">
                <span>ğŸ’» MÅ¯j poÄÃ­taÄ</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myComputer')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myComputer')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myComputer')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>PevnÃ© disky:</h3>
                <p>ğŸ“€ Disk C: (997 MB volnÃ½ch z 1 GB)</p>
                <p>ğŸ“€ Disk D: (VloÅ¾te disk)</p>
                <br>
                <h3>SystÃ©movÃ© informace:</h3>
                <p>âš¡ Procesor: Pentium 4 (skoro)</p>
                <p>ğŸ’¾ RAM: 256 MB (nestaÄÃ­)</p>
                <p>ğŸ® Grafika: IntegrovanÃ¡ (laguje)</p>
            </div>
        </div>

        <div class="window" id="recycleBin">
            <div class="window-title">
                <span>ğŸ—‘ï¸ KoÅ¡</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('recycleBin')">_</div>
                    <div class="window-button" onclick="maximizeWindow('recycleBin')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('recycleBin')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>PoloÅ¾ky v koÅ¡i:</h3>
                <p>ğŸ“„ moje_dusevno.txt</p>
                <p>ğŸ“„ zdravy_zivotni_styl.doc</p>
                <p>ğŸ“„ novy_rocni_predsevzeti_2024.xls</p>
                <p>ğŸ“„ cviceni_od_zitra.ppt</p>
                <p>ğŸ’° penize_po_vanoce.jpg</p>
                <p>ğŸ¯ produktivita.exe</p>
                <p>ğŸ’” vztah_ktery_fungoval.pdf</p>
                <p>ğŸ“ diploma_ze_skoly_zivota.doc</p>
                <p>ğŸ• dieta_od_pondeli.txt</p>
                <p>ğŸ˜´ normalni_spanek.mp3</p>
                <p>ğŸ® cas_na_konicek.avi</p>
                <p>ğŸ‘´ mladost.zip</p>
                <br>
                <button onclick="playErrorSound(); systemMessage('SmazÃ¡no! (stejnÄ› uÅ¾ to nikdy nebudeÅ¡ potÅ™ebovat)')">Vysypat koÅ¡</button>
            </div>
        </div>

        <div class="window" id="ie">
            <div class="window-title">
                <span>ğŸŒ Internet Explorer</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('ie')">_</div>
                    <div class="window-button" onclick="maximizeWindow('ie')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('ie')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                
                <div class="menu-bar">
                    <span>Soubor</span><span>Ãšpravy</span><span>ZobrazenÃ­</span><span>OblÃ­benÃ©</span><span>NÃ¡povÄ›da</span>
                </div>
                <div class="toolbar">
                    <button class="xp-btn" onclick="ieNav('back')">â—€</button>
                    <button class="xp-btn" onclick="ieNav('forward')">â–¶</button>
                    <button class="xp-btn" onclick="ieNav('refresh')">âŸ³</button>
                    <input class="xp-input" id="ieAddress" style="flex:1; min-width: 180px;" value="http://example.local/" />
                    <button class="xp-btn" onclick="ieGo()">PÅ™ejÃ­t</button>
                </div>
                <div id="iePage" style="padding:12px;">
                    <h3>Internet Explorer</h3>
                    <p>AdresnÃ­ Å™Ã¡dek funguje jako simulace (bez reÃ¡lnÃ©ho prohlÃ­Å¾enÃ­).</p>
                    <div style="border:2px inset #888; padding:10px; background:#fff; min-height:160px;" id="ieRender">
                        <strong>DomovskÃ¡ strÃ¡nka</strong><br>
                        <div style="margin-top:8px; font-size:12px; color:#444;">
                            - OblÃ­benÃ©: Seznam, Flashgames, Stahuj<br>
                            - Historie: prÃ¡zdnÃ¡
                        </div>
                    </div>
                    <div class="status-bar" id="ieStatus">PÅ™ipraven</div>
                </div>

            </div>
        </div>

        <div class="window" id="minesweeper">
            <div class="window-title">
                <span>ğŸ’£ HledÃ¡nÃ­ min</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('minesweeper')">_</div>
                    <div class="window-button" onclick="maximizeWindow('minesweeper')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('minesweeper')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
            <div class="menu-bar">
                <span>Hra</span><span>NastavenÃ­</span><span>NÃ¡povÄ›da</span>
            </div>
            <div class="toolbar">
                <button class="xp-btn" onclick="minesNew()">NovÃ¡ hra</button>
                <span style="font-size:12px;">Miny: <strong id="minesCount">10</strong></span>
                <span style="font-size:12px;">ÄŒas: <strong id="minesTime">0</strong>s</span>
            </div>
            <div style="padding:12px;">
                <div style="display:grid; grid-template-columns: repeat(9, 26px); gap:2px; justify-content:center; margin-top:10px;" id="minesGrid"></div>
                <div style="text-align:center; margin-top:12px; font-size:12px; color:#444;" id="minesMsg">Klikni na polÃ­Äko.</div>
            </div>
            <div class="status-bar">LevÃ© tlaÄÃ­tko: odhalit</div>
</div>
        </div>

        <div class="window" id="paint" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸ¨ MalovÃ¡nÃ­ - Bez nÃ¡zvu</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('paint')">_</div>
                    <div class="window-button" onclick="maximizeWindow('paint')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('paint')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 5px;">
                <div style="background: #D4D0C8; padding: 5px; margin-bottom: 5px; border: 1px solid #888;">
                    <button onclick="selectTool('pen')" id="toolPen" style="padding: 5px 10px; margin: 2px; background: #fff; border: 2px outset #888;">âœï¸ TuÅ¾ka</button>
                    <button onclick="selectTool('eraser')" id="toolEraser" style="padding: 5px 10px; margin: 2px; background: #E0E0E0; border: 2px outset #888;">ğŸ§¹ Guma</button>
                    <button onclick="clearCanvas()" style="padding: 5px 10px; margin: 2px; background: #E0E0E0; border: 2px outset #888;">ğŸ—‘ï¸ Smazat vÅ¡e</button>
                    <span style="margin-left: 20px;">Barva:</span>
                    <input type="color" id="colorPicker" value="#000000" style="margin-left: 5px; cursor: pointer;">
                    <span style="margin-left: 10px;">Velikost:</span>
                    <input type="range" id="brushSize" min="1" max="20" value="3" style="width: 100px; vertical-align: middle;">
                </div>
                <canvas id="paintCanvas" width="580" height="350" style="border: 2px inset #888; background: white; cursor: crosshair; display: block;"></canvas>
            </div>
        </div>

        <div class="window" id="virus">
            <div class="window-title">
                <span>ğŸ¦  Antivirus Windows XP</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('virus')">_</div>
                    <div class="window-button" onclick="maximizeWindow('virus')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('virus')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <div class="menu-bar">
                    <span>Soubor</span><span>SkenovÃ¡nÃ­</span><span>NastavenÃ­</span><span>NÃ¡povÄ›da</span>
                </div>
                <div class="toolbar">
                    <button class="xp-btn" onclick="avStart()">Spustit sken</button>
                    <button class="xp-btn" onclick="avStop()">Zastavit</button>
                    <button class="xp-btn" onclick="avQuarantine()">KarantÃ©na</button>
                    <span style="margin-left:auto;font-size:12px;color:#444">Definice: 0.1</span>
                </div>

                <h2 style="color: #b00000; text-align: center; margin-top: 10px;">VAROVÃNÃ</h2>
                <p style="text-align: center; margin: 10px 0;" id="avState">
                    Stav: pÅ™ipraven
                </p>

                <div class="progress-outer" style="margin: 10px 0;">
                    <div class="progress-inner" id="avBar"></div>
                </div>

                <div style="background: #000; color: #0f0; padding: 12px; font-family: 'Courier New'; margin: 10px 0; height: 140px; overflow:auto;" id="avLog">
                    > ÄekÃ¡ na spuÅ¡tÄ›nÃ­<br>
                </div>

                <div class="status-bar" id="avStatus">0 nalezenÃ½ch hrozeb</div>
</div>
        </div>

        <div class="window" id="notepad">
            <div class="window-title">
                <span>ğŸ“ PoznÃ¡mkovÃ½ blok - Bez nÃ¡zvu</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('notepad')">_</div>
                    <div class="window-button" onclick="maximizeWindow('notepad')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('notepad')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 5px;">
                
                <div class="menu-bar">
                    <span>Soubor</span><span>Ãšpravy</span><span>FormÃ¡t</span><span>ZobrazenÃ­</span><span>NÃ¡povÄ›da</span>
                </div>
                <div class="toolbar">
                    <button class="xp-btn" onclick="notepadNew()">NovÃ½</button>
                    <button class="xp-btn" onclick="notepadLoad()">OtevÅ™Ã­t</button>
                    <button class="xp-btn" onclick="notepadSave()">UloÅ¾it</button>
                    <button class="xp-btn" onclick="notepadSaveAsTxt()">UloÅ¾it jako .txt</button>
                    <span style="margin-left:auto;font-size:12px;color:#444">UTF-8</span>
                </div>
                <textarea id="notepadText" style="width: 100%; height: calc(100% - 78px); border: none; outline: none; font-family: 'Courier New'; font-size: 13px; resize: none;" placeholder="ZaÄni psÃ¡t..."></textarea>
                <div class="status-bar" id="notepadStatus">Å˜Ã¡dek 1, Sloupec 1</div>

            </div>
        </div>

        <div class="window" id="calculator">
            <div class="window-title">
                <span>ğŸ”¢ KalkulaÄka</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('calculator')">_</div>
                    <div class="window-button" onclick="closeWindow('calculator')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 10px;">
                <div style="background: #E0E0E0; padding: 10px; border: 2px inset #888;">
                    <input type="text" id="calcDisplay" readonly value="0" style="width: 100%; text-align: right; font-size: 24px; padding: 5px; border: 2px inset #888; background: #FFF;">
                </div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 10px;">
                    <button onclick="calcInput('7')" style="padding: 15px; font-size: 16px;">7</button>
                    <button onclick="calcInput('8')" style="padding: 15px; font-size: 16px;">8</button>
                    <button onclick="calcInput('9')" style="padding: 15px; font-size: 16px;">9</button>
                    <button onclick="calcInput('/')" style="padding: 15px; font-size: 16px;">/</button>
                    <button onclick="calcInput('4')" style="padding: 15px; font-size: 16px;">4</button>
                    <button onclick="calcInput('5')" style="padding: 15px; font-size: 16px;">5</button>
                    <button onclick="calcInput('6')" style="padding: 15px; font-size: 16px;">6</button>
                    <button onclick="calcInput('*')" style="padding: 15px; font-size: 16px;">*</button>
                    <button onclick="calcInput('1')" style="padding: 15px; font-size: 16px;">1</button>
                    <button onclick="calcInput('2')" style="padding: 15px; font-size: 16px;">2</button>
                    <button onclick="calcInput('3')" style="padding: 15px; font-size: 16px;">3</button>
                    <button onclick="calcInput('-')" style="padding: 15px; font-size: 16px;">-</button>
                    <button onclick="calcInput('0')" style="padding: 15px; font-size: 16px;">0</button>
                    <button onclick="calcClear()" style="padding: 15px; font-size: 16px;">C</button>
                    <button onclick="calcEqual()" style="padding: 15px; font-size: 16px;">=</button>
                    <button onclick="calcInput('+')" style="padding: 15px; font-size: 16px;">+</button>
                </div>
            </div>
        </div>

        <div class="window" id="taskManager" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸ“Š SprÃ¡vce Ãºloh</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('taskManager')">_</div>
                    <div class="window-button" onclick="closeWindow('taskManager')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 0;">
                <div style="border-bottom: 2px solid #D4D0C8; padding: 5px;">
                    <button onclick="taskManagerRefresh()" style="padding: 5px 15px;">ğŸ”„ Aktualizovat</button>
                    <button onclick="endTask()" style="padding: 5px 15px; margin-left: 5px;">âŒ UkonÄit Ãºlohu</button>
                </div>
                <div style="padding: 10px;">
                    <table id="taskTable" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #D4D0C8;">
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">NÃ¡zev Ãºlohy</th>
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">Stav</th>
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">CPU</th>
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">PamÄ›Å¥</th>
                            </tr>
                        </thead>
                        <tbody id="taskTableBody">
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">System Idle Process</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no</td>
                                <td style="padding: 5px; border: 1px solid #888;">99%</td>
                                <td style="padding: 5px; border: 1px solid #888;">0 KB</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">explorer.exe</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no</td>
                                <td style="padding: 5px; border: 1px solid #888;">1%</td>
                                <td style="padding: 5px; border: 1px solid #888;">15,234 KB</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">chrome.exe</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no</td>
                                <td style="padding: 5px; border: 1px solid #888;">45%</td>
                                <td style="padding: 5px; border: 1px solid #888;">1,234,567 KB</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">Antivirus XP</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no ğŸš©</td>
                                <td style="padding: 5px; border: 1px solid #888;">89%</td>
                                <td style="padding: 5px; border: 1px solid #888;">999,999 KB</td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 20px; padding: 10px; background: #f0f0f0; border: 1px solid #888;">
                        <p><strong>VÃ½kon systÃ©mu:</strong></p>
                        <p>CPU: <span id="cpuUsage">45%</span> | RAM: 234 MB / 256 MB</p>
                        <p>Procesy: 42 | Threads: 420 | Handles: 4200</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="runDialog" style="width: 400px; height: 200px;">
            <div class="window-title">
                <span>â–¶ï¸ Spustit</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('runDialog')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <p style="margin-bottom: 15px;">Zadejte nÃ¡zev programu, sloÅ¾ky, dokumentu nebo internetovÃ© adresy a systÃ©m Windows je otevÅ™e.</p>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px;">OtevÅ™Ã­t:</label>
                    <input type="text" id="runInput" placeholder="notepad, calc, mspaint..." style="width: 100%; padding: 5px; border: 2px inset #888;">
                </div>
                <div style="text-align: right;">
                    <button onclick="executeRun()" style="padding: 5px 20px; margin-right: 5px;">OK</button>
                    <button onclick="closeWindow('runDialog')" style="padding: 5px 20px;">Storno</button>
                </div>
            </div>
        </div>

        <div class="window" id="myDocuments" style="width: 600px; height: 400px;">
            <div class="window-title">
                <span>ğŸ“ Dokumenty</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myDocuments')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myDocuments')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myDocuments')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <div style="background: #D4D0C8; padding: 5px; margin-bottom: 10px; border: 1px solid #888;">
                    <button onclick="playClickSound()">â¬…ï¸ ZpÄ›t</button>
                    <button onclick="playClickSound()">â¡ï¸ VpÅ™ed</button>
                    <button onclick="playClickSound()">â¬†ï¸ Nahoru</button>
                    <input type="text" value="C:\Documents and Settings\User\Dokumenty" style="flex: 1; margin: 0 10px; padding: 3px;">
                </div>
                <h3>ğŸ“„ Moje dokumenty:</h3>
                <p>ğŸ“ BakalÃ¡Å™ka_final_final_FINAL.doc</p>
                <p>ğŸ“ CV_2024.pdf</p>
                <p>ğŸ“Š VÃ½daje_2024.xls</p>
                <p>ğŸ“„ TajnÃ©_plÃ¡ny.txt</p>
                <p>ğŸ“ StarÃ©_fotky_z_mobilu</p>
                <p>ğŸ“ ZÃ¡loha_zÃ¡lohy</p>
                <p>ğŸµ Playlist_2000s.m3u</p>
                <p>ğŸ“‹ Hesla_NEZÃLOHOVAT.txt</p>
            </div>
        </div>

        <div class="window" id="myMusic" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸµ Windows Media Player</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myMusic')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myMusic')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myMusic')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="background: #000; color: #0ff; padding: 0;">
                <div style="background: linear-gradient(to bottom, #2B5278, #1A3450); padding: 10px;">
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">â™«</div>
                        <div style="font-size: 18px; color: #fff;">NynÃ­ pÅ™ehrÃ¡vÃ¡:</div>
                        <div style="font-size: 24px; color: #0ff; margin: 10px 0;">Darude - Sandstorm</div>
                        <div style="color: #888;">Various Artists - 2000s Hits</div>
                    </div>
                    <div style="background: #000; padding: 10px; margin: 20px 0;">
                        <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 10px;">
                            <button onclick="playClickSound()" style="padding: 10px 20px; font-size: 20px;">â®ï¸</button>
                            <button onclick="togglePlay()" id="playBtn" style="padding: 10px 30px; font-size: 20px;">â–¶ï¸</button>
                            <button onclick="playClickSound()" style="padding: 10px 20px; font-size: 20px;">â­ï¸</button>
                        </div>
                        <div style="background: #333; height: 10px; border-radius: 5px; overflow: hidden;">
                            <div id="musicProgress" style="background: linear-gradient(to right, #0ff, #00f); height: 100%; width: 35%; transition: width 0.3s;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; color: #888; font-size: 12px; margin-top: 5px;">
                            <span>1:23</span>
                            <span>3:45</span>
                        </div>
                    </div>
                    <div style="padding: 10px;">
                        <h4 style="color: #fff; margin-bottom: 10px;">ğŸ“‹ Playlist:</h4>
                        <div style="background: #000; padding: 10px; max-height: 150px; overflow-y: auto;">
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Darude - Sandstorm</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Eiffel 65 - Blue</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Crazy Frog - Axel F</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Vengaboys - Boom Boom</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Scatman John - Scatman</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="myPictures" style="width: 650px; height: 450px;">
            <div class="window-title">
                <span>ğŸ–¼ï¸ ObrÃ¡zky</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myPictures')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myPictures')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myPictures')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <div style="background: #D4D0C8; padding: 5px; margin-bottom: 10px; border: 1px solid #888;">
                    <button onclick="playClickSound()">ğŸ” Zobrazit jako miniatury</button>
                    <button onclick="playClickSound()">ğŸ“Š Zobrazit jako seznam</button>
                </div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; margin-bottom: 5px;">ğŸï¸</div>
                        <div style="font-size: 11px;">dovolena_2003.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; margin-bottom: 5px;">ğŸ‚</div>
                        <div style="font-size: 11px;">narozeniny.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 20px; margin-bottom: 5px;">ğŸ•</div>
                        <div style="font-size: 11px;">mazlicek.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 20px; margin-bottom: 5px;">ğŸŒ…</div>
                        <div style="font-size: 11px;">wallpaper.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); padding: 20px; margin-bottom: 5px;">ğŸ“¸</div>
                        <div style="font-size: 11px;">selfie_2004.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); padding: 20px; margin-bottom: 5px;">ğŸ”ï¸</div>
                        <div style="font-size: 11px;">hory.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 20px; margin-bottom: 5px;">ğŸŒƒ</div>
                        <div style="font-size: 11px;">mesto_noc.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); padding: 20px; margin-bottom: 5px;">â“</div>
                        <div style="font-size: 11px;">neznamy.bmp</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="network" style="width: 550px; height: 400px;">
            <div class="window-title">
                <span>ğŸŒ SÃ­Å¥ovÃ© pÅ™ipojenÃ­</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('network')">_</div>
                    <div class="window-button" onclick="maximizeWindow('network')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('network')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>ğŸ“¡ AktivnÃ­ pÅ™ipojenÃ­:</h3>
                <div style="border: 2px inset #888; padding: 15px; margin: 15px 0; background: #fff;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <div style="font-size: 48px;">ğŸ“¶</div>
                        <div>
                            <h4>MÃ­stnÃ­ pÅ™ipojenÃ­</h4>
                            <p style="color: #0a0;">âœ“ PÅ™ipojeno</p>
                            <p style="font-size: 12px; color: #666;">100 Mb/s</p>
                        </div>
                    </div>
                    <div style="background: #f0f0f0; padding: 10px; border: 1px solid #ccc;">
                        <p><strong>IP adresa:</strong> 192.168.1.69</p>
                        <p><strong>Maska podsÃ­tÄ›:</strong> 255.255.255.0</p>
                        <p><strong>VÃ½chozÃ­ brÃ¡na:</strong> 192.168.1.1</p>
                        <p><strong>DNS server:</strong> 8.8.8.8</p>
                    </div>
                </div>
                <div style="border: 2px inset #888; padding: 15px; background: #fff;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 48px; opacity: 0.3;">ğŸ“¡</div>
                        <div style="opacity: 0.5;">
                            <h4>BezdrÃ¡tovÃ© pÅ™ipojenÃ­</h4>
                            <p style="color: #a00;">âœ— Odpojeno</p>
                            <p style="font-size: 12px; color: #666;">Wifi adaptÃ©r nenalezen</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <button onclick="playClickSound(); systemMessage('Diagnostika sÃ­tÄ›: VÅ¡e funguje! ')">ğŸ”§ Diagnostika</button>
                    <button onclick="playClickSound(); systemMessage('PÅ™ipojenÃ­ obnoveno! (moÅ¾nÃ¡)')">ğŸ”„ Obnovit</button>
                </div>
            </div>
        </div>

        <div class="window" id="cmd" style="width: 600px; height: 400px; background: #000;">
            <div class="window-title">
                <span>âš« PÅ™Ã­kazovÃ½ Å™Ã¡dek</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('cmd')">_</div>
                    <div class="window-button" onclick="maximizeWindow('cmd')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('cmd')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="background: #000; color: #0f0; font-family: 'Courier New'; padding: 10px;">
                <div id="cmdOutput">Windows 9000 [Verze 5.1.2600]<br>(C) Copyright 1985-2001 Microsoft Corp.<br><br>C:\Documents and Settings\User&gt;</div>
                <div style="display: flex; margin-top: 5px;">
                    <span>C:\Documents and Settings\User&gt;</span>
                    <input type="text" id="cmdInput" style="flex: 1; background: #000; color: #0f0; border: none; outline: none; font-family: 'Courier New'; margin-left: 5px;" onkeypress="if(event.key==='Enter') executeCmd()">
                    <span class="cursor-blink" style="animation: blink 1s infinite;">_</span>
                </div>
            </div>
        </div>

        <div class="window" id="wordpad" style="width: 650px; height: 500px;">
            <div class="window-title">
                <span>ğŸ“ WordPad</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('wordpad')">_</div>
                    <div class="window-button" onclick="maximizeWindow('wordpad')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('wordpad')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 0;">
                <div style="background: #D4D0C8; padding: 5px; border-bottom: 1px solid #888;">
                    <button onclick="playClickSound()" style="padding: 3px 8px;">ğŸ“„ NovÃ½</button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;">ğŸ“‚ OtevÅ™Ã­t</button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;">ğŸ’¾ UloÅ¾it</button>
                    |
                    <button onclick="playClickSound()" style="padding: 3px 8px;"><strong>B</strong></button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;"><em>I</em></button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;"><u>U</u></button>
                    |
                    <select style="padding: 3px;">
                        <option>Arial</option>
                        <option>Times New Roman</option>
                        <option>Comic Sans MS</option>
                    </select>
                    <select style="padding: 3px;">
                        <option>12</option>
                        <option>14</option>
                        <option>16</option>
                    </select>
                </div>
                <textarea style="width: 100%; height: calc(100% - 40px); border: none; padding: 20px; font-family: 'Times New Roman'; font-size: 14px; resize: none;" placeholder="ZaÄnÄ›te psÃ¡t..."></textarea>
            </div>
        </div>

        <div class="window" id="systemRestore" style="width: 550px; height: 450px;">
            <div class="window-title">
                <span>ğŸ”„ ObnovenÃ­ systÃ©mu</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('systemRestore')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h2 style="color: #0066cc; margin-bottom: 20px;">VÃ­tejte v ObnovenÃ­ systÃ©mu</h2>
                <p style="margin-bottom: 20px;">ObnovenÃ­ systÃ©mu mÅ¯Å¾e vrÃ¡tit systÃ©movÃ© soubory a nastavenÃ­ poÄÃ­taÄe do dÅ™Ã­vÄ›jÅ¡Ã­ho bodu v Äase, aniÅ¾ by ovlivnilo osobnÃ­ soubory.</p>
                
                <div style="background: #fffacd; border: 2px solid #ffa500; padding: 15px; margin: 20px 0;">
                    <strong>âš ï¸ UpozornÄ›nÃ­:</strong> VÅ¡echny zmÄ›ny provedenÃ© po vybranÃ©m bodÄ› obnovenÃ­ budou zruÅ¡eny.
                </div>

                <h3>DostupnÃ© body obnovenÃ­:</h3>
                <div style="border: 2px inset #888; padding: 10px; background: #fff; max-height: 180px; overflow-y: auto;">
                    <div style="padding: 8px; border-bottom: 1px solid #ccc; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>29.1.2026 13:37</strong> - AutomatickÃ½ bod obnovenÃ­<br>
                        <span style="font-size: 12px; color: #666;">PÅ™ed instalacÃ­ podezÅ™elÃ©ho softwaru</span>
                    </div>
                    <div style="padding: 8px; border-bottom: 1px solid #ccc; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>15.1.2026 10:00</strong> - ManuÃ¡lnÃ­ bod obnovenÃ­<br>
                        <span style="font-size: 12px; color: #666;">KdyÅ¾ vÅ¡echno jeÅ¡tÄ› fungovalo</span>
                    </div>
                    <div style="padding: 8px; border-bottom: 1px solid #ccc; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>1.1.2026 00:00</strong> - SilvestrovskÃ½ bod obnovenÃ­<br>
                        <span style="font-size: 12px; color: #666;">PÅ™ed oslavami novÃ©ho roku</span>
                    </div>
                    <div style="padding: 8px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>25.12.2025 18:00</strong> - VÃ¡noÄnÃ­ bod<br>
                        <span style="font-size: 12px; color: #666;">PÅ™ed rozbalovÃ¡nÃ­m dÃ¡rkÅ¯</span>
                    </div>
                </div>

                <div style="text-align: right; margin-top: 20px;">
                    <button onclick="restoreSystem()" style="padding: 8px 20px;">â–¶ï¸ Spustit obnovenÃ­</button>
                    <button onclick="closeWindow('systemRestore')" style="padding: 8px 20px; margin-left: 10px;">ZruÅ¡it</button>
                </div>
            </div>
        </div>

        <div class="window" id="diskCleanup" style="width: 500px; height: 450px;">
            <div class="window-title">
                <span>ğŸ§¹ VyÄiÅ¡tÄ›nÃ­ disku</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('diskCleanup')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>VyÄiÅ¡tÄ›nÃ­ disku (C:)</h3>
                <p style="margin: 15px 0;">MÅ¯Å¾ete uvolnit aÅ¾ <strong style="color: #0066cc;">4.20 GB</strong> mÃ­sta na disku C:</p>
                
                <div style="border: 2px inset #888; padding: 10px; background: #fff; margin: 15px 0;">
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> DoÄasnÃ© internetovÃ© soubory (1.2 GB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> KoÅ¡ (850 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> DoÄasnÃ© soubory (650 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox"> Miniatury obrÃ¡zkÅ¯ (420 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> StarÃ© soubory protokolu (890 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox"> Offline webovÃ© strÃ¡nky (210 MB)
                    </label>
                </div>

                <div style="background: #f0f0f0; padding: 15px; border: 1px solid #ccc; margin: 15px 0;">
                    <p><strong>Popis:</strong> DoÄasnÃ© internetovÃ© soubory jsou webovÃ© strÃ¡nky uloÅ¾enÃ© v poÄÃ­taÄi pro rychlÃ½ pÅ™Ã­stup. OsobnÃ­ nastavenÃ­ webovÃ½ch strÃ¡nek zÅ¯stanou zachovÃ¡na.</p>
                </div>

                <div style="text-align: right;">
                    <button onclick="startCleanup()" style="padding: 8px 20px;">ğŸ§¹ VyÄistit</button>
                    <button onclick="closeWindow('diskCleanup')" style="padding: 8px 20px; margin-left: 10px;">ZruÅ¡it</button>
                </div>
            </div>
        </div>

        <div class="window" id="defrag" style="width: 600px; height: 400px;">
            <div class="window-title">
                <span>ğŸ’¿ Defragmentace disku</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('defrag')">_</div>
                    <div class="window-button" onclick="closeWindow('defrag')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>Defragmentace disku</h3>
                <p style="margin: 15px 0;">Vyberte disk, kterÃ½ chcete defragmentovat:</p>
                
                <div style="border: 2px inset #888; background: #fff; padding: 10px; margin: 15px 0;">
                    <div style="padding: 10px; background: #e0e0ff; margin-bottom: 5px; cursor: pointer;">
                        <strong>ğŸ’¿ Disk C:</strong> (SystÃ©movÃ½)<br>
                        <span style="font-size: 12px;">Fragmentace: 45% - DoporuÄena defragmentace!</span>
                    </div>
                    <div style="padding: 10px; background: #f0f0f0; cursor: pointer;">
                        <strong>ğŸ’¿ Disk D:</strong> (Data)<br>
                        <span style="font-size: 12px;">NenÃ­ k dispozici</span>
                    </div>
                </div>

                <div id="defragProgress" style="display: none; margin: 20px 0;">
                    <p><strong>ProbÃ­hÃ¡ defragmentace...</strong></p>
                    <div style="background: #fff; border: 2px inset #888; height: 30px; margin: 10px 0; position: relative; overflow: hidden;">
                        <div id="defragBar" style="background: linear-gradient(to right, #0066cc, #00aaff); height: 100%; width: 0%; transition: width 0.5s;"></div>
                    </div>
                    <p style="font-size: 12px; color: #666;">OdhadovanÃ½ Äas: 2 hodiny 15 minut (neboj, to je fake)</p>
                </div>

                <div style="text-align: right; margin-top: 20px;">
                    <button onclick="startDefrag()" style="padding: 8px 20px;">â–¶ï¸ Defragmentovat</button>
                    <button onclick="analyzeDefrag()" style="padding: 8px 20px; margin-left: 10px;">ğŸ” Analyzovat</button>
                    <button onclick="closeWindow('defrag')" style="padding: 8px 20px; margin-left: 10px;">ZavÅ™Ã­t</button>
                </div>
            </div>
        </div>

        <div class="window" id="controlPanel" style="width: 700px; height: 500px;">
            <div class="window-title">
                <span>âš™ï¸ OvlÃ¡dacÃ­ panely</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('controlPanel')">_</div>
                    <div class="window-button" onclick="maximizeWindow('controlPanel')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('controlPanel')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <div style="background: #D4D0C8; padding: 10px; margin-bottom: 15px; border: 1px solid #888;">
                    <strong>Vyberte kategorii:</strong>
                    <select style="margin-left: 10px; padding: 5px;">
                        <option>ZobrazenÃ­ kategoriÃ­</option>
                        <option>KlasickÃ© zobrazenÃ­</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                    <div onclick="openWindow('displayProps')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ–¥ï¸</div>
                        <div style="font-size: 12px;"><strong>Obrazovka</strong></div>
                    </div>
                    <div onclick="openWindow('soundsAudio')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ”Š</div>
                        <div style="font-size: 12px;"><strong>Zvuky a audio</strong></div>
                    </div>
                    <div onclick="openWindow('network')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸŒ</div>
                        <div style="font-size: 12px;"><strong>SÃ­Å¥ a Internet</strong></div>
                    </div>
                    <div onclick="openWindow('deviceManager')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ”§</div>
                        <div style="font-size: 12px;"><strong>SprÃ¡vce zaÅ™Ã­zenÃ­</strong></div>
                    </div>
                    <div onclick="openWindow('userAccounts')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ‘¤</div>
                        <div style="font-size: 12px;"><strong>UÅ¾ivatelskÃ© ÃºÄty</strong></div>
                    </div>
                    <div onclick="openWindow('addRemove')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ“¦</div>
                        <div style="font-size: 12px;"><strong>PÅ™idat/Odebrat programy</strong></div>
                    </div>
                    <div onclick="openWindow('datetime')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ•</div>
                        <div style="font-size: 12px;"><strong>Datum a Äas</strong></div>
                    </div>
                    <div onclick="openWindow('mouse')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ–±ï¸</div>
                        <div style="font-size: 12px;"><strong>MyÅ¡</strong></div>
                    </div>
                    <div onclick="openWindow('keyboard')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">âŒ¨ï¸</div>
                        <div style="font-size: 12px;"><strong>KlÃ¡vesnice</strong></div>
                    </div>
                    <div onclick="openWindow('fonts')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ”¤</div>
                        <div style="font-size: 12px;"><strong>PÃ­sma</strong></div>
                    </div>
                    <div onclick="openWindow('accessibility')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">â™¿</div>
                        <div style="font-size: 12px;"><strong>UsnadnÄ›nÃ­</strong></div>
                    </div>
                    <div onclick="openWindow('power')" style="text-align: center; padding: 15px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ”‹</div>
                        <div style="font-size: 12px;"><strong>MoÅ¾nosti napÃ¡jenÃ­</strong></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="displayProps" style="width: 500px; height: 550px;">
            <div class="window-title">
                <span>ğŸ–¥ï¸ Vlastnosti: Obrazovka</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('displayProps')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 0;">
                <div style="background: #D4D0C8; padding: 5px; display: flex; border-bottom: 1px solid #888;">
                    <button onclick="switchDisplayTab('themes')" id="tabThemes" style="padding: 8px 15px; border: 2px outset #fff; background: #ECE9D8; cursor: pointer;">Motivy</button>
                    <button onclick="switchDisplayTab('desktop')" id="tabDesktop" style="padding: 8px 15px; border: 2px outset #fff; background: #D4D0C8; cursor: pointer;">Plocha</button>
                    <button onclick="switchDisplayTab('screensaver')" id="tabScreensaver" style="padding: 8px 15px; border: 2px outset #fff; background: #D4D0C8; cursor: pointer;">Å etÅ™iÄ</button>
                    <button onclick="switchDisplayTab('appearance')" id="tabAppearance" style="padding: 8px 15px; border: 2px outset #fff; background: #D4D0C8; cursor: pointer;">Vzhled</button>
                    <button onclick="switchDisplayTab('settings')" id="tabSettings" style="padding: 8px 15px; border: 2px outset #fff; background: #D4D0C8; cursor: pointer;">NastavenÃ­</button>
                </div>
                
                <div id="displayTabContent" style="padding: 20px;">
                    <!-- Themes tab -->
                    <div id="themesContent">
                        <h3>Motivy</h3>
                        <div style="background: #fff; border: 2px inset #888; padding: 100px 20px; text-align: center; margin: 20px 0;">
                            <div style="font-size: 48px;">ğŸªŸ</div>
                            <div style="margin-top: 10px; color: #666;">NÃ¡hled motivu Windows XP</div>
                        </div>
                        <label>Motiv:</label>
                        <select style="width: 100%; padding: 5px; margin-top: 5px;">
                            <option>Windows XP</option>
                            <option>Windows Classic</option>
                            <option>ModrÃ¡</option>
                            <option>OlivovÃ¡ zelenÃ¡</option>
                            <option>StÅ™Ã­brnÃ¡</option>
                        </select>
                    </div>
                </div>
                
                <div style="background: #D4D0C8; padding: 10px; border-top: 1px solid #888; text-align: right;">
                    <button onclick="playClickSound(); systemMessage('NastavenÃ­ uloÅ¾eno! ğŸ’¾')" style="padding: 5px 20px; margin-right: 5px;">OK</button>
                    <button onclick="playClickSound(); systemMessage('PouÅ¾ito! âœ“')" style="padding: 5px 20px; margin-right: 5px;">PouÅ¾Ã­t</button>
                    <button onclick="closeWindow('displayProps')" style="padding: 5px 20px;">Storno</button>
                </div>
            </div>
        </div>

        <div class="window" id="soundsAudio" style="width: 500px; height: 450px;">
            <div class="window-title">
                <span>ğŸ”Š Vlastnosti: Zvuky a zvukovÃ¡ zaÅ™Ã­zenÃ­</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('soundsAudio')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>ZvukovÃ¡ schÃ©mata</h3>
                <label style="display: block; margin: 15px 0;">SchÃ©ma:</label>
                <select style="width: 100%; padding: 5px;">
                    <option>Windows vÃ½chozÃ­</option>
                    <option>Bez zvukÅ¯</option>
                    <option>Windows XP</option>
                </select>
                
                <div style="margin: 20px 0;">
                    <label style="display: block; margin-bottom: 10px;">ProgramovÃ© udÃ¡losti:</label>
                    <div style="border: 2px inset #888; background: #fff; padding: 10px; max-height: 200px; overflow-y: auto;">
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">ğŸ”” VÃ½chozÃ­ pÃ­pnutÃ­</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">ğŸ“§ NovÃ¡ poÅ¡ta</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">ğŸš¨ KritickÃ¡ chyba</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">âš ï¸ VÃ½kÅ™iÄnÃ­k</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">â“ OtÃ¡zka</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">ğŸªŸ SpuÅ¡tÄ›nÃ­ Windows</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">ğŸ”´ UkonÄenÃ­ Windows</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">ğŸ“‚ OtevÅ™Ã­t aplikaci</div>
                        <div style="padding: 5px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">âŒ ZavÅ™Ã­t aplikaci</div>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <label>Zvuky:</label>
                    <select style="width: 100%; padding: 5px; margin-top: 5px;">
                        <option>C:\Windows\Media\chimes.wav</option>
                        <option>C:\Windows\Media\chord.wav</option>
                        <option>C:\Windows\Media\ding.wav</option>
                    </select>
                    <button onclick="playStartupSound()" style="margin-top: 10px; padding: 5px 15px;">â–¶ï¸ PÅ™ehrÃ¡t</button>
                </div>
            </div>
        </div>

        <div class="window" id="deviceManager" style="width: 550px; height: 500px;">
            <div class="window-title">
                <span>ğŸ”§ SprÃ¡vce zaÅ™Ã­zenÃ­</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('deviceManager')">_</div>
                    <div class="window-button" onclick="closeWindow('deviceManager')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 10px;">
                <div style="border: 2px inset #888; background: #fff; padding: 10px; height: 400px; overflow-y: auto; font-family: 'Courier New'; font-size: 12px;">
                    <div style="margin: 5px 0;">ğŸ“¦ PoÄÃ­taÄ</div>
                    <div style="margin-left: 20px;">
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸ’¿ DiskovÃ© jednotky</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">WDC WD800BB-75JHC0</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸ–¥ï¸ Monitory</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">Plug and Play Monitor</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸ–±ï¸ MyÅ¡i a jinÃ¡ polohovacÃ­ zaÅ™Ã­zenÃ­</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">HID-compliant mouse</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ âŒ¨ï¸ KlÃ¡vesnice</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">StandardnÃ­ PS/2 klÃ¡vesnice</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸ”Š ZvukovÃ¡, video a hernÃ­ zaÅ™Ã­zenÃ­</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">Realtek AC'97 Audio</div>
                            <div style="margin: 3px 0;">Microsoft Kernel System Audio Device</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸŒ SÃ­Å¥ovÃ© adaptÃ©ry</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">Realtek RTL8139 Family PCI Fast Ethernet NIC</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸ® Procesory</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">Intel Pentium 4 CPU 2.80GHz</div>
                        </div>
                        
                        <div style="margin: 5px 0; cursor: pointer;" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='none'?'block':'none'">â–¶ï¸ ğŸ“¡ Porty (COM a LPT)</div>
                        <div style="margin-left: 20px; display: none;">
                            <div style="margin: 3px 0;">Port tiskÃ¡rny (LPT1)</div>
                            <div style="margin: 3px 0;">Communications Port (COM1)</div>
                        </div>
                        
                        <div style="margin: 5px 0; color: #c00; cursor: pointer;" onclick="systemMessage('âš ï¸ ZaÅ™Ã­zenÃ­ mÃ¡ problÃ©m!\\nKÃ³d chyby: 43\\n\\nOvladaÄ mÅ¯Å¾e bÃ½t zastaralÃ½ nebo poÅ¡kozenÃ½.')">âŒ âš ï¸ NeznÃ¡mÃ© zaÅ™Ã­zenÃ­</div>
                    </div>
                </div>
                
                <div style="margin-top: 10px;">
                    <button onclick="playClickSound(); systemMessage('ZaÅ™Ã­zenÃ­ aktualizovÃ¡na! ğŸ”„')" style="padding: 5px 15px;">ğŸ”„ Aktualizovat</button>
                    <button onclick="playClickSound(); systemMessage('HledÃ¡nÃ­ novÃ½ch zaÅ™Ã­zenÃ­... ğŸ”')" style="padding: 5px 15px; margin-left: 5px;">ğŸ” Vyhledat zmÄ›ny</button>
                </div>
            </div>
        </div>

        <div class="window" id="userAccounts" style="width: 500px; height: 400px;">
            <div class="window-title">
                <span>ğŸ‘¤ UÅ¾ivatelskÃ© ÃºÄty</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('userAccounts')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>Vyberte Ãºkol...</h3>
                <div style="margin: 20px 0;">
                    <div style="padding: 15px; background: #f0f0f0; border: 1px solid #ccc; margin: 10px 0; cursor: pointer;" onclick="playClickSound(); systemMessage('ZmÄ›na ÃºÄtu... ğŸ‘¤')">
                        <strong>ğŸ‘¤ ZmÄ›nit ÃºÄet</strong>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">ZmÄ›Åˆte jmÃ©no, obrÃ¡zek, typ nebo heslo ÃºÄtu</div>
                    </div>
                    <div style="padding: 15px; background: #f0f0f0; border: 1px solid #ccc; margin: 10px 0; cursor: pointer;" onclick="playClickSound(); systemMessage('VytvÃ¡Å™enÃ­ novÃ©ho ÃºÄtu... â•')">
                        <strong>â• VytvoÅ™it novÃ½ ÃºÄet</strong>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">VytvoÅ™te novÃ½ uÅ¾ivatelskÃ½ ÃºÄet</div>
                    </div>
                    <div style="padding: 15px; background: #f0f0f0; border: 1px solid #ccc; margin: 10px 0; cursor: pointer;" onclick="playClickSound(); systemMessage('ZmÄ›na zpÅ¯sobu pÅ™ihlÃ¡Å¡enÃ­... ğŸ”')">
                        <strong>ğŸ” ZmÄ›nit zpÅ¯sob pÅ™ihlÃ¡Å¡enÃ­ a odhlÃ¡Å¡enÃ­ uÅ¾ivatelÅ¯</strong>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">Vyberte pÅ™ihlaÅ¡ovacÃ­ moÅ¾nosti</div>
                    </div>
                </div>
                
                <div style="background: #fffacd; border: 1px solid #ffa500; padding: 15px; margin-top: 20px;">
                    <strong>ğŸ’¡ Tip:</strong> Pro zmÄ›nu ÃºÄtu potÅ™ebujete prÃ¡va sprÃ¡vce.
                </div>
            </div>
        </div>

        <div class="window" id="addRemove" style="width: 600px; height: 500px;">
            <div class="window-title">
                <span>ğŸ“¦ PÅ™idat nebo odebrat programy</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('addRemove')">_</div>
                    <div class="window-button" onclick="closeWindow('addRemove')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 10px;">
                <p style="margin-bottom: 15px;">Chcete-li zmÄ›nit program nebo ho odebrat z poÄÃ­taÄe, kliknÄ›te na tlaÄÃ­tko ZmÄ›nit nebo Odebrat.</p>
                
                <div style="border: 2px inset #888; background: #fff; padding: 10px; height: 350px; overflow-y: auto;">
                    <div style="padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸ“¦ Adobe Reader 7.0</strong><br>
                            <span style="font-size: 11px; color: #666;">Velikost: 45.2 MB | PouÅ¾ito: ÄŒasto</span>
                        </div>
                        <button onclick="playClickSound(); systemMessage('OdebÃ­rÃ¡nÃ­ Adobe Reader... ğŸ—‘ï¸')" style="padding: 5px 15px;">Odebrat</button>
                    </div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸ® DirectX 9.0c</strong><br>
                            <span style="font-size: 11px; color: #666;">Velikost: 95.5 MB | PouÅ¾ito: DennÄ›</span>
                        </div>
                        <button onclick="playClickSound(); systemMessage('DirectX nelze odebrat! âš ï¸')" style="padding: 5px 15px;">Odebrat</button>
                    </div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸŒ Internet Explorer 6</strong><br>
                            <span style="font-size: 11px; color: #666;">Velikost: 78.1 MB | PouÅ¾ito: ObÄas</span>
                        </div>
                        <button onclick="playClickSound(); systemMessage('IE je souÄÃ¡st Windows! ğŸš«')" style="padding: 5px 15px;" disabled>Odebrat</button>
                    </div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸ“Ÿ Windows Messenger</strong><br>
                            <span style="font-size: 11px; color: #666;">Velikost: 12.4 MB | PouÅ¾ito: Nikdy</span>
                        </div>
                        <button onclick="playClickSound(); systemMessage('OdebÃ­rÃ¡nÃ­ Windows Messenger... ğŸ—‘ï¸')" style="padding: 5px 15px;">Odebrat</button>
                    </div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸµ Winamp 5.12</strong><br>
                            <span style="font-size: 11px; color: #666;">Velikost: 8.9 MB | PouÅ¾ito: DennÄ›</span>
                        </div>
                        <button onclick="playClickSound(); systemMessage('OdebÃ­rÃ¡nÃ­ Winamp... ğŸ—‘ï¸')" style="padding: 5px 15px;">Odebrat</button>
                    </div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>ğŸ¦  Antivirus XP</strong><br>
                            <span style="font-size: 11px; color: #666;">Velikost: 666 MB | PouÅ¾ito: PoÅ™Ã¡d ğŸ˜ˆ</span>
                        </div>
                        <button onclick="playClickSound(); systemMessage('PÅ™Ã­stup odepÅ™en! Tento program je chrÃ¡nÄ›n! ğŸ”’')" style="padding: 5px 15px;">Odebrat</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="datetime" style="width: 400px; height: 350px;">
            <div class="window-title">
                <span>ğŸ• Vlastnosti: Datum a Äas</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('datetime')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>NastavenÃ­ data a Äasu</h3>
                <div style="display: flex; gap: 20px; margin: 20px 0;">
                    <div>
                        <label>Datum:</label>
                        <input type="date" value="2026-01-30" style="width: 100%; padding: 5px; margin-top: 5px;">
                    </div>
                    <div>
                        <label>ÄŒas:</label>
                        <input type="time" value="13:37" style="width: 100%; padding: 5px; margin-top: 5px;">
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <label>ÄŒasovÃ© pÃ¡smo:</label>
                    <select style="width: 100%; padding: 5px; margin-top: 5px;">
                        <option>(GMT+01:00) Praha, Bratislava</option>
                        <option>(GMT+00:00) LondÃ½n</option>
                        <option>(GMT-05:00) New York</option>
                    </select>
                </div>
                <div style="text-align: right; margin-top: 30px;">
                    <button onclick="playClickSound(); systemMessage('ÄŒas nastaven! ğŸ•')" style="padding: 5px 20px;">OK</button>
                </div>
            </div>
        </div>

        <div class="window" id="mouse" style="width: 450px; height: 400px;">
            <div class="window-title">
                <span>ğŸ–±ï¸ Vlastnosti: MyÅ¡</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('mouse')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>NastavenÃ­ myÅ¡i</h3>
                <div style="margin: 20px 0;">
                    <label><input type="checkbox" checked> Prohodit primÃ¡rnÃ­ a sekundÃ¡rnÃ­ tlaÄÃ­tka</label>
                </div>
                <div style="margin: 20px 0;">
                    <label>Rychlost dvojkliku:</label>
                    <input type="range" min="200" max="900" value="500" style="width: 100%; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                        <span>PomalÃ©</span>
                        <span>RychlÃ©</span>
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <label>Rychlost ukazatele:</label>
                    <input type="range" min="1" max="20" value="10" style="width: 100%; margin: 10px 0;">
                </div>
                <div style="margin: 20px 0;">
                    <label><input type="checkbox" checked> ZvÃ½Å¡it pÅ™esnost ukazatele</label>
                </div>
            </div>
        </div>

        <div class="window" id="keyboard" style="width: 450px; height: 350px;">
            <div class="window-title">
                <span>âŒ¨ï¸ Vlastnosti: KlÃ¡vesnice</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('keyboard')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>NastavenÃ­ klÃ¡vesnice</h3>
                <div style="margin: 20px 0;">
                    <label>Prodleva pÅ™ed opakovÃ¡nÃ­m:</label>
                    <input type="range" min="250" max="1000" value="500" style="width: 100%; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                        <span>KrÃ¡tkÃ¡</span>
                        <span>DlouhÃ¡</span>
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <label>Rychlost opakovÃ¡nÃ­:</label>
                    <input type="range" min="1" max="31" value="15" style="width: 100%; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                        <span>PomalÃ©</span>
                        <span>RychlÃ©</span>
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <label>Rychlost blikÃ¡nÃ­ kurzoru:</label>
                    <input type="range" min="200" max="1200" value="530" style="width: 100%; margin: 10px 0;">
                </div>
            </div>
        </div>

        <div class="window" id="fonts" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸ”¤ PÃ­sma</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('fonts')">_</div>
                    <div class="window-button" onclick="closeWindow('fonts')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>InstalovanÃ¡ pÃ­sma</h3>
                <div style="border: 2px inset #888; background: #fff; padding: 10px; height: 350px; overflow-y: auto; margin-top: 15px;">
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Arial</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Comic Sans MS</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Courier New</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Georgia</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Impact</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Lucida Console</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Tahoma</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Times New Roman</div>
                    <div style="padding: 10px; border-bottom: 1px solid #ccc;">ğŸ”¤ Trebuchet MS</div>
                    <div style="padding: 10px;">ğŸ”¤ Verdana</div>
                </div>
            </div>
        </div>

        <div class="window" id="accessibility" style="width: 500px; height: 450px;">
            <div class="window-title">
                <span>â™¿ UsnadnÄ›nÃ­</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('accessibility')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>MoÅ¾nosti usnadnÄ›nÃ­</h3>
                <div style="margin: 20px 0;">
                    <h4>ğŸ”Š Zvuk</h4>
                    <label><input type="checkbox"> PouÅ¾Ã­t vizuÃ¡lnÃ­ upozornÄ›nÃ­ mÃ­sto zvuku</label>
                </div>
                <div style="margin: 20px 0;">
                    <h4>ğŸ–¥ï¸ ZobrazenÃ­</h4>
                    <label><input type="checkbox"> PouÅ¾Ã­t vysokÃ½ kontrast</label><br>
                    <label><input type="checkbox"> ZvÄ›tÅ¡it text a ikony</label>
                </div>
                <div style="margin: 20px 0;">
                    <h4>âŒ¨ï¸ KlÃ¡vesnice</h4>
                    <label><input type="checkbox"> PouÅ¾Ã­t zalep klÃ¡vesy</label><br>
                    <label><input type="checkbox"> PouÅ¾Ã­t filtrovÃ¡nÃ­ klÃ¡ves</label>
                </div>
                <div style="margin: 20px 0;">
                    <h4>ğŸ–±ï¸ MyÅ¡</h4>
                    <label><input type="checkbox"> OvlÃ¡dat myÅ¡ klÃ¡vesnicÃ­</label>
                </div>
            </div>
        </div>

        <div class="window" id="power" style="width: 500px; height: 450px;">
            <div class="window-title">
                <span>ğŸ”‹ Vlastnosti: MoÅ¾nosti napÃ¡jenÃ­</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('power')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>SchÃ©mata napÃ¡jenÃ­</h3>
                <div style="margin: 20px 0;">
                    <label>SchÃ©ma napÃ¡jenÃ­:</label>
                    <select style="width: 100%; padding: 5px; margin-top: 5px;">
                        <option>DomÃ¡cÃ­ nebo kancelÃ¡Å™skÃ¡ stanice</option>
                        <option>PÅ™enosnÃ½ poÄÃ­taÄ</option>
                        <option>Prezentace</option>
                        <option>MinimÃ¡lnÃ­ Ãºspora energie</option>
                        <option>MaximÃ¡lnÃ­ Ãºspora energie</option>
                    </select>
                </div>
                
                <div style="background: #f0f0f0; padding: 15px; border: 1px solid #ccc; margin: 20px 0;">
                    <h4>NastavenÃ­ pro pÅ™ipojenÃ­ k sÃ­ti:</h4>
                    <div style="margin: 10px 0;">
                        <label>Vypnout monitor:</label>
                        <select style="padding: 3px; margin-left: 10px;">
                            <option>Po 15 minutÃ¡ch</option>
                            <option>Po 30 minutÃ¡ch</option>
                            <option>Po 1 hodinÄ›</option>
                            <option>Nikdy</option>
                        </select>
                    </div>
                    <div style="margin: 10px 0;">
                        <label>Vypnout pevnÃ© disky:</label>
                        <select style="padding: 3px; margin-left: 10px;">
                            <option>Po 20 minutÃ¡ch</option>
                            <option>Po 1 hodinÄ›</option>
                            <option>Nikdy</option>
                        </select>
                    </div>
                    <div style="margin: 10px 0;">
                        <label>ReÅ¾im spÃ¡nku:</label>
                        <select style="padding: 3px; margin-left: 10px;">
                            <option>Po 30 minutÃ¡ch</option>
                            <option>Po 1 hodinÄ›</option>
                            <option>Nikdy</option>
                        </select>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <label><input type="checkbox" checked> Zobrazit ikonu v oznamovacÃ­ oblasti</label>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // --- Added helpers: system dialog + update screen ---
        function systemMessage(text) {
            const c = document.getElementById('systemDialogContent');
            if (c) c.innerHTML = text;
            if (typeof openWindow === 'function') openWindow('systemDialog');
        }

        function showUpdateScreen() {
            const loading = document.getElementById('loading-screen');
            const bios = document.getElementById('bios-screen');
            const update = document.getElementById('update-screen');
            const desktop = document.getElementById('desktop');

            if (loading) loading.style.display = 'none';
            if (bios) bios.style.display = 'none';
            if (update) update.style.display = 'block';

            setTimeout(() => {
                if (update) update.style.display = 'none';
                if (desktop) desktop.style.display = 'block';
                if (typeof playStartupSound === 'function') playStartupSound();
                if (typeof updateClock === 'function') updateClock();
                if (typeof randomizeIconPositions === 'function') randomizeIconPositions();
            }, 5000);
        }
        // --- end helpers ---
        
        function playBeep(frequency = 800, duration = 0.1, volume = 0.3) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playStartupSound() {
            // Try to play win.mp3
            const audio = new Audio('win.mp3');
            audio.volume = 0.5;
            audio.play().catch(err => {
                console.log('win.mp3 not found, using beep sounds');
                // Fallback to beep sounds if win.mp3 doesn't exist
                playBeep(523, 0.15, 0.2);
                setTimeout(() => playBeep(659, 0.15, 0.2), 150);
                setTimeout(() => playBeep(784, 0.15, 0.2), 300);
                setTimeout(() => playBeep(1047, 0.3, 0.25), 450);
            });
        }

        function playClickSound() {
            playBeep(1200, 0.05, 0.15);
        }

        function playErrorSound() {
            // Try to play error.mp3
            const audio = new Audio('error.mp3');
            audio.volume = 0.5;
            audio.play().catch(err => {
                console.log('error.mp3 not found, using beep sounds');
                // Fallback to beep sounds if error.mp3 doesn't exist
                playBeep(300, 0.1, 0.3);
                setTimeout(() => playBeep(250, 0.2, 0.3), 100);
            });
        }

        // Random error messages
        const randomErrors = [
            {
                title: "KritickÃ¡ chyba",
                message: "Aplikace pÅ™estala odpovÃ­dat.\n\nChcete ji ukonÄit?",
                icon: "âŒ",
                buttons: ["UkonÄit", "ÄŒekat", "ZruÅ¡it"]
            },
            {
                title: "Chyba pamÄ›ti",
                message: "Nedostatek pamÄ›ti pro dokonÄenÃ­ operace.\n\nUzavÅ™ete nÄ›kterÃ© aplikace a zkuste to znovu.",
                icon: "âš ï¸",
                buttons: ["OK"]
            },
            {
                title: "Disk je plnÃ½",
                message: "Na disku C:\\ nenÃ­ dostatek mÃ­sta.\n\nAktuÃ¡lnÃ­ volnÃ© mÃ­sto: 0 bajtÅ¯",
                icon: "ğŸ’¾",
                buttons: ["OK", "VyÄistit disk"]
            },
            {
                title: "ZtrÃ¡ta pÅ™ipojenÃ­",
                message: "SÃ­Å¥ovÃ© pÅ™ipojenÃ­ bylo pÅ™eruÅ¡eno.\n\nZkontrolujte sÃ­Å¥ovÃ½ kabel.",
                icon: "ğŸŒ",
                buttons: ["Znovu pÅ™ipojit", "ZruÅ¡it"]
            },
            {
                title: "NeznÃ¡mÃ© zaÅ™Ã­zenÃ­",
                message: "SystÃ©m Windows zjistil novÃ© hardwarovÃ© zaÅ™Ã­zenÃ­ a nenaÅ¡el pro nÄ›j ovladaÄ.\n\nZaÅ™Ã­zenÃ­ nemusÃ­ fungovat sprÃ¡vnÄ›.",
                icon: "ğŸ”§",
                buttons: ["Hledat ovladaÄ", "ZruÅ¡it"]
            },
            {
                title: "NelegÃ¡lnÃ­ operace",
                message: "Tento program provedl neplatnou operaci a bude ukonÄen.\n\nChyba v modulu: KERNEL32.DLL",
                icon: "ğŸš«",
                buttons: ["ZavÅ™Ã­t", "Podrobnosti"]
            },
            {
                title: "Nedostatek systÃ©movÃ½ch prostÅ™edkÅ¯",
                message: "SystÃ©mu Windows dochÃ¡zejÃ­ pamÄ›Å¥ovÃ© prostÅ™edky.\n\nUloÅ¾te si prÃ¡ci a restartujte poÄÃ­taÄ.",
                icon: "âš ï¸",
                buttons: ["OK"]
            },
            {
                title: "Chyba pÅ™i ÄtenÃ­ disku",
                message: "Nelze pÅ™eÄÃ­st z jednotky A:\\\n\nVloÅ¾te disk do jednotky a zkuste to znovu.",
                icon: "ğŸ’¾",
                buttons: ["Opakovat", "Storno"]
            },
            {
                title: "Aplikace nenalezena",
                message: "SystÃ©m Windows nemÅ¯Å¾e najÃ­t soubor 'vcr.exe'.\n\nUjistÄ›te se, Å¾e jste zadali sprÃ¡vnÃ½ nÃ¡zev.",
                icon: "â“",
                buttons: ["OK"]
            },
            {
                title: "PÅ™Ã­stup odepÅ™en",
                message: "NemÃ¡te oprÃ¡vnÄ›nÃ­ k provedenÃ­ tÃ©to operace.\n\nObraÅ¥te se na sprÃ¡vce systÃ©mu.",
                icon: "ğŸ”’",
                buttons: ["OK"]
            },
            {
                title: "Virus detekovÃ¡n!",
                message: "Norton Antivirus zjistil podezÅ™elou aktivitu!\n\nSoubor: Antivirus XP\nHrozba: VysokÃ¡\n\n(Jen Å¾ertuju, je to fake )",
                icon: "ğŸ¦ ",
                buttons: ["KarantÃ©na", "Ignorovat"]
            },
            {
                title: "Windows Update",
                message: "K dispozici jsou dÅ¯leÅ¾itÃ© aktualizace.\n\nChcete je nainstalovat teÄ? (Bude to trvat 3 hodiny)",
                icon: "ğŸ”„",
                buttons: ["Ano", "Ne", "PozdÄ›ji"]
            },
            {
                title: "Registrace Windows",
                message: "Tato kopie systÃ©mu Windows musÃ­ bÃ½t aktivovÃ¡na do 30 dnÅ¯.\n\nChcete aktivovat Windows nynÃ­?",
                icon: "ğŸ”‘",
                buttons: ["Aktivovat", "PÅ™ipomenout pozdÄ›ji"]
            },
            {
                title: "SystÃ©movÃ¡ chyba",
                message: "DoÅ¡lo k neoÄekÃ¡vanÃ© chybÄ›.\n\nKÃ³d chyby: 0x80070005\n\nDoporuÄujeme restartovat poÄÃ­taÄ.",
                icon: "ğŸ”´",
                buttons: ["Restartovat", "Ignorovat"]
            },
            {
                title: "PÅ™ipojenÃ­ tiskÃ¡rny selhalo",
                message: "TiskÃ¡rna na portu LPT1 neodpovÃ­dÃ¡.\n\nZkontrolujte, zda je tiskÃ¡rna zapnutÃ¡ a pÅ™ipojenÃ¡.",
                icon: "ğŸ–¨ï¸",
                buttons: ["OK"]
            }
        ];

        // Function to show random error dialog
        function showRandomError() {
            const error = randomErrors[Math.floor(Math.random() * randomErrors.length)];
            playErrorSound();
            
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.3);
                z-index: 100000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            const dialog = document.createElement('div');
            dialog.style.cssText = `
                background: #ECE9D8;
                border: 2px solid #0054E3;
                border-radius: 8px 8px 0 0;
                box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
                min-width: 400px;
                max-width: 500px;
            `;
            
            const titleBar = document.createElement('div');
            titleBar.style.cssText = `
                background: linear-gradient(to bottom, #0997FF 0%, #0053EE 100%);
                color: white;
                padding: 5px 10px;
                font-size: 13px;
                font-weight: bold;
                display: flex;
                justify-content: space-between;
                align-items: center;
            `;
            titleBar.innerHTML = `
                <span>${error.title}</span>
                <div style="cursor: pointer; width: 21px; height: 21px; background: linear-gradient(to bottom, #E8E5DC 0%, #C8C5BC 100%); border: 1px outset #fff; display: flex; align-items: center; justify-content: center; font-size: 10px;" onclick="this.closest('.error-overlay').remove();">âœ•</div>
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                padding: 20px;
                display: flex;
                gap: 15px;
                align-items: flex-start;
            `;
            content.innerHTML = `
                <div style="font-size: 48px; flex-shrink: 0;">${error.icon}</div>
                <div style="flex: 1;">
                    <div style="white-space: pre-line; margin-bottom: 20px;">${error.message}</div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        ${error.buttons.map(btn => `
                            <button onclick="playClickSound(); this.closest('.error-overlay').remove();" style="padding: 5px 20px; min-width: 80px;">${btn}</button>
                        `).join('')}
                    </div>
                </div>
            `;
            
            dialog.appendChild(titleBar);
            dialog.appendChild(content);
            overlay.appendChild(dialog);
            overlay.className = 'error-overlay';
            document.body.appendChild(overlay);
        }

        // Randomly show errors - GUARANTEED every 120 seconds
        function scheduleRandomError() {
            // Show error every 120 seconds (2 minutes) guaranteed
            setTimeout(() => {
                showRandomError();
                // Schedule next error
                scheduleRandomError();
            }, 120000); // Exactly 120 seconds
        }

        // Start scheduling random errors after desktop loads
        setTimeout(() => {
            scheduleRandomError();
        }, 60000); // Wait 1 minute after boot before first error

        // BSOD - Blue Screen of Death (very rare, 0.5% chance)
        function showBSOD() {
            playErrorSound();
            const bsod = document.createElement('div');
            bsod.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #0000AA;
                color: #FFFFFF;
                font-family: 'Courier New', monospace;
                padding: 40px;
                z-index: 999999;
                overflow: auto;
            `;
            bsod.innerHTML = `
                <div style="white-space: pre; font-size: 14px;">
A problem has been detected and Windows has been shut down to prevent damage
to your computer.

IRQL_NOT_LESS_OR_EQUAL

If this is the first time you've seen this Stop error screen,
restart your computer. If this screen appears again, follow
these steps:

Check to make sure any new hardware or software is properly installed.
If this is a new installation, ask your hardware or software manufacturer
for any Windows updates you might need.

If problems continue, disable or remove any newly installed hardware
or software. Disable BIOS memory options such as caching or shadowing.
If you need to use Safe Mode to remove or disable components, restart
your computer, press F8 to select Advanced Startup Options, and then
select Safe Mode.

Technical information:

*** STOP: 0x0000000A (0x00000000, 0x00000002, 0x00000000, 0x804E4E23)


***  Antivirus XP - Address 804E4E23 base at 80400000, DateStamp 3ee6c002

                </div>
                <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); text-align: center;">
                    <button onclick="location.reload()" style="background: #fff; color: #000; padding: 10px 30px; font-size: 14px; cursor: pointer; border: 2px solid #000;">Restart Computer</button>
                </div>
            `;
            document.body.appendChild(bsod);
        }

        // Extremely rare BSOD trigger
        function maybeShowBSOD() {
            // Only 0.5% chance
            if (Math.random() < 0.005) {
                setTimeout(showBSOD, Math.random() * 300000 + 300000); // Between 5-10 minutes
            }
        }

        // Schedule potential BSOD
        setTimeout(maybeShowBSOD, 300000); // Check after 5 minutes

        function playShutdownSound() {
            playBeep(1047, 0.15, 0.2);
            setTimeout(() => playBeep(784, 0.15, 0.2), 150);
            setTimeout(() => playBeep(659, 0.15, 0.2), 300);
            setTimeout(() => playBeep(523, 0.3, 0.25), 450);
        }

        // BIOS/POST sequence
        const biosMessages = [
            { text: 'Detecting RAM...', delay: 200 },
            { text: 'RAM: 256 MB OK', delay: 300 },
            { text: '', delay: 100 },
            { text: 'Primary Master  : WDC WD800BB-75JHC0', delay: 200 },
            { text: 'Primary Slave   : None', delay: 150 },
            { text: 'Secondary Master: ASUS DVD-ROM DVD-E616', delay: 200 },
            { text: 'Secondary Slave : None', delay: 150 },
            { text: '', delay: 100 },
            { text: 'Detecting IDE Drives...', delay: 300 },
            { text: 'Primary Master  : WDC WD800BB-75JHC0 ............... OK', delay: 400 },
            { text: 'Secondary Master: ASUS DVD-ROM DVD-E616 ............ OK', delay: 400 },
            { text: '', delay: 100 },
            { text: 'Detecting Floppy Drive A...', delay: 200 },
            { text: 'Drive A: 1.44MB 3.5" ................................. OK', delay: 300 },
            { text: '', delay: 100 },
            { text: 'USB Device(s): 0 Mouse, 0 Keyboard, 0 Hub, 0 Storage', delay: 250 },
            { text: '', delay: 100 },
            { text: 'Verifying DMI Pool Data...', delay: 400 },
            { text: 'DMI Data Updated Successfully', delay: 300 },
            { text: '', delay: 200 },
            { text: 'Initializing Boot Agent...', delay: 300 },
            { text: 'Boot Agent Version 4.1.18', delay: 200 },
            { text: '', delay: 100 },
            { text: 'Starting Windows...', delay: 500 },
        ];

        let biosIndex = 0;
        const biosTextElement = document.getElementById('biosText');

        function displayBiosMessage() {
            if (biosIndex < biosMessages.length) {
                const msg = biosMessages[biosIndex];
                biosTextElement.innerHTML += msg.text + '<br>';
                biosTextElement.scrollTop = biosTextElement.scrollHeight;
                
                // Beep sound for some messages
                if (msg.text.includes('OK') || msg.text.includes('Starting')) {
                    playBeep(800, 0.05, 0.1);
                }
                
                biosIndex++;
                setTimeout(displayBiosMessage, msg.delay);
            } else {
                // BIOS complete, show Windows loading
                setTimeout(() => {
                    document.getElementById('bios-screen').style.display = 'none';
                    setTimeout(simulateLoading, 100);
                }, 500);
            }
        }

        // Start BIOS sequence
        setTimeout(displayBiosMessage, 500);

        // Loading simulation - extended to 15 seconds
        let loadingProgress = 0;
        function simulateLoading() {
            loadingProgress += 1;
            document.getElementById('loadingBar').style.width = loadingProgress + '%';
            
            if (loadingProgress >= 100) {
                setTimeout(() => {
                    showUpdateScreen();
                }, 500);
            } else {
                // Slower loading - total ~10 seconds after BIOS
                setTimeout(simulateLoading, 100);
            }
        }

        // Random icon positioning
        function randomizeIconPositions() {
            const icons = document.querySelectorAll('.icon');
            const desktop = document.getElementById('desktop');
            const desktopWidth = desktop.clientWidth - 100;
            const desktopHeight = desktop.clientHeight - 150;
            
            icons.forEach((icon, index) => {
                const x = 20 + (index % 3) * 100 + Math.random() * 50;
                const y = 20 + Math.floor(index / 3) * 100 + Math.random() * 50;
                icon.style.left = Math.min(x, desktopWidth) + 'px';
                icon.style.top = Math.min(y, desktopHeight) + 'px';
            });
        }

        // Icon dragging and opening
        let draggedIcon = null;
        let iconDragOffset = { x: 0, y: 0 };
        let isDraggingIcon = false;
        let dragStartPos = { x: 0, y: 0 };
        let lastClickedIcon = null;
        let lastClickTime = 0;

        document.addEventListener('mousedown', (e) => {
            const icon = e.target.closest('.icon');
            if (icon && icon.id === 'win11Icon') return; // Win11 icon: click opens, no dragging
            if (icon && !e.target.closest('.window')) {
                draggedIcon = icon;
                const rect = icon.getBoundingClientRect();
                iconDragOffset.x = e.clientX - rect.left;
                iconDragOffset.y = e.clientY - rect.top;
                dragStartPos = { x: e.clientX, y: e.clientY };
                isDraggingIcon = false;
                
                // Select icon
                document.querySelectorAll('.icon').forEach(i => i.classList.remove('selected'));
                icon.classList.add('selected');
                selectedIcon = icon;
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (draggedIcon) {
                const distance = Math.sqrt(
                    Math.pow(e.clientX - dragStartPos.x, 2) + 
                    Math.pow(e.clientY - dragStartPos.y, 2)
                );
                
                // Only start dragging if moved more than 5 pixels
                if (distance > 5) {
                    isDraggingIcon = true;
                    draggedIcon.classList.add('dragging');
                    
                    const x = e.clientX - iconDragOffset.x;
                    const y = e.clientY - iconDragOffset.y;
                    
                    const maxX = window.innerWidth - 80;
                    const maxY = window.innerHeight - 120;
                    
                    draggedIcon.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
                    draggedIcon.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
                    
                    e.preventDefault();
                }
            }
        });

        document.addEventListener('mouseup', (e) => {
            if (draggedIcon) {
                draggedIcon.classList.remove('dragging');
                // Final clamp so icons never end up out of bounds
                const rect = draggedIcon.getBoundingClientRect();
                const maxX = window.innerWidth - rect.width;
                const maxY = window.innerHeight - rect.height - 40;
                const clampedX = Math.max(0, Math.min(rect.left, maxX));
                const clampedY = Math.max(0, Math.min(rect.top, maxY));
                draggedIcon.style.left = clampedX + 'px';
                draggedIcon.style.top = clampedY + 'px';
                
                // If we didn't drag, handle click/double-click
                if (!isDraggingIcon) {
                    const currentTime = Date.now();
                    const timeSinceLastClick = currentTime - lastClickTime;
                    
                    // Double-click detection (within 500ms)
                    if (lastClickedIcon === draggedIcon && timeSinceLastClick < 500) {
                        // Double click - open icon
                        openIconById(draggedIcon);
                        lastClickedIcon = null;
                        lastClickTime = 0;
                    } else {
                        // Single click - just select
                        lastClickedIcon = draggedIcon;
                        lastClickTime = currentTime;
                    }
                }
                
                draggedIcon = null;
                isDraggingIcon = false;
            }
        });

        // Helper function to open icon
        function openIconById(icon) {
            if (!icon) return;
            
            playClickSound();
            const iconId = icon.getAttribute('data-icon-id');
            
            if (iconId === 'gopnik') {
                window.open('gopnik/loading.html', '_blank');
            } else if (iconId === 'pacman') {
                window.open('login.html', '_blank');
            } else if (iconId) {
                openWindow(iconId);
            }
        }

        // Context menu handling
        let currentContextMenu = null;
        let selectedIcon = null;

        // Desktop context menu
        document.getElementById('desktop').addEventListener('contextmenu', (e) => {
            if (e.target.closest('.window') || e.target.closest('.taskbar')) return;
            
            e.preventDefault();
            hideAllContextMenus();
            
            const icon = e.target.closest('.icon');
            if (icon) {
                selectedIcon = icon;
                icon.classList.add('selected');
                showContextMenu('iconContextMenu', e.clientX, e.clientY);
            } else {
                showContextMenu('desktopContextMenu', e.clientX, e.clientY);
            }
        });

        function showContextMenu(menuId, x, y) {
            const menu = document.getElementById(menuId);
            menu.style.display = 'block';
            menu.style.left = x + 'px';
            menu.style.top = y + 'px';
            currentContextMenu = menu;
            playClickSound();
        }

        function hideAllContextMenus() {
            document.querySelectorAll('.context-menu').forEach(menu => {
                menu.style.display = 'none';
            });
            document.querySelectorAll('.icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            currentContextMenu = null;
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.context-menu')) {
                hideAllContextMenus();
            }
        });

        // Context menu functions
        function openSelectedIcon() {
            if (selectedIcon) {
                openIconById(selectedIcon);
            }
            hideAllContextMenus();
        }

        function deleteToRecycleBin() {
            if (selectedIcon) {
                // Random error chance (10%)
                if (Math.random() < 0.1) {
                    showRandomError();
                    hideAllContextMenus();
                    return;
                }
                
                playErrorSound();
                const iconName = selectedIcon.querySelector('.icon-label').textContent;
                selectedIcon.style.transition = 'all 0.3s';
                selectedIcon.style.opacity = '0';
                selectedIcon.style.transform = 'scale(0.5)';
                
                setTimeout(() => {
                    systemMessage(`"${iconName}" byl pÅ™esunut do koÅ¡e! ğŸ—‘ï¸`);
                    selectedIcon.style.display = 'none';
                    selectedIcon.style.transition = '';
                    selectedIcon.style.opacity = '';
                    selectedIcon.style.transform = '';
                }, 300);
            }
            hideAllContextMenus();
        }

        function arrangeIcons() {
            playClickSound();
            const icons = document.querySelectorAll('.icon');
            const spacing = 100;
            const startX = 20;
            const startY = 20;
            
            icons.forEach((icon, index) => {
                if (icon.style.display !== 'none') {
                    const col = index % 8;
                    const row = Math.floor(index / 8);
                    icon.style.transition = 'all 0.5s';
                    icon.style.left = (startX + col * spacing) + 'px';
                    icon.style.top = (startY + row * spacing) + 'px';
                    
                    setTimeout(() => {
                        icon.style.transition = '';
                    }, 500);
                }
            });
            hideAllContextMenus();
        }

        function desktopRefresh() {
            playClickSound();
            document.getElementById('desktop').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('desktop').style.opacity = '1';
            }, 100);
            hideAllContextMenus();
        }

        function createNewFile() {
            playClickSound();
            const newIcon = document.createElement('div');
            newIcon.className = 'icon';
            newIcon.setAttribute('data-icon-id', 'notepad');
            newIcon.innerHTML = `
                <div class="icon-img">ğŸ“„</div>
                <div class="icon-label">NovÃ½ dokument.txt</div>
            `;
            newIcon.style.left = '300px';
            newIcon.style.top = '300px';
            
            document.getElementById('desktopIcons').appendChild(newIcon);
            systemMessage('NovÃ½ soubor vytvoÅ™en! ğŸ“„');
            hideAllContextMenus();
        }

        // Selection box
        let isSelecting = false;
        let selectionStart = { x: 0, y: 0 };
        const selectionBox = document.getElementById('selectionBox');

        document.getElementById('desktop').addEventListener('mousedown', (e) => {
            if (e.target.id === 'desktop' || e.target.closest('.desktop-icons')) {
                if (!e.target.closest('.icon') && !e.target.closest('.window')) {
                    isSelecting = true;
                    selectionStart = { x: e.clientX, y: e.clientY };
                    selectionBox.style.left = e.clientX + 'px';
                    selectionBox.style.top = e.clientY + 'px';
                    selectionBox.style.width = '0px';
                    selectionBox.style.height = '0px';
                    selectionBox.style.display = 'block';
                }
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isSelecting) {
                const width = Math.abs(e.clientX - selectionStart.x);
                const height = Math.abs(e.clientY - selectionStart.y);
                const left = Math.min(e.clientX, selectionStart.x);
                const top = Math.min(e.clientY, selectionStart.y);
                
                selectionBox.style.left = left + 'px';
                selectionBox.style.top = top + 'px';
                selectionBox.style.width = width + 'px';
                selectionBox.style.height = height + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isSelecting) {
                isSelecting = false;
                selectionBox.style.display = 'none';
            }
        });

        // Clock
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('clock').textContent = `${hours}:${minutes}`;
            setTimeout(updateClock, 1000);
        }

        // Window management
        let activeWindows = [];
        let windowPositions = {};
        let zIndexCounter = 100;

        function createTaskbarItem(id, title) {
            const taskbarItems = document.getElementById('taskbarItems');
            let item = document.getElementById('taskbar-' + id);
            
            if (!item) {
                item = document.createElement('div');
                item.className = 'taskbar-item';
                item.id = 'taskbar-' + id;
                item.innerHTML = title;
                item.onclick = function() {
                    const win = document.getElementById(id);
                    if (win.style.display === 'none') {
                        win.style.display = 'block';
                        win.classList.add('maximizing');
                        setTimeout(() => win.classList.remove('maximizing'), 300);
                    }
                    focusWindow(id);
                };
                taskbarItems.appendChild(item);
            }
            
            return item;
        }

        function removeTaskbarItem(id) {
            const item = document.getElementById('taskbar-' + id);
            if (item) {
                item.remove();
            }
        }

        function focusWindow(id) {
            // Remove active class from all windows
            document.querySelectorAll('.window').forEach(w => {
                w.classList.remove('active');
                w.querySelector('.window-title').classList.add('inactive');
            });
            
            // Remove active class from all taskbar items
            document.querySelectorAll('.taskbar-item').forEach(t => {
                t.classList.remove('active');
            });
            
            // Add active class to selected window
            const win = document.getElementById(id);
            win.classList.add('active');
            win.querySelector('.window-title').classList.remove('inactive');
            win.style.zIndex = ++zIndexCounter;
            
            // Add active class to taskbar item
            const taskbarItem = document.getElementById('taskbar-' + id);
            if (taskbarItem) {
                taskbarItem.classList.add('active');
            }
        }

        // Start menu
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            playClickSound();
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        // Close start menu when clicking outside
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('startMenu');
            const startBtn = document.querySelector('.start-button');
            if (!menu.contains(e.target) && !startBtn.contains(e.target)) {
                menu.style.display = 'none';
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+C - Copy
            if (e.ctrlKey && e.key === 'c') {
                playClickSound();
                if (selectedIcon) {
                    systemMessage('ğŸ“‹ ZkopÃ­rovÃ¡no do schrÃ¡nky!');
                }
            }
            // Ctrl+V - Paste
            if (e.ctrlKey && e.key === 'v') {
                playClickSound();
                systemMessage('ğŸ“‹ VloÅ¾eno ze schrÃ¡nky! (asi)');
            }
            // Delete - Delete to recycle bin
            if (e.key === 'Delete') {
                if (selectedIcon) {
                    deleteToRecycleBin();
                }
            }
            // F5 - Refresh
            if (e.key === 'F5') {
                e.preventDefault();
                desktopRefresh();
            }
            // Alt+F4 - Close active window
            if (e.altKey && e.key === 'F4') {
                e.preventDefault();
                const activeWindow = document.querySelector('.window.active');
                if (activeWindow) {
                    closeWindow(activeWindow.id);
                }
            }
            // Ctrl+Shift+Esc - Task Manager
            if (e.ctrlKey && e.shiftKey && e.key === 'Escape') {
                e.preventDefault();
                openWindow('taskManager');
            }
            // Ctrl+Alt+Delete - Security screen
            if (e.ctrlKey && e.altKey && e.key === 'Delete') {
                e.preventDefault();
                showSecurityScreen();
            }
            // Windows+R - Run dialog
            if ((e.metaKey || e.key === 'Meta') && e.key === 'r') {
                e.preventDefault();
                openWindow('runDialog');
            }
            // Windows key - Toggle start menu
            if (e.key === 'Meta' || e.key === 'OS') {
                e.preventDefault();
                toggleStartMenu();
            }
        });

        // Task Manager functions
        function taskManagerRefresh() {
    const cpu = document.getElementById('cpuUsage');
    const rows = document.querySelectorAll('#taskTableBody tr');
    // randomize cpu + memory like XP
    const cpuVal = Math.floor(Math.random()*60)+10;
    if (cpu) cpu.textContent = cpuVal + '%';
    rows.forEach((tr, i)=>{
        const tds = tr.querySelectorAll('td');
        if (tds.length >= 4 && i>0){
            tds[2].textContent = Math.floor(Math.random()*50) + '%';
            tds[3].textContent = (Math.floor(Math.random()*900000)+5000).toLocaleString('cs-CZ') + ' KB';
        }
    });
    systemMessage('SprÃ¡vce Ãºloh: data aktualizovÃ¡na.');
}

        function openWindows11File(){
            window.location.href = 'win11.html';
        }

        // Win11 icon should open win11.html on single click without moving
        window.addEventListener('DOMContentLoaded', () => {
            const w11 = document.getElementById('win11Icon');
            if (!w11) return;

            // show it if it was hidden
            if (getComputedStyle(w11).display === 'none') w11.style.display = 'block';

            // stop desktop drag/select handlers from grabbing it
            ['mousedown','mouseup','mousemove','contextmenu'].forEach(evt => {
                w11.addEventListener(evt, (e) => { e.stopPropagation(); }, { capture: true });
            });

            w11.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                openWindows11File();
            });
        });

        </script>

<script>
        // --- Shutdown (added) ---
        function shutdown(){
            openWindow('shutdownDialog');
        }
        function doShutdown(){
            const sel = document.getElementById('shutdownSelect');
            const v = sel ? sel.value : 'shutdown';
            closeWindow('shutdownDialog');

            if (v === 'restart'){
                if (typeof restartWindows === 'function') restartWindows();
                return;
            }
            if (v === 'logoff'){
                // simulate logoff: hide desktop and show loading then desktop
                const desktop = document.getElementById('desktop');
                const loading = document.getElementById('loading-screen');
                if (desktop) desktop.style.display = 'none';
                if (loading) loading.style.display = 'block';
                setTimeout(()=>{ if (loading) loading.style.display = 'none'; if (desktop) desktop.style.display = 'block'; }, 2000);
                return;
            }
            if (v === 'standby'){
                const desktop = document.getElementById('desktop');
                if (desktop) {
                    desktop.style.filter = 'brightness(0.25)';
                    setTimeout(()=>{ desktop.style.filter = ''; }, 2000);
                }
                return;
            }
            // shutdown: show black
            const desk = document.getElementById('desktop');
            if (desk) desk.style.display = 'none';
            document.body.style.background = '#000';
            systemMessage('PoÄÃ­taÄ byl vypnut.');
        }
        // --- end shutdown ---


        // --- Wallpaper (added) ---
        const WALL_KEY = 'xp_wallpaper_v1';
        function wallpaperValue(kind){
            if (kind === 'bliss') return "url('https://upload.wikimedia.org/wikipedia/en/2/27/Bliss_%28Windows_XP%29.png')";
            if (kind === 'solidblue') return "linear-gradient(#2a62c9, #1b3f87)";
            if (kind === 'solidgreen') return "linear-gradient(#2f8a3a, #1e5d27)";
            if (kind === 'solidblack') return "linear-gradient(#000, #111)";
            if (kind === 'gradient') return "linear-gradient(135deg, #5A8BB4 0%, #3A6EA5 50%, #5A8BB4 100%)";
            return "linear-gradient(#000,#000)";
        }
        function previewWallpaper(){
            const sel = document.getElementById('wallpaperSelect');
            const prev = document.getElementById('dpPreview');
            if (!sel || !prev) return;
            prev.style.backgroundImage = wallpaperValue(sel.value);
            prev.style.backgroundSize = 'cover';
            prev.style.backgroundPosition = 'center';
        }
        function applyWallpaper(){
            const sel = document.getElementById('wallpaperSelect');
            const desk = document.getElementById('desktop');
            if (!sel || !desk) return;
            localStorage.setItem(WALL_KEY, sel.value);
            const val = wallpaperValue(sel.value);
            desk.style.backgroundImage = val + ", linear-gradient(rgba(58, 110, 165, 0.2), rgba(58, 110, 165, 0.2))";
            desk.style.backgroundSize = 'cover';
            desk.style.backgroundPosition = 'center';
            systemMessage('PozadÃ­ plochy bylo zmÄ›nÄ›no.');
        }
        window.addEventListener('load', ()=>{
            const kind = localStorage.getItem(WALL_KEY) || 'bliss';
            const desk = document.getElementById('desktop');
            const sel = document.getElementById('wallpaperSelect');
            if (sel) sel.value = kind;
            const val = wallpaperValue(kind);
            if (desk) {
                desk.style.backgroundImage = val + ", linear-gradient(rgba(58, 110, 165, 0.2), rgba(58, 110, 165, 0.2))";
                desk.style.backgroundSize = 'cover';
                desk.style.backgroundPosition = 'center';
            }
            setTimeout(previewWallpaper, 50);
        });
        // --- end wallpaper ---


        // --- Dragging windows by title bar (added) ---
        function makeWindowDraggable(win){
            const title = win.querySelector('.window-title');
            if (!title) return;
            let dragging = false, offsetX = 0, offsetY = 0;
            title.addEventListener('mousedown', (e)=>{
                if (e.target.classList.contains('window-button')) return;
                dragging = true;
                const r = win.getBoundingClientRect();
                offsetX = e.clientX - r.left;
                offsetY = e.clientY - r.top;
                setActiveWindow(win);
                e.preventDefault();
            });
            document.addEventListener('mousemove', (e)=>{
                if (!dragging) return;
                win.style.left = Math.max(0, e.clientX - offsetX) + 'px';
                win.style.top  = Math.max(0, e.clientY - offsetY) + 'px';
            });
            document.addEventListener('mouseup', ()=>{ dragging = false; });
        }
        window.addEventListener('load', ()=>{
            document.querySelectorAll('.window').forEach(makeWindowDraggable);
        });
        // --- end dragging ---


        // --- Error popup spam (added) ---
        function spawnErrorPopup(message){
            // clone template
            const tpl = document.getElementById('errorPopupTemplate');
            if (!tpl) return;
            const w = tpl.cloneNode(true);
            w.id = 'err_' + Math.random().toString(16).slice(2);
            w.style.display = 'block';
            w.style.left = Math.floor(Math.random() * (window.innerWidth - 380)) + 'px';
            w.style.top = Math.floor(Math.random() * (window.innerHeight - 220 - 40)) + 'px';
            const txt = w.querySelector('#errorPopupText');
            if (txt) txt.id = w.id + '_text';
            document.body.appendChild(w);
            const txt2 = document.getElementById(w.id + '_text');
            if (txt2) txt2.textContent = message;

            // auto-close after a bit to avoid infinite buildup
            setTimeout(()=>{ if (w && w.parentNode) w.remove(); }, 5000);
        }
        // --- end error popup spam ---


        // --- BSOD + reboot (added) ---
        function triggerBSODAndReboot(){
            // hide everything except BSOD
            document.querySelectorAll('.window').forEach(w => w.style.display = 'none');
            const startMenu = document.getElementById('startMenu');
            if (startMenu) startMenu.style.display = 'none';

            const desktop = document.getElementById('desktop');
            if (desktop) desktop.style.display = 'none';

            const update = document.getElementById('update-screen');
            if (update) update.style.display = 'none';

            const loading = document.getElementById('loading-screen');
            if (loading) loading.style.display = 'none';

            const bios = document.getElementById('bios-screen');
            if (bios) bios.style.display = 'none';

            const bsod = document.getElementById('bsod-screen');
            if (bsod) bsod.style.display = 'block';

            setTimeout(() => {
                if (bsod) bsod.style.display = 'none';
                restartWindows();
            }, 3000);
        }

        function restartWindows(){
            // Re-run boot: BIOS -> loading -> update -> desktop
            const bios = document.getElementById('bios-screen');
            const biosText = document.getElementById('biosText');
            const loading = document.getElementById('loading-screen');
            const loadingBar = document.getElementById('loadingBar');
            const desktop = document.getElementById('desktop');
            const update = document.getElementById('update-screen');

            // hide all windows
            document.querySelectorAll('.window').forEach(w => w.style.display = 'none');
            const startMenu = document.getElementById('startMenu');
            if (startMenu) startMenu.style.display = 'none';

            if (desktop) desktop.style.display = 'none';
            if (update) update.style.display = 'none';
            if (loading) loading.style.display = 'block';

            if (bios) bios.style.display = 'block';
            if (biosText) biosText.innerHTML = '';

            if (loadingBar) loadingBar.style.width = '0%';

            // If original boot variables exist, reset them
            if (typeof loadingProgress !== 'undefined') loadingProgress = 0;
            if (typeof biosIndex !== 'undefined') biosIndex = 0;

            // Kick BIOS typing if function exists, otherwise just jump to update screen
            if (typeof displayBiosMessage === 'function') {
                setTimeout(displayBiosMessage, 200);
            } else if (typeof showUpdateScreen === 'function') {
                setTimeout(showUpdateScreen, 600);
            } else {
                // fallback: show desktop
                if (loading) loading.style.display = 'none';
                if (desktop) desktop.style.display = 'block';
            }
        }
        // --- end BSOD + reboot ---


        // --- Window manager (added) ---
        let topZ = 300;

        function getWindowEl(id) {
            return document.getElementById(id) || document.getElementById(id + 'Win');
        }

        function setActiveWindow(win) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
            if (win) {
                win.classList.add('active');
                win.style.zIndex = String(++topZ);
            }
        }

        function ensureTaskbarItem(windowId, titleText) {
            const bar = document.getElementById('taskbarItems');
            if (!bar) return;
            let item = bar.querySelector(`.taskbar-item[data-window-id="${windowId}"]`);
            if (!item) {
                item = document.createElement('div');
                item.className = 'taskbar-item active';
                item.dataset.windowId = windowId;
                item.innerHTML = `<span>ğŸ—”</span><span style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${titleText}</span>`;
                item.onclick = () => {
                    const w = getWindowEl(windowId);
                    if (!w) return;
                    if (w.style.display === 'none') {
                        openWindow(windowId);
                    } else {
                        minimizeWindow(windowId);
                    }
                };
                bar.appendChild(item);
            }
            bar.querySelectorAll('.taskbar-item').forEach(x => x.classList.remove('active'));
            item.classList.add('active');
        }

        function updateTaskbarActive(windowId) {
            const bar = document.getElementById('taskbarItems');
            if (!bar) return;
            bar.querySelectorAll('.taskbar-item').forEach(x => x.classList.remove('active'));
            const item = bar.querySelector(`.taskbar-item[data-window-id="${windowId}"]`);
            if (item) item.classList.add('active');
        }

        function removeTaskbarItem(windowId) {
            const bar = document.getElementById('taskbarItems');
            if (!bar) return;
            const item = bar.querySelector(`.taskbar-item[data-window-id="${windowId}"]`);
            if (item) item.remove();
        }

        function openWindow(id) {

            const win = getWindowEl(id);
            if (!win) {
                systemMessage('Okno nenalezeno: ' + escapeHtml(id));
                return;
            }
            win.style.display = 'block';
            win.classList.remove('minimizing');
            win.classList.add('maximizing');
            setTimeout(() => win.classList.remove('maximizing'), 350);

            // Title
            const titleSpan = win.querySelector('.window-title span');
            const titleText = titleSpan ? titleSpan.textContent.trim() : id;

            ensureTaskbarItem(id, titleText);
            setActiveWindow(win);
            // Auto-run virus.exe sequence immediately
            if (id === 'virusExeWin' && typeof openVirusExe === 'function') {
                setTimeout(openVirusExe, 50);
            }
        }

        function closeWindow(id) {
            const win = getWindowEl(id);
            if (!win) return;
            win.style.display = 'none';
            removeTaskbarItem(id);
        }

        function minimizeWindow(id) {
            const win = getWindowEl(id);
            if (!win) return;
            win.classList.add('minimizing');
            setTimeout(() => {
                win.style.display = 'none';
                win.classList.remove('minimizing');
            }, 300);
        }

        function maximizeWindow(id) {
            const win = getWindowEl(id);
            if (!win) return;
            // toggle between normal and full
            if (win.dataset.maximized === '1') {
                win.style.left = (win.dataset.prevLeft || '100px');
                win.style.top = (win.dataset.prevTop || '100px');
                win.style.width = (win.dataset.prevW || '500px');
                win.style.height = (win.dataset.prevH || '350px');
                win.dataset.maximized = '0';
            } else {
                const r = win.getBoundingClientRect();
                win.dataset.prevLeft = win.style.left || (r.left + 'px');
                win.dataset.prevTop = win.style.top || (r.top + 'px');
                win.dataset.prevW = win.style.width || (r.width + 'px');
                win.dataset.prevH = win.style.height || (r.height + 'px');
                win.style.left = '0px';
                win.style.top = '0px';
                win.style.width = '100vw';
                win.style.height = 'calc(100vh - 40px)';
                win.dataset.maximized = '1';
            }
            setActiveWindow(win);
            updateTaskbarActive(id);
        }

        // Bring to front on click
        document.addEventListener('mousedown', (e) => {
            const win = e.target.closest && e.target.closest('.window');
            if (win) setActiveWindow(win);
        });
        // --- end window manager ---


function escapeHtml(s){return String(s).replace(/[&<>"']/g,(c)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c]));}
let virusInterval = null;



function startAntivirusScan(){
    let bar = document.getElementById("avBar");
    let p = 0;
    let scan = setInterval(()=>{
        p+=5;
        bar.style.width = p+"%";
        if(p>=100){
            clearInterval(scan);
            if(virusInterval){
                clearInterval(virusInterval);
                virusInterval=null;
            }
            systemMessage("Hrozby odstranÄ›ny âœ”");
        }
    },300);
}


        // --- virus.exe sequence (added/override) ---
        function openVirusExe(){
            // show CMD and start "attack" immediately
            openWindow('cmd');

            const out = document.getElementById('cmdOutput');
            if (!out) return;

            out.innerHTML = "Windows 9000 [Verze 5.1.2600]<br>(C) Copyright 1985-2001 Microsoft Corp.<br><br>C:\\Documents and Settings\\User&gt;";

            const lines = [
                "cd C:\\Windows\\System32",
                "taskkill /f /im explorer.exe",
                "net stop \"Security Center\"",
                "net stop \"Windows Firewall/Internet Connection Sharing (ICS)\"",
                "del /q /f C:\\Windows\\Temp\\*.tmp",
                "echo injecting...",
                "echo patching kernel...",
                "echo done."
            ];

            let i = 0;
            const start = Date.now();

            function appendCmd(line){
                out.innerHTML += "<br>" + escapeHtml(line);
                out.innerHTML += "<br>C:\\Documents and Settings\\User&gt;";
                out.scrollTop = out.scrollHeight;
            }

            // error popups during the run
            const popupMsgs = [
                "Aplikace nemÅ¯Å¾e pokraÄovat: 0xC0000005",
                "SluÅ¾ba nebyla nalezena.",
                "PÅ™Ã­stup odepÅ™en.",
                "SystÃ©movÃ¡ chyba: neoÄekÃ¡vanÃ½ stav.",
                "Chyba modulu: KERNEL32.DLL",
                "Chyba ovladaÄe: VIDEO_TDR_FAILURE"
            ];
            const popInt = setInterval(()=>{
                spawnErrorPopup(popupMsgs[Math.floor(Math.random()*popupMsgs.length)]);
            }, 650);

            const typer = setInterval(()=>{
                if (i < lines.length){
                    appendCmd(lines[i]);
                    i++;
                }
                if (Date.now() - start >= 10000){
                    clearInterval(typer);
                    clearInterval(popInt);
                    triggerBSODAndReboot();
                }
            }, 800);
        }
        // --- end virus.exe sequence ---


        // --- Run dialog + Recycle Bin + Rename/Delete (added) ---
        const BIN_KEY = 'xp_bin_v1';
        let binSelectedId = null;

        function getBin(){
            try { return JSON.parse(localStorage.getItem(BIN_KEY) || '[]'); } catch { return []; }
        }
        function setBin(items){
            localStorage.setItem(BIN_KEY, JSON.stringify(items));
        }

        function nowStr(){
            const d = new Date();
            return d.toLocaleString('cs-CZ');
        }

        function renderBin(){
            const body = document.getElementById('binTableBody');
            const countLabel = document.getElementById('binCountLabel');
            const status = document.getElementById('binStatus');
            if (!body) return;

            const items = getBin();
            body.innerHTML = '';
            items.forEach(it => {
                const tr = document.createElement('tr');
                tr.style.border = '1px solid #888';
                tr.style.cursor = 'default';
                tr.dataset.id = it.id;
                tr.innerHTML = `
                    <td style="padding:6px; border:1px solid #888;">${escapeHtml(it.name)}</td>
                    <td style="padding:6px; border:1px solid #888;">Plocha</td>
                    <td style="padding:6px; border:1px solid #888;">${escapeHtml(it.deletedAt)}</td>
                `;
                tr.onclick = () => {
                    body.querySelectorAll('tr').forEach(x => x.style.background = '');
                    tr.style.background = '#B6D6FB';
                    binSelectedId = it.id;
                    if (status) status.textContent = 'VybrÃ¡no: ' + it.name;
                };
                tr.ondblclick = () => { binSelectedId = it.id; binRestoreSelected(); };
                body.appendChild(tr);
            });

            if (countLabel) countLabel.textContent = items.length + ' poloÅ¾ek';
            if (status) status.textContent = 'PÅ™ipraven';
        }

        function binRestoreSelected(){
            const items = getBin();
            if (!binSelectedId){
                systemMessage('Vyber poloÅ¾ku pro obnovenÃ­.');
                return;
            }
            const idx = items.findIndex(x => x.id === binSelectedId);
            if (idx === -1) return;
            const it = items.splice(idx, 1)[0];
            setBin(items);

            // restore icon
            const icon = document.createElement('div');
            icon.className = 'icon';
            icon.setAttribute('data-icon-id', it.iconId);
            icon.title = it.name;
            icon.style.left = (it.left || 80) + 'px';
            icon.style.top  = (it.top || 80) + 'px';
            icon.innerHTML = `<div class="icon-image">${it.emoji || 'ğŸ“„'}</div><div class="icon-label">${escapeHtml(it.name)}</div>`;
            const desk = document.querySelector('.desktop-icons');
            if (desk) desk.appendChild(icon);

            // rebind icon handlers (reuse existing listeners if present)
            if (typeof setupIconInteractions === 'function') setupIconInteractions(icon);

            binSelectedId = null;
            renderBin();
        }

        function binEmpty(){
            setBin([]);
            binSelectedId = null;
            renderBin();
            systemMessage('KoÅ¡ byl vyprÃ¡zdnÄ›n.');
        }

        function deleteSelectedIcon(){
            if (!window.selectedIcon) return;
            const icon = window.selectedIcon;
            const iconId = icon.getAttribute('data-icon-id') || 'file';
            if (iconId === 'recycleBin') {
                systemMessage('KoÅ¡ nelze odstranit.');
                return;
            }
            const nameEl = icon.querySelector('.icon-label');
            const name = nameEl ? nameEl.textContent.trim() : 'PoloÅ¾ka';
            const emojiEl = icon.querySelector('.icon-image');
            const emoji = emojiEl ? emojiEl.textContent.trim() : 'ğŸ“„';
            const rect = icon.getBoundingClientRect();

            // move to bin storage
            const items = getBin();
            items.push({
                id: 'bin_' + Math.random().toString(16).slice(2),
                iconId,
                name,
                emoji,
                left: rect.left,
                top: rect.top,
                deletedAt: nowStr()
            });
            setBin(items);

            // remove from desktop
            icon.remove();
            window.selectedIcon = null;
        }

        function renameSelectedIcon(){
            if (!window.selectedIcon) return;
            const icon = window.selectedIcon;
            const nameEl = icon.querySelector('.icon-label');
            if (!nameEl) return;
            const current = nameEl.textContent.trim();
            const next = prompt('Zadej novÃ½ nÃ¡zev:', current);
            if (next && next.trim()){
                nameEl.textContent = next.trim();
                icon.title = next.trim();
            }
        }

        function runDialog(){
            openWindow('runDialog');
            const inp = document.getElementById('runInput');
            if (inp) { inp.focus(); inp.select(); }
        }

        function runExecute(){
            const inp = document.getElementById('runInput');
            const v = (inp && inp.value || '').trim().toLowerCase();
            closeWindow('runDialog');

            if (!v) return;

            if (v === 'cmd') { openWindow('cmd'); return; }
            if (v === 'notepad') { openWindow('notepad'); return; }
            if (v === 'iexplore' || v === 'ie') { openWindow('ie'); return; }
            if (v === 'taskmgr') { openWindow('taskManager'); return; }
            if (v === 'control' || v === 'desk.cpl') { openWindow('displayProps'); return; }
            if (v === 'shutdown') { shutdown(); return; }

            systemMessage('SystÃ©m Windows nemÅ¯Å¾e nalÃ©zt: ' + v);
        }

        // Keyboard: Win+R and Delete
        document.addEventListener('keydown', (e)=>{
            if (e.key === 'Delete') {
                deleteSelectedIcon();
            }
            if ((e.key === 'r' || e.key === 'R') && e.metaKey) {
                // ignore on mac
            }
            if ((e.key === 'r' || e.key === 'R') && e.altKey) {
                // ignore
            }
            if ((e.key === 'r' || e.key === 'R') && e.ctrlKey) {
                // ignore
            }
            // Win+R: some browsers report as Meta; we also allow Ctrl+Alt+R as fallback
            if ((e.key === 'r' || e.key === 'R') && (e.metaKey || (e.ctrlKey && e.altKey))) {
                e.preventDefault();
                runDialog();
            }
        });

        // Enhance icon context menu: add Rename/Delete if menu exists
        window.addEventListener('load', ()=>{
            const menu = document.getElementById('iconContextMenu');
            if (menu && !menu.dataset.enhanced){
                const sep = document.createElement('div');
                sep.className = 'context-menu-separator';
                const ren = document.createElement('div');
                ren.className = 'context-menu-item';
                ren.innerHTML = '<span class="icon-left">âœï¸</span>PÅ™ejmenovat';
                ren.onclick = ()=>{ playClickSound(); renameSelectedIcon(); menu.style.display='none'; };
                const del = document.createElement('div');
                del.className = 'context-menu-item';
                del.innerHTML = '<span class="icon-left">ğŸ—‘ï¸</span>Odstranit';
                del.onclick = ()=>{ playClickSound(); deleteSelectedIcon(); menu.style.display='none'; };

                menu.appendChild(sep);
                menu.appendChild(ren);
                menu.appendChild(del);
                menu.dataset.enhanced = '1';
            }
        });

        // Hook: if your code has a per-icon setup function, expose a minimal one
        function setupIconInteractions(icon){
            // basic select + dblclick open
            icon.addEventListener('click', (e)=>{
                document.querySelectorAll('.icon').forEach(i=>i.classList.remove('selected'));
                icon.classList.add('selected');
                window.selectedIcon = icon;
                e.stopPropagation();
            });
            icon.addEventListener('dblclick', (e)=>{
                const id = icon.getAttribute('data-icon-id');
                openIconById(icon);
                e.stopPropagation();
            });
        }
        // --- end additions ---


        // --- More XP features (added) ---
        // Toast balloon near tray
        function showToast(text, ms=3500){
            const t = document.getElementById('xpToast');
            if (!t) return;
            t.innerHTML = text;
            t.style.display = 'block';
            setTimeout(()=>{ t.style.display='none'; }, ms);
        }

        // System sounds toggle
        let soundsEnabled = true;
        function toggleSounds(){
            soundsEnabled = !soundsEnabled;
            showToast(soundsEnabled ? 'ğŸ”Š Zvuky zapnuty' : 'ğŸ”‡ Zvuky vypnuty');
        }
        // wrap playClickSound if exists
        const __origPlayClickSound = (typeof playClickSound === 'function') ? playClickSound : null;
        window.playClickSound = function(){
            if (!soundsEnabled) return;
            if (__origPlayClickSound) __origPlayClickSound();
        };

        // Calculator
        let calcBuf = '0';
        let calcA = null;
        let calcOpSym = null;
        function calcRender(){
            const d = document.getElementById('calcDisplay');
            if (d) d.textContent = calcBuf;
        }
        function calcPress(ch){
            if (calcBuf === '0') calcBuf = ch;
            else calcBuf += ch;
            calcRender();
        }
        function calcClear(){
            calcBuf = '0';
            calcA = null;
            calcOpSym = null;
            calcRender();
        }
        function calcOp(op){
            calcA = Number(calcBuf);
            calcBuf = '0';
            calcOpSym = op;
            calcRender();
        }
        function calcEq(){
            if (calcA === null || !calcOpSym) return;
            const b = Number(calcBuf);
            let r = 0;
            if (calcOpSym === '+') r = calcA + b;
            if (calcOpSym === '-') r = calcA - b;
            if (calcOpSym === '*') r = calcA * b;
            if (calcOpSym === '/') r = (b === 0) ? NaN : (calcA / b);
            calcBuf = String(r);
            calcA = null;
            calcOpSym = null;
            calcRender();
        }

        // Explorer (My Computer)
        let explStack = ['computer'];
        function explSetPath(label){
            const p = document.getElementById('explPath');
            if (p) p.value = label;
        }
        function explOpen(which){
            explStack.push(which);
            explRender(which);
        }
        function explRender(which){
            const v = document.getElementById('explView');
            const st = document.getElementById('explStatus');
            if (!v) return;

            if (which === 'computer'){
                explSetPath('Tento poÄÃ­taÄ');
                v.innerHTML = `
                    <h3 style="margin-top:0;">DiskovÃ© jednotky</h3>
                    <div class="explorer-grid">
                        <div class="drive" onclick="explOpen('c')">ğŸ’½ MÃ­stnÃ­ disk (C:)<div class="bar"><div></div></div><div style="font-size:11px;color:#444;margin-top:4px;">VolnÃ©: 12.3 GB</div></div>
                        <div class="drive" onclick="explOpen('d')">ğŸ“€ Jednotka CD (D:)<div style="font-size:11px;color:#444;margin-top:6px;">Å½Ã¡dnÃ© mÃ©dium</div></div>
                        <div class="drive" onclick="explOpen('net')">ğŸŒ SÃ­Å¥ovÃ© umÃ­stÄ›nÃ­<div style="font-size:11px;color:#444;margin-top:6px;">WORKGROUP</div></div>
                    </div>
                `;
                if (st) st.textContent = '3 poloÅ¾ky';
                return;
            }
            if (which === 'docs'){
                explSetPath('Dokumenty');
                v.innerHTML = `
                    <h3 style="margin-top:0;">Dokumenty</h3>
                    <div class="xp-list" style="height:300px;">
                        <div class="row" onclick="openWindow('notepad')"><div class="mini">ğŸ“„</div><div>notes.txt</div></div>
                        <div class="row" onclick="openWindow('notepad')"><div class="mini">ğŸ“„</div><div>todo.txt</div></div>
                        <div class="row" onclick="openWindow('notepad')"><div class="mini">ğŸ“„</div><div>readme.txt</div></div>
                    </div>
                `;
                if (st) st.textContent = '3 poloÅ¾ky';
                return;
            }
            if (which === 'control'){
                explSetPath('OvlÃ¡dacÃ­ panely');
                v.innerHTML = `<h3 style="margin-top:0;">OvlÃ¡dacÃ­ panely</h3><div style="margin-top:10px;"><button class="xp-btn" onclick="openWindow('control')">OtevÅ™Ã­t OvlÃ¡dacÃ­ panely</button></div>`;
                if (st) st.textContent = '1 poloÅ¾ka';
                return;
            }
            if (which === 'bin'){
                explSetPath('KoÅ¡');
                v.innerHTML = `<h3 style="margin-top:0;">KoÅ¡</h3><div style="margin-top:10px;"><button class="xp-btn" onclick="openWindow('recycleBin'); renderBin();">OtevÅ™Ã­t KoÅ¡</button></div>`;
                if (st) st.textContent = '1 poloÅ¾ka';
                return;
            }
            if (which === 'c'){
                explSetPath('C:\\');
                v.innerHTML = `
                    <h3 style="margin-top:0;">C:\\</h3>
                    <div class="xp-list" style="height:320px;">
                        <div class="row" onclick="systemMessage('PÅ™Ã­stup odepÅ™en.')"><div class="mini">ğŸ“</div><div>Windows</div></div>
                        <div class="row" onclick="explOpen('docs')"><div class="mini">ğŸ“</div><div>Documents and Settings</div></div>
                        <div class="row" onclick="systemMessage('Soubor nelze otevÅ™Ã­t.')"><div class="mini">ğŸ“„</div><div>boot.ini</div></div>
                    </div>
                `;
                if (st) st.textContent = '3 poloÅ¾ky';
                return;
            }
            // fallback
            explSetPath(which);
            v.innerHTML = `<div>Obsah nenÃ­ dostupnÃ½.</div>`;
            if (st) st.textContent = '0 poloÅ¾ek';
        }
        function explBack(){
            if (explStack.length > 1) explStack.pop();
            const cur = explStack[explStack.length-1];
            explRender(cur);
        }
        function explUp(){ explBack(); }
        function explRefresh(){
            const cur = explStack[explStack.length-1] || 'computer';
            explRender(cur);
            showToast('Obnoveno');
        }

        // Help topics
        function helpOpen(topic){
            const st = document.getElementById('helpStatus');
            const map = {
                updates: 'Aktualizace: pouÅ¾Ã­vej Windows Update (simulace).',
                network: 'SÃ­Å¥: zkontroluj kabel a IP nastavenÃ­.',
                sound: 'Zvuk: zapni/vypni zvuky v OvlÃ¡dacÃ­ch panelech.',
                display: 'ZobrazenÃ­: zmÄ›Åˆ pozadÃ­ ve Vlastnostech zobrazenÃ­.',
                restore: 'ObnovenÃ­: pouÅ¾ij Restart (simulace).'
            };
            if (st) st.textContent = map[topic] || '...';
        }

        // WMP fake
        let wmpPlaying = false;
        function wmpOpen(){
            const tr = document.getElementById('wmpTrack');
            const scr = document.getElementById('wmpScreen');
            const st = document.getElementById('wmpStatus');
            const name = tr ? tr.value : 'track01.mp3';
            if (scr) scr.textContent = 'Loaded: ' + name;
            if (st) st.textContent = 'NaÄteno';
            showToast('NaÄteno: ' + escapeHtml(name));
        }
        function wmpPlay(){
            const scr = document.getElementById('wmpScreen');
            const st = document.getElementById('wmpStatus');
            wmpPlaying = true;
            if (scr) scr.textContent = 'Playing...';
            if (st) st.textContent = 'PÅ™ehrÃ¡vÃ¡nÃ­';
        }
        function wmpPause(){
            const scr = document.getElementById('wmpScreen');
            const st = document.getElementById('wmpStatus');
            wmpPlaying = false;
            if (scr) scr.textContent = 'Paused';
            if (st) st.textContent = 'Pozastaveno';
        }
        function wmpStop(){
            const scr = document.getElementById('wmpScreen');
            const st = document.getElementById('wmpStatus');
            wmpPlaying = false;
            if (scr) scr.textContent = 'Stopped';
            if (st) st.textContent = 'Zastaveno';
        }

        // Init explorer content when opening
        window.addEventListener('load', ()=>{
            // show a tray balloon like XP
            setTimeout(()=>{ showToast('ğŸ”” SystÃ©m je pÅ™ipraven.'); }, 1800);
        });
        // --- end more XP features ---


        // --- XP Shop logic ---
        const WIN11_KEY = 'xp_win11_license';

        function hasWin11(){
            return localStorage.getItem(WIN11_KEY) === '1';
        }

        function buyWin11(){
            if (hasWin11()){
                systemMessage('Licence Windows 11 je jiÅ¾ aktivnÃ­.');
                const icon = document.getElementById('win11Icon');
                if (icon) icon.style.display = 'block';
                return;
            }
            localStorage.setItem(WIN11_KEY, '1');

            // show Windows 11 icon on XP desktop
            const icon = document.getElementById('win11Icon');
            if (icon) icon.style.display = 'block';

            const st = document.getElementById('shopStatus');
            if (st) st.textContent = 'Licence aktivovÃ¡na';

            showToast('âœ… Windows 11 licence zakoupena');
            systemMessage('DÄ›kujeme za nÃ¡kup. Windows 11 byl pÅ™idÃ¡n na plochu.');
        }

        // restore icon on load
        window.addEventListener('load', ()=>{
            if (hasWin11()){
                const icon = document.getElementById('win11Icon');
                if (icon) icon.style.display = 'block';
            }
        });
        // --- end shop ---


        // --- Windows 11 mode (added) ---
        const WIN11_MODE_KEY = 'xp_win11_mode';

        function enterWindows11(){
            // require license
            const lic = localStorage.getItem('xp_win11_license') === '1';
            if (!lic){
                systemMessage('NemÃ¡Å¡ licenci Windows 11. Kup ji v Obchodu.');
                return;
            }
            // hide XP desktop
            const desk = document.getElementById('desktop');
            const desk11 = document.getElementById('desktop11');
            const startMenu = document.getElementById('startMenu');
            if (startMenu) startMenu.style.display = 'none';
            document.querySelectorAll('.window').forEach(w => w.style.display = 'none');
            if (desk) desk.style.display = 'none';

            // show Win11 desktop
            if (desk11) desk11.style.display = 'block';
            document.body.classList.add('win11');
            localStorage.setItem(WIN11_MODE_KEY, '1');
            showToast('âœ… PÅ™epnuto do Windows 11');
        }

        function exitWindows11(){
            const desk = document.getElementById('desktop');
            const desk11 = document.getElementById('desktop11');
            const panel = document.getElementById('w11StartPanel');
            if (panel) panel.style.display = 'none';
            if (desk11) desk11.style.display = 'none';
            if (desk) desk.style.display = 'block';
            document.body.classList.remove('win11');
            localStorage.setItem(WIN11_MODE_KEY, '0');
            showToast('â†©ï¸ ZpÄ›t do Windows XP');
        }

        function toggleWin11Start(){
            const p = document.getElementById('w11StartPanel');
            if (!p) return;
            p.style.display = (p.style.display === 'block') ? 'none' : 'block';
        }

        function openShitGame(){
            const w = document.getElementById('shitgameWin11');
            if (!w) return;
            w.style.display = 'block';
        }
        function closeWin11Window(id){
            const w = document.getElementById(id);
            if (w) w.style.display = 'none';
        }

        // Restore mode on load (if licensed and last mode was Win11)
        window.addEventListener('load', ()=>{
            const was = localStorage.getItem(WIN11_MODE_KEY) === '1';
            const lic = localStorage.getItem('xp_win11_license') === '1';
            if (was && lic){
                enterWindows11();
            }
        });
        // --- end Windows 11 mode ---

        // Win11 clock
        function updateW11Clock(){
            const el = document.getElementById('w11Clock');
            if (!el) return;
            const d = new Date();
            const hh = String(d.getHours()).padStart(2,'0');
            const mm = String(d.getMinutes()).padStart(2,'0');
            el.textContent = hh + ':' + mm;
        }
        setInterval(updateW11Clock, 1000);
        window.addEventListener('load', updateW11Clock);

        function openWindows11File(){
            window.location.href = 'win11.html';
        }
        </script>

<div class="window" id="virusExeWin" style="width:400px;height:200px;">
    <div class="window-title">
        <span>ğŸ§ª virus.exe</span>
        <div class="window-buttons">
            <div class="window-button" onclick="closeWindow('virusExeWin')">âœ•</div>
        </div>
    </div>
    <div class="window-content">
        <p>SpuÅ¡tÄ›nÃ­ souboru virus.exe.</p>
        <button onclick="openVirusExe()">Spustit</button>
    </div>
</div>

<div class="window" id="antivirus" style="width:450px;height:250px;">
    <div class="window-title">
        <span>ğŸ›¡ï¸ Antivirus Windows XP</span>
        <div class="window-buttons">
            <div class="window-button" onclick="closeWindow('antivirus')">âœ•</div>
        </div>
    </div>
    <div class="window-content">
        <p>SkenovÃ¡nÃ­ systÃ©mu:</p>
        <div style="border:2px inset #888;height:25px;">
            <div id="avBar" style="height:100%;width:0%;background:linear-gradient(to right,#0f0,#090);"></div>
        </div>
        <br>
        <button onclick="startAntivirusScan()">Spustit kontrolu</button>
    </div>
</div>


    <!-- System Dialog (replaces alert) -->
    <div class="window" id="systemDialog" style="width: 420px; height: 180px; display:none; left: 220px; top: 180px;">
        <div class="window-title">
            <span>Windows</span>
            <div class="window-buttons">
                <div class="window-button" onclick="closeWindow('systemDialog')">âœ•</div>
            </div>
        </div>
        <div class="window-content" id="systemDialogContent" style="height: calc(100% - 30px);">
            Text
        </div>
    </div>



    <!-- BSOD Screen -->
    <div id="bsod-screen" style="
        position: fixed;
        inset: 0;
        background: #0000AA;
        color: #fff;
        font-family: 'Courier New', monospace;
        display: none;
        z-index: 20000;
        padding: 28px 36px;
        line-height: 1.5;
        font-size: 16px;
        overflow: auto;
    ">
        <div style="background:#fff;color:#000;display:inline-block;padding:2px 8px;margin-bottom:16px;">Windows</div>
        <div style="margin-bottom:18px;">
            A problem has been detected and Windows has been shut down to prevent damage to your computer.
        </div>
        <div style="margin-bottom:18px;">
            If this is the first time you've seen this Stop error screen, restart your computer.
            If this screen appears again, follow these steps:
        </div>
        <div style="margin-bottom:18px;">
            Check to be sure you have adequate disk space. If a driver is identified in the Stop message,
            disable the driver or check with the manufacturer for driver updates.
        </div>
        <div style="margin-bottom:18px;">
            Technical information:
            <div style="margin-top:8px;">*** STOP: 0x0000008E (0xC0000005, 0xBF8010A7, 0xBA4D3F70, 0x00000000)</div>
        </div>
        <div style="opacity:0.9;">Collecting data for crash dump ...</div>
    </div>


    <!-- Error popup template -->
    <div class="window" id="errorPopupTemplate" style="display:none; width: 360px; height: 160px;">
        <div class="window-title">
            <span>âš ï¸ Chyba aplikace</span>
            <div class="window-buttons">
                <div class="window-button" onclick="closeWindow('errorPopupTemplate')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="font-size: 12px;">
            <div id="errorPopupText">Nastala chyba.</div>
            <div style="text-align:right; margin-top: 18px;">
                <button class="xp-btn" onclick="closeWindow(this.closest('.window').id)">OK</button>
            </div>
        </div>
    </div>


    <!-- Shutdown Dialog -->
    <div class="window" id="shutdownDialog" style="width: 420px; height: 240px; display:none; left: 260px; top: 180px;">
        <div class="window-title">
            <span>Vypnout poÄÃ­taÄ</span>
            <div class="window-buttons">
                <div class="window-button" onclick="closeWindow('shutdownDialog')">âœ•</div>
            </div>
        </div>
        <div class="window-content">
            <div style="display:flex; gap:12px; align-items:flex-start;">
                <div style="font-size:48px; line-height:1;">ğŸ”´</div>
                <div style="flex:1;">
                    <div style="font-weight:bold; margin-bottom:8px;">Co chcete udÄ›lat?</div>
                    <select id="shutdownSelect" class="xp-input" style="width:100%;">
                        <option value="shutdown">Vypnout</option>
                        <option value="restart">Restartovat</option>
                        <option value="logoff">OdhlÃ¡sit</option>
                        <option value="standby">ReÅ¾im spÃ¡nku</option>
                    </select>
                    <div style="font-size:12px; color:#444; margin-top:10px;">
                        PoznÃ¡mka: Toto je simulace.
                    </div>
                </div>
            </div>
            <div style="text-align:right; margin-top:18px;">
                <button class="xp-btn" onclick="doShutdown()">OK</button>
                <button class="xp-btn" onclick="closeWindow('shutdownDialog')">Storno</button>
            </div>
        </div>
    </div>


    <!-- Recycle Bin -->
    <div class="window" id="recycleBinWin" style="width: 720px; height: 460px; display:none; left: 120px; top: 90px;">
        <div class="window-title">
            <span>KoÅ¡</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('recycleBin')">_</div>
                <div class="window-button" onclick="maximizeWindow('recycleBin')">â–¡</div>
                <div class="window-button" onclick="closeWindow('recycleBin')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="padding:0;">
            <div class="menu-bar">
                <span>Soubor</span><span>Ãšpravy</span><span>ZobrazenÃ­</span><span>NÃ¡povÄ›da</span>
            </div>
            <div class="toolbar">
                <button class="xp-btn" onclick="binRestoreSelected()">Obnovit</button>
                <button class="xp-btn" onclick="binEmpty()">VyprÃ¡zdnit koÅ¡</button>
                <span style="margin-left:auto;font-size:12px;color:#444;" id="binCountLabel">0 poloÅ¾ek</span>
            </div>
            <div style="padding:10px;">
                <table style="width:100%; border-collapse: collapse; font-size:12px;">
                    <thead>
                        <tr style="background:#D4D0C8; border:1px solid #888;">
                            <th style="text-align:left; padding:6px; border:1px solid #888;">NÃ¡zev</th>
                            <th style="text-align:left; padding:6px; border:1px solid #888;">PÅ¯vodnÃ­ umÃ­stÄ›nÃ­</th>
                            <th style="text-align:left; padding:6px; border:1px solid #888;">Datum odstranÄ›nÃ­</th>
                        </tr>
                    </thead>
                    <tbody id="binTableBody"></tbody>
                </table>
                <div style="margin-top:10px; font-size:11px; color:#444;">Tip: dvojklik obnovÃ­ poloÅ¾ku.</div>
            </div>
            <div class="status-bar" id="binStatus">PÅ™ipraven</div>
        </div>
    </div>


    <!-- My Computer (Explorer) -->
    <div class="window" id="myComputerWin" style="width: 860px; height: 540px; display:none; left: 80px; top: 70px;">
        <div class="window-title">
            <span>Tento poÄÃ­taÄ</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('myComputer')">_</div>
                <div class="window-button" onclick="maximizeWindow('myComputer')">â–¡</div>
                <div class="window-button" onclick="closeWindow('myComputer')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="padding:0;">
            <div class="menu-bar">
                <span>Soubor</span><span>Ãšpravy</span><span>ZobrazenÃ­</span><span>OblÃ­benÃ©</span><span>NÃ¡stroje</span><span>NÃ¡povÄ›da</span>
            </div>
            <div class="toolbar">
                <button class="xp-btn" onclick="explBack()">â—€</button>
                <button class="xp-btn" onclick="explUp()">â¬†</button>
                <input class="xp-input" id="explPath" style="flex:1; min-width:200px;" value="Tento poÄÃ­taÄ" />
                <button class="xp-btn" onclick="explRefresh()">Obnovit</button>
            </div>
            <div class="explorer-split">
                <div class="tree">
                    <div class="node" onclick="explOpen('computer')">ğŸ–¥ï¸ Tento poÄÃ­taÄ</div>
                    <div class="node" onclick="explOpen('docs')">ğŸ“ Dokumenty</div>
                    <div class="node" onclick="explOpen('control')">âš™ï¸ OvlÃ¡dacÃ­ panely</div>
                    <div class="node" onclick="explOpen('bin')">ğŸ—‘ï¸ KoÅ¡</div>
                </div>
                <div class="explorer-main">
                    <div id="explView"></div>
                </div>
            </div>
            <div class="status-bar" id="explStatus">PÅ™ipraven</div>
        </div>
    </div>


    <!-- Calculator -->
    <div class="window" id="calcWin" style="width: 320px; height: 420px; display:none; left: 320px; top: 140px;">
        <div class="window-title">
            <span>KalkulaÄka</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('calc')">_</div>
                <div class="window-button" onclick="closeWindow('calc')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="padding:0;">
            <div class="menu-bar"><span>ZobrazenÃ­</span><span>Upravit</span><span>NÃ¡povÄ›da</span></div>
            <div class="calc-display" id="calcDisplay">0</div>
            <div class="calc-grid">
                <button class="xp-btn" onclick="calcPress('7')">7</button>
                <button class="xp-btn" onclick="calcPress('8')">8</button>
                <button class="xp-btn" onclick="calcPress('9')">9</button>
                <button class="xp-btn" onclick="calcOp('/')">/</button>
                <button class="xp-btn" onclick="calcPress('4')">4</button>
                <button class="xp-btn" onclick="calcPress('5')">5</button>
                <button class="xp-btn" onclick="calcPress('6')">6</button>
                <button class="xp-btn" onclick="calcOp('*')">*</button>
                <button class="xp-btn" onclick="calcPress('1')">1</button>
                <button class="xp-btn" onclick="calcPress('2')">2</button>
                <button class="xp-btn" onclick="calcPress('3')">3</button>
                <button class="xp-btn" onclick="calcOp('-')">-</button>
                <button class="xp-btn" onclick="calcClear()">C</button>
                <button class="xp-btn" onclick="calcPress('0')">0</button>
                <button class="xp-btn" onclick="calcEq()">=</button>
                <button class="xp-btn" onclick="calcOp('+')">+</button>
            </div>
            <div class="status-bar">StandardnÃ­</div>
        </div>
    </div>


    <!-- Windows Media Player (fake) -->
    <div class="window" id="wmpWin" style="width: 720px; height: 480px; display:none; left: 140px; top: 110px;">
        <div class="window-title">
            <span>Windows Media Player</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('wmp')">_</div>
                <div class="window-button" onclick="maximizeWindow('wmp')">â–¡</div>
                <div class="window-button" onclick="closeWindow('wmp')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="padding:0;">
            <div class="menu-bar"><span>Soubor</span><span>Zobrazit</span><span>PÅ™ehrÃ¡vÃ¡nÃ­</span><span>NÃ¡stroje</span><span>NÃ¡povÄ›da</span></div>
            <div style="padding:10px;">
                <div style="border:2px inset #888; background:#000; height:260px; display:flex; align-items:center; justify-content:center; color:#0f0; font-family:'Courier New';">
                    <div id="wmpScreen">No media</div>
                </div>
                <div class="toolbar" style="margin-top:10px;">
                    <button class="xp-btn" onclick="wmpPlay()">â–¶</button>
                    <button class="xp-btn" onclick="wmpPause()">â¸</button>
                    <button class="xp-btn" onclick="wmpStop()">â¹</button>
                    <input class="xp-input" id="wmpTrack" style="flex:1;" value="track01.mp3" />
                    <button class="xp-btn" onclick="wmpOpen()">OtevÅ™Ã­t</button>
                </div>
                <div class="status-bar" id="wmpStatus">PÅ™ipraven</div>
            </div>
        </div>
    </div>


    <!-- Help and Support -->
    <div class="window" id="helpWin" style="width: 760px; height: 520px; display:none; left: 110px; top: 85px;">
        <div class="window-title">
            <span>NÃ¡povÄ›da a podpora</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('help')">_</div>
                <div class="window-button" onclick="maximizeWindow('help')">â–¡</div>
                <div class="window-button" onclick="closeWindow('help')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="padding:0;">
            <div class="menu-bar"><span>Soubor</span><span>ZobrazenÃ­</span><span>NÃ¡stroje</span><span>NÃ¡povÄ›da</span></div>
            <div style="padding:12px;">
                <h3>NÃ¡povÄ›da a podpora</h3>
                <div class="xp-list" style="height:320px;">
                    <div class="row" onclick="helpOpen('updates')"><div class="mini">ğŸ›¡ï¸</div><div>Aktualizace a zabezpeÄenÃ­</div></div>
                    <div class="row" onclick="helpOpen('network')"><div class="mini">ğŸŒ</div><div>ProblÃ©my se sÃ­tÃ­</div></div>
                    <div class="row" onclick="helpOpen('sound')"><div class="mini">ğŸ”Š</div><div>Zvuky a zaÅ™Ã­zenÃ­</div></div>
                    <div class="row" onclick="helpOpen('display')"><div class="mini">ğŸ–¥ï¸</div><div>ZobrazenÃ­ a motivy</div></div>
                    <div class="row" onclick="helpOpen('restore')"><div class="mini">ğŸ•’</div><div>ObnovenÃ­ systÃ©mu</div></div>
                </div>
                <div class="status-bar" id="helpStatus">Vyber poloÅ¾ku.</div>
            </div>
        </div>
    </div>


    <!-- Control Panel -->
    <div class="window" id="controlWin" style="width: 760px; height: 520px; display:none; left: 120px; top: 90px;">
        <div class="window-title">
            <span>OvlÃ¡dacÃ­ panely</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('control')">_</div>
                <div class="window-button" onclick="maximizeWindow('control')">â–¡</div>
                <div class="window-button" onclick="closeWindow('control')">âœ•</div>
            </div>
        </div>
        <div class="window-content" style="padding:0;">
            <div class="menu-bar"><span>Soubor</span><span>Ãšpravy</span><span>ZobrazenÃ­</span><span>NÃ¡povÄ›da</span></div>
            <div style="padding:12px;">
                <h3>OvlÃ¡dacÃ­ panely</h3>
                <div class="explorer-grid" id="controlGrid">
                    <div class="drive" onclick="openWindow('displayProps')">ğŸ–¼ï¸ ZobrazenÃ­<div style="font-size:11px;color:#444;">PozadÃ­, motivy</div></div>
                    <div class="drive" onclick="openWindow('helpWin')">â“ NÃ¡povÄ›da<div style="font-size:11px;color:#444;">Centrum podpory</div></div>
                    <div class="drive" onclick="openWindow('shutdownDialog')">ğŸ”´ VypnutÃ­<div style="font-size:11px;color:#444;">Vypnout / restart</div></div>
                    <div class="drive" onclick="systemMessage('SprÃ¡va uÅ¾ivatelÅ¯ nenÃ­ dostupnÃ¡.')">ğŸ‘¤ UÅ¾ivatelÃ©<div style="font-size:11px;color:#444;">ÃšÄty</div></div>
                    <div class="drive" onclick="toggleSounds()">ğŸ”Š Zvuky<div style="font-size:11px;color:#444;">Zap/Vyp</div></div>
                </div>
                <div class="status-bar" id="controlStatus">PÅ™ipraven</div>
            </div>
        </div>
    </div>

<div class="toast" id="xpToast"></div>

    <!-- XP Shop -->
    <div class="window" id="shopWin" style="width: 760px; height: 520px; display:none; left: 120px; top: 90px;">
        <div class="window-title">
            <span>Microsoft Store (XP)</span>
            <div class="window-buttons">
                <div class="window-button" onclick="minimizeWindow('shop')">_</div>
                <div class="window-button" onclick="maximizeWindow('shop')">â–¡</div>
                <div class="window-button" onclick="closeWindow('shop')">âœ•</div>
            </div>
        </div>
        <div class="window-content">
            <div class="menu-bar">
                <span>Obchod</span><span>Licence</span><span>NÃ¡povÄ›da</span>
            </div>

            <div class="product-card">
                <h3>Windows 11 Pro <span class="badge">DigitÃ¡lnÃ­ licence</span></h3>
                <p>Upgrade balÃ­Äek z Windows XP. Po zakoupenÃ­ se pÅ™idÃ¡ ikona Windows 11 na plochu.</p>
                <div style="display:flex; align-items:center; gap:16px;">
                    <div class="price-tag">1 499 KÄ</div>
                    <button class="xp-btn" onclick="buyWin11()">Koupit</button>
                </div>
            </div>

            <div class="status-bar" id="shopStatus">PÅ™ipraven</div>
        </div>
    </div>


    <!-- Windows 11 Desktop (mode) -->
    <div id="desktop11">
        <div class="w11-icons" id="w11Icons">
            <div class="w11-icon" id="shitgameIcon" ondblclick="openShitGame()">
                <div class="img">ğŸ®</div>
                <div class="lbl">shitgame.exe</div>
            </div>
        </div>

        <div class="w11-panel" id="w11StartPanel">
            <div class="search">ğŸ” Hledat aplikace, nastavenÃ­ a dokumenty</div>
            <h3>PÅ™ipnutÃ©</h3>
            <div class="grid">
                <div class="app" onclick="openShitGame()"><div class="aico">ğŸ®</div>shitgame</div>
                <div class="app" onclick="systemMessage('Settings (Win11) nenÃ­ dostupnÃ©.')"><div class="aico">âš™ï¸</div>Settings</div>
                <div class="app" onclick="systemMessage('Store (Win11) nenÃ­ dostupnÃ½.')"><div class="aico">ğŸ›’</div>Store</div>
                <div class="app" onclick="systemMessage('Windows Security nenÃ­ dostupnÃ©.')"><div class="aico">ğŸ›¡ï¸</div>Security</div>
                <div class="app" onclick="systemMessage('Files nenÃ­ dostupnÃ©.')"><div class="aico">ğŸ“</div>Files</div>
                <div class="app" onclick="exitWindows11()"><div class="aico">â†©ï¸</div>ZpÄ›t do XP</div>
            </div>
        </div>

        <div class="w11-taskbar">
            <div class="tb-btn" onclick="toggleWin11Start()">âŠ</div>
            <div class="tb-btn" onclick="openShitGame()">ğŸ®</div>
            <div class="tb-btn" onclick="systemMessage('VyhledÃ¡vÃ¡nÃ­ nenÃ­ dostupnÃ©.')">ğŸ”</div>
            <div class="tb-btn" onclick="exitWindows11()">â†©ï¸</div>
        <div class="w11-tray"><span id="w11Clock">00:00</span> <span>ğŸ“¶</span> <span>ğŸ”Š</span></div>
        </div>

        <div class="w11-window" id="shitgameWin11">
            <div class="title">
                <div class="left">shitgame.exe</div>
                <div class="btns">
                    <div class="b" onclick="closeWin11Window('shitgameWin11')">âœ•</div>
                </div>
            </div>
            <div class="content">
                <div style="font-size:16px;font-weight:600;margin-bottom:6px;">ShitGame</div>
                <div style="opacity:0.9;margin-bottom:10px;">Windows 11 mÃ³d: spuÅ¡tÄ›nÃ­ aplikace (simulace).</div>
                <div style="padding:10px;border-radius:12px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);">
                    <div>Soubor: <strong>shitgame.exe</strong></div>
                    <div>Stav: <strong>Running</strong></div>
                    <div style="margin-top:10px;">
                        <button class="xp-btn" onclick="systemMessage('Aplikace spadla (simulace).')">Crash</button>
                        <button class="xp-btn" onclick="systemMessage('PÅ™Ã­stup odepÅ™en.')">Admin</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
