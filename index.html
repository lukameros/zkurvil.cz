<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows XP </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Tahoma", sans-serif;
            overflow: hidden;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        /* Classic XP Loading Screen */
        .xp-boot-screen {
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .xp-logo-container {
            text-align: center;
            margin-bottom: 80px;
        }

        .xp-logo-text {
            font-size: 48px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .xp-logo-subtitle {
            color: #fff;
            font-size: 14px;
            margin-top: 5px;
        }

        /* Classic loading bar */
        .classic-loading-container {
            width: 250px;
            height: 12px;
            background: #000;
            border: 1px solid #3C3C3C;
            position: relative;
            overflow: hidden;
        }

        .classic-loading-bar {
            height: 100%;
            width: 0%;
            background: #3C3C3C;
            position: relative;
        }

        .loading-blocks {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            display: flex;
            gap: 2px;
        }

        .loading-block {
            width: 20px;
            height: 100%;
            background: linear-gradient(to bottom, #5A9FD4, #2E5C8A);
            animation: slideBlocks 1.5s linear infinite;
        }

        @keyframes slideBlocks {
            0% { transform: translateX(-300px); }
            100% { transform: translateX(300px); }
        }

        .xp-footer {
            position: absolute;
            bottom: 30px;
            color: #fff;
            font-size: 11px;
            text-align: center;
        }

        .xp-copyright {
            margin-bottom: 5px;
        }

        /* Desktop */
        #desktop {
            display: none;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom, #5A8BB4 0%, #3A6EA5 100%);
            position: relative;
        }

        .desktop-icons {
            padding: 20px;
        }

        .icon {
            width: 80px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            user-select: none;
            position: absolute;
        }

        .icon:hover {
            background: rgba(255, 255, 255, 0.2);
            border: 1px dotted #fff;
        }

        .icon.selected {
            background: rgba(51, 153, 255, 0.3);
            border: 1px dotted #fff;
        }

        .icon.dragging {
            opacity: 0.7;
            z-index: 1000;
        }

        .icon-img {
            width: 48px;
            height: 48px;
            margin: 0 auto 5px;
            background: linear-gradient(135deg, #4A90E2, #357ABD);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .icon-label {
            color: #fff;
            font-size: 11px;
            text-shadow: 1px 1px 2px #000;
        }

        /* Taskbar */
        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom, #245EDC 0%, #1941A5 100%);
            border-top: 2px solid #4A90E2;
            display: flex;
            align-items: center;
            padding: 0 5px;
        }

        .start-button {
            height: 32px;
            background: linear-gradient(to bottom, #3FA142 0%, #2E7D32 100%);
            border: 2px outset #4CAF50;
            border-radius: 5px;
            padding: 0 15px;
            color: white;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .start-button:active {
            border-style: inset;
        }

        .start-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #FF0000, #FF6B00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .taskbar-items {
            flex: 1;
            margin-left: 10px;
            display: flex;
            gap: 5px;
        }

        .taskbar-item {
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px outset #4A90E2;
            border-radius: 3px;
            padding: 0 10px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            max-width: 150px;
        }

        .taskbar-item.active {
            border-style: inset;
            background: rgba(0, 0, 0, 0.2);
        }

        .clock {
            color: white;
            font-size: 12px;
            padding: 0 10px;
            background: rgba(0, 0, 0, 0.2);
            height: 32px;
            display: flex;
            align-items: center;
            border: 1px inset #1941A5;
        }

        /* Start Menu */
        .start-menu {
            display: none;
            position: absolute;
            bottom: 42px;
            left: 5px;
            width: 350px;
            background: #3C5A99;
            border: 2px solid #4A90E2;
            border-radius: 8px 8px 0 0;
            overflow: hidden;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
        }

        .start-menu-header {
            background: linear-gradient(to right, #245EDC, #4A90E2);
            color: white;
            padding: 40px 20px 10px;
            font-size: 24px;
            font-weight: bold;
        }

        .start-menu-items {
            background: #D4D0C8;
            padding: 10px;
        }

        .start-menu-item {
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 3px;
        }

        .start-menu-item:hover {
            background: #3C5A99;
            color: white;
        }

        .start-menu-separator {
            height: 1px;
            background: #808080;
            margin: 3px 0;
        }

        /* Window */
        .window {
            position: absolute;
            width: 500px;
            height: 350px;
            background: #ECE9D8;
            border: 2px solid #0054E3;
            border-radius: 8px 8px 0 0;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
            display: none;
            z-index: 100;
            left: 100px;
            top: 100px;
        }

        .window.active {
            z-index: 200;
        }

        .window-title {
            background: linear-gradient(to bottom, #0997FF 0%, #0053EE 100%);
            color: white;
            padding: 5px 10px;
            font-size: 13px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .window-title.inactive {
            background: linear-gradient(to bottom, #7A96DF 0%, #5177D6 100%);
        }

        .window-buttons {
            display: flex;
            gap: 3px;
        }

        .window-button {
            width: 21px;
            height: 21px;
            background: linear-gradient(to bottom, #E8E5DC 0%, #C8C5BC 100%);
            border: 1px outset #fff;
            font-size: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .window-button:active {
            border-style: inset;
        }

        .window-content {
            padding: 20px;
            height: calc(100% - 30px);
            overflow: auto;
            background: white;
        }

        /* Context Menu */
        .context-menu {
            position: fixed;
            background: #D4D0C8;
            border: 2px outset #fff;
            box-shadow: 3px 3px 5px rgba(0,0,0,0.3);
            padding: 2px;
            min-width: 200px;
            display: none;
            z-index: 10000;
        }

        .context-menu-item {
            padding: 5px 25px 5px 30px;
            cursor: pointer;
            position: relative;
            font-size: 12px;
        }

        .context-menu-item:hover {
            background: #0A246A;
            color: white;
        }

        .context-menu-item.disabled {
            color: #888;
            cursor: default;
        }

        .context-menu-item.disabled:hover {
            background: transparent;
            color: #888;
        }

        .context-menu-separator {
            height: 1px;
            background: #808080;
            margin: 2px 0;
        }

        .context-menu-item .icon-left {
            position: absolute;
            left: 5px;
        }

        /* Selection box */
        .selection-box {
            position: absolute;
            border: 1px solid #0A246A;
            background: rgba(10, 36, 106, 0.1);
            pointer-events: none;
            display: none;
            z-index: 999;
        }

        /* Minimize/Maximize effects */
        @keyframes minimize {
            to {
                transform: scale(0) translate(-50%, 100%);
                opacity: 0;
            }
        }

        @keyframes maximize {
            from {
                transform: scale(0.5);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .minimizing {
            animation: minimize 0.3s forwards;
        }

        .maximizing {
            animation: maximize 0.3s forwards;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="xp-boot-screen">
            <div class="xp-logo-container">
                <div class="xp-logo-text">Microsoft Windows XP</div>
                <div class="xp-logo-subtitle">Professional</div>
            </div>
            
            <div class="classic-loading-container">
                <div class="loading-blocks" id="loadingBlocks">
                    <div class="loading-block"></div>
                    <div class="loading-block" style="animation-delay: 0.2s;"></div>
                    <div class="loading-block" style="animation-delay: 0.4s;"></div>
                </div>
            </div>

            <div class="xp-footer">
                <div class="xp-copyright">Copyright Â© Microsoft Corporation</div>
                <div style="margin-top: 15px; color: #666;">NaÄÃ­tÃ¡nÃ­...</div>
            </div>
        </div>
    </div>

    <!-- Desktop -->
    <div id="desktop">
        <div class="desktop-icons" id="desktopIcons">
            <div class="icon" data-icon-id="myComputer">
                <div class="icon-img">ğŸ’»</div>
                <div class="icon-label">MÅ¯j poÄÃ­taÄ</div>
            </div>
            <div class="icon" data-icon-id="recycleBin">
                <div class="icon-img">ğŸ—‘ï¸</div>
                <div class="icon-label">KoÅ¡ (plnÃ½)</div>
            </div>
            <div class="icon" data-icon-id="ie">
                <div class="icon-img">ğŸŒ</div>
                <div class="icon-label">Internet Explorer</div>
            </div>
            <div class="icon" data-icon-id="minesweeper">
                <div class="icon-img">ğŸ’£</div>
                <div class="icon-label">HledÃ¡nÃ­ min</div>
            </div>
            <div class="icon" data-icon-id="paint">
                <div class="icon-img">ğŸ¨</div>
                <div class="icon-label">MalovÃ¡nÃ­</div>
            </div>
            <div class="icon" data-icon-id="virus">
                <div class="icon-img">ğŸ¦ </div>
                <div class="icon-label">urÄitÄ›_ne_virus.exe</div>
            </div>
            <div class="icon" data-icon-id="notepad">
                <div class="icon-img">ğŸ“</div>
                <div class="icon-label">PoznÃ¡mkovÃ½ blok</div>
            </div>
            <div class="icon" data-icon-id="calculator">
                <div class="icon-img">ğŸ”¢</div>
                <div class="icon-label">KalkulaÄka</div>
            </div>
            <div class="icon" data-icon-id="gopnik">
                <div class="icon-img" style="background: linear-gradient(135deg, #FF1744, #D50000);">ğŸ‡·ğŸ‡º</div>
                <div class="icon-label">Gopnik Simulator</div>
            </div>
            <div class="icon" data-icon-id="pacman">
                <div class="icon-img" style="background: linear-gradient(135deg, #FFEB3B, #FBC02D);">ğŸ‘»</div>
                <div class="icon-label">Pac-Man Deluxe</div>
            </div>
            <div class="icon" data-icon-id="myDocuments">
                <div class="icon-img">ğŸ“</div>
                <div class="icon-label">Dokumenty</div>
            </div>
            <div class="icon" data-icon-id="myMusic">
                <div class="icon-img">ğŸµ</div>
                <div class="icon-label">Hudba</div>
            </div>
            <div class="icon" data-icon-id="myPictures">
                <div class="icon-img">ğŸ–¼ï¸</div>
                <div class="icon-label">ObrÃ¡zky</div>
            </div>
            <div class="icon" data-icon-id="network">
                <div class="icon-img">ğŸŒ</div>
                <div class="icon-label">SÃ­Å¥ovÃ© pÅ™ipojenÃ­</div>
            </div>
        </div>

        <!-- Selection box -->
        <div class="selection-box" id="selectionBox"></div>

        <!-- Context menus -->
        <div class="context-menu" id="desktopContextMenu">
            <div class="context-menu-item" onclick="desktopRefresh()">
                <span class="icon-left">ğŸ”„</span>
                Aktualizovat
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="arrangeIcons()">
                <span class="icon-left">ğŸ“‹</span>
                UspoÅ™Ã¡dat ikony
            </div>
            <div class="context-menu-item" onclick="playClickSound(); alert('Tato funkce je jen pro parÃ¡du ğŸ˜„')">
                <span class="icon-left">ğŸ–¼ï¸</span>
                VloÅ¾it
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="createNewFile()">
                <span class="icon-left">ğŸ“„</span>
                NovÃ½ â–¶
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="openWindow('myComputer')">
                <span class="icon-left">âš™ï¸</span>
                Vlastnosti
            </div>
        </div>

        <div class="context-menu" id="iconContextMenu">
            <div class="context-menu-item" onclick="openSelectedIcon()">
                <span class="icon-left">ğŸ“‚</span>
                OtevÅ™Ã­t
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="playClickSound(); alert('ZkopÃ­rovÃ¡no! (ne doopravdy)')">
                <span class="icon-left">ğŸ“‹</span>
                KopÃ­rovat
            </div>
            <div class="context-menu-item" onclick="deleteToRecycleBin()">
                <span class="icon-left">ğŸ—‘ï¸</span>
                Odstranit
            </div>
            <div class="context-menu-item" onclick="playClickSound(); alert('PÅ™ejmenovÃ¡no na: NovÃ½ nÃ¡zev ğŸ˜')">
                <span class="icon-left">âœï¸</span>
                PÅ™ejmenovat
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" onclick="playClickSound(); alert('Vlastnosti: Velikost neznÃ¡mÃ¡ ğŸ¤·')">
                <span class="icon-left">ğŸ“Š</span>
                Vlastnosti
            </div>
        </div>

        <!-- Taskbar -->
        <div class="taskbar">
            <div class="start-button" onclick="toggleStartMenu()">
                <div class="start-icon">âŠ</div>
                <span>Start</span>
            </div>
            <div class="taskbar-items" id="taskbarItems"></div>
            <div class="clock" id="clock">13:37</div>
        </div>

        <!-- Start Menu -->
        <div class="start-menu" id="startMenu">
            <div class="start-menu-header">Windows XP</div>
            <div class="start-menu-items">
                <div class="start-menu-item" onclick="openWindow('myDocuments'); toggleStartMenu();">ğŸ“ Dokumenty</div>
                <div class="start-menu-item" onclick="openWindow('myPictures'); toggleStartMenu();">ğŸ–¼ï¸ ObrÃ¡zky</div>
                <div class="start-menu-item" onclick="openWindow('myMusic'); toggleStartMenu();">ğŸµ Hudba</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('myComputer'); toggleStartMenu();">ğŸ’» MÅ¯j poÄÃ­taÄ</div>
                <div class="start-menu-item" onclick="openWindow('network'); toggleStartMenu();">ğŸŒ SÃ­Å¥ovÃ© pÅ™ipojenÃ­</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('notepad'); toggleStartMenu();">ğŸ“ PoznÃ¡mkovÃ½ blok</div>
                <div class="start-menu-item" onclick="openWindow('wordpad'); toggleStartMenu();">ğŸ“ WordPad</div>
                <div class="start-menu-item" onclick="openWindow('calculator'); toggleStartMenu();">ğŸ”¢ KalkulaÄka</div>
                <div class="start-menu-item" onclick="openWindow('paint'); toggleStartMenu();">ğŸ¨ MalovÃ¡nÃ­</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('cmd'); toggleStartMenu();">âš« PÅ™Ã­kazovÃ½ Å™Ã¡dek</div>
                <div class="start-menu-item" onclick="openWindow('taskManager'); toggleStartMenu();">ğŸ“Š SprÃ¡vce Ãºloh</div>
                <div class="start-menu-item" onclick="openWindow('runDialog'); toggleStartMenu();">â–¶ï¸ Spustit...</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="openWindow('diskCleanup'); toggleStartMenu();">ğŸ§¹ VyÄiÅ¡tÄ›nÃ­ disku</div>
                <div class="start-menu-item" onclick="openWindow('defrag'); toggleStartMenu();">ğŸ’¿ Defragmentace</div>
                <div class="start-menu-item" onclick="openWindow('systemRestore'); toggleStartMenu();">ğŸ”„ ObnovenÃ­ systÃ©mu</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="playClickSound(); alert('NÃ¡povÄ›da: Vypni to a jdi ven! â˜€ï¸')">â“ NÃ¡povÄ›da</div>
                <div class="start-menu-item" onclick="playClickSound(); alert('HledÃ¡Å¡ smysl Å¾ivota? JÃ¡ taky! ğŸ”')">ğŸ” Hledat</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item" onclick="shutdown()">ğŸ”´ Vypnout poÄÃ­taÄ</div>
            </div>
        </div>

        <!-- Windows -->
        <div class="window" id="myComputer">
            <div class="window-title">
                <span>ğŸ’» MÅ¯j poÄÃ­taÄ</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myComputer')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myComputer')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myComputer')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>PevnÃ© disky:</h3>
                <p>ğŸ“€ Disk C: (997 MB volnÃ½ch z 1 GB)</p>
                <p>ğŸ“€ Disk D: (VloÅ¾te disk)</p>
                <br>
                <h3>SystÃ©movÃ© informace:</h3>
                <p>âš¡ Procesor: Pentium 4 (skoro)</p>
                <p>ğŸ’¾ RAM: 256 MB (nestaÄÃ­)</p>
                <p>ğŸ® Grafika: IntegrovanÃ¡ (laguje)</p>
            </div>
        </div>

        <div class="window" id="recycleBin">
            <div class="window-title">
                <span>ğŸ—‘ï¸ KoÅ¡</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('recycleBin')">_</div>
                    <div class="window-button" onclick="maximizeWindow('recycleBin')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('recycleBin')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>PoloÅ¾ky v koÅ¡i:</h3>
                <p>ğŸ“„ moje_dusevno.txt</p>
                <p>ğŸ“„ zdravy_zivotni_styl.doc</p>
                <p>ğŸ“„ novy_rocni_predsevzeti_2024.xls</p>
                <p>ğŸ“„ cviceni_od_zitra.ppt</p>
                <p>ğŸ’° penize_po_vanoce.jpg</p>
                <p>ğŸ¯ produktivita.exe</p>
                <p>ğŸ’” vztah_ktery_fungoval.pdf</p>
                <p>ğŸ“ diploma_ze_skoly_zivota.doc</p>
                <p>ğŸ• dieta_od_pondeli.txt</p>
                <p>ğŸ˜´ normalni_spanek.mp3</p>
                <p>ğŸ® cas_na_konicek.avi</p>
                <p>ğŸ‘´ mladost.zip</p>
                <br>
                <button onclick="playErrorSound(); alert('SmazÃ¡no! (stejnÄ› uÅ¾ to nikdy nebudeÅ¡ potÅ™ebovat)')">Vysypat koÅ¡</button>
            </div>
        </div>

        <div class="window" id="ie">
            <div class="window-title">
                <span>ğŸŒ Internet Explorer</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('ie')">_</div>
                    <div class="window-button" onclick="maximizeWindow('ie')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('ie')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>PÅ™ipojovÃ¡nÃ­ k internetu...</h3>
                <p>ğŸ“¡ Modem: *pÃ­Ã­Ã­Ã­Ã­Ã­Ã­p* *krrrrrr* *bzzzzz*</p>
                <p>â±ï¸ OdhadovanÃ½ Äas: 15 minut</p>
                <p>ğŸ’¸ Cena za pÅ™ipojenÃ­: Tvoje duÅ¡e</p>
                <br>
                <p><strong>OblÃ­benÃ© strÃ¡nky:</strong></p>
                <p>ğŸµ <a href="#" onclick="playErrorSound(); alert('404: Nostalgie not found')">Seznam.cz</a></p>
                <p>ğŸ® <a href="#" onclick="playErrorSound(); alert('ProhlÃ­Å¾eÄ spadl! (pÅ™ekvapenÃ­)')">Flashgames</a></p>
                <p>ğŸ’¾ <a href="#" onclick="playErrorSound(); alert('Virus detected! (ale vlastnÄ› ne)')">Stahuj.cz</a></p>
            </div>
        </div>

        <div class="window" id="minesweeper">
            <div class="window-title">
                <span>ğŸ’£ HledÃ¡nÃ­ min</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('minesweeper')">_</div>
                    <div class="window-button" onclick="maximizeWindow('minesweeper')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('minesweeper')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h2 style="text-align: center; margin-top: 50px;">ğŸ’¥ BOOM! ğŸ’¥</h2>
                <p style="text-align: center; margin-top: 20px;">ProhrÃ¡ls! (jako vÅ¾dycky)</p>
                <p style="text-align: center;">â±ï¸ ÄŒas: 0:03</p>
                <p style="text-align: center;">ğŸ† NejlepÅ¡Ã­ Äas: âˆ</p>
                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="playErrorSound(); alert('Klikl jsi na dalÅ¡Ã­ minu! ğŸ’£')">NovÃ¡ hra</button>
                </div>
            </div>
        </div>

        <div class="window" id="paint" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸ¨ MalovÃ¡nÃ­ - Bez nÃ¡zvu</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('paint')">_</div>
                    <div class="window-button" onclick="maximizeWindow('paint')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('paint')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 5px;">
                <div style="background: #D4D0C8; padding: 5px; margin-bottom: 5px; border: 1px solid #888;">
                    <button onclick="selectTool('pen')" id="toolPen" style="padding: 5px 10px; margin: 2px; background: #fff; border: 2px outset #888;">âœï¸ TuÅ¾ka</button>
                    <button onclick="selectTool('eraser')" id="toolEraser" style="padding: 5px 10px; margin: 2px; background: #E0E0E0; border: 2px outset #888;">ğŸ§¹ Guma</button>
                    <button onclick="clearCanvas()" style="padding: 5px 10px; margin: 2px; background: #E0E0E0; border: 2px outset #888;">ğŸ—‘ï¸ Smazat vÅ¡e</button>
                    <span style="margin-left: 20px;">Barva:</span>
                    <input type="color" id="colorPicker" value="#000000" style="margin-left: 5px; cursor: pointer;">
                    <span style="margin-left: 10px;">Velikost:</span>
                    <input type="range" id="brushSize" min="1" max="20" value="3" style="width: 100px; vertical-align: middle;">
                </div>
                <canvas id="paintCanvas" width="580" height="350" style="border: 2px inset #888; background: white; cursor: crosshair; display: block;"></canvas>
            </div>
        </div>

        <div class="window" id="virus">
            <div class="window-title">
                <span>ğŸ¦  UrÄitÄ› ne virus</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('virus')">_</div>
                    <div class="window-button" onclick="maximizeWindow('virus')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('virus')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h2 style="color: red; text-align: center;">âš ï¸ VAROVÃNÃ âš ï¸</h2>
                <p style="text-align: center; margin: 20px 0;">
                    TvÅ¯j poÄÃ­taÄ byl infikovÃ¡n virem!<br>
                    (Ne doopravdy, to je jen sranda)
                </p>
                <div style="background: #000; color: #0f0; padding: 15px; font-family: 'Courier New'; margin: 20px 0;">
                    > Instaluji_mining_software.exe<br>
                    > Kraduji_tvoje_hesla.bat<br>
                    > Prodavam_data_na_darkweb.sh<br>
                    > <span style="animation: blink 1s infinite;">â–ˆ</span>
                </div>
                <p style="text-align: center; color: #888; font-size: 12px;">
                    Naser, Å¾e nostalgie tÄ›Å¾ko hledÃ¡ ğŸ˜„
                </p>
            </div>
        </div>

        <div class="window" id="notepad">
            <div class="window-title">
                <span>ğŸ“ PoznÃ¡mkovÃ½ blok - Bez nÃ¡zvu</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('notepad')">_</div>
                    <div class="window-button" onclick="maximizeWindow('notepad')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('notepad')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 5px;">
                <textarea style="width: 100%; height: 100%; border: none; outline: none; font-family: 'Courier New'; font-size: 13px; resize: none;" placeholder="ZaÄni psÃ¡t...">VÃ¡Å¾enÃ½ denÃ­Äku,

Dnes jsem objevil Windows XP simulÃ¡tor.
Je to jako cesta do minulosti...

VzpomÃ­nÃ¡m si, jak jsem celÃ© dny hrÃ¡l HledÃ¡nÃ­ min
a snaÅ¾il se pÅ™ipojit na internet pÅ™es modem.

Ah, nostalgie! ğŸ¥º

PS: StÃ¡le nevÃ­m, kde je ten Clippy...</textarea>
            </div>
        </div>

        <div class="window" id="calculator">
            <div class="window-title">
                <span>ğŸ”¢ KalkulaÄka</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('calculator')">_</div>
                    <div class="window-button" onclick="closeWindow('calculator')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 10px;">
                <div style="background: #E0E0E0; padding: 10px; border: 2px inset #888;">
                    <input type="text" id="calcDisplay" readonly value="0" style="width: 100%; text-align: right; font-size: 24px; padding: 5px; border: 2px inset #888; background: #FFF;">
                </div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 10px;">
                    <button onclick="calcInput('7')" style="padding: 15px; font-size: 16px;">7</button>
                    <button onclick="calcInput('8')" style="padding: 15px; font-size: 16px;">8</button>
                    <button onclick="calcInput('9')" style="padding: 15px; font-size: 16px;">9</button>
                    <button onclick="calcInput('/')" style="padding: 15px; font-size: 16px;">/</button>
                    <button onclick="calcInput('4')" style="padding: 15px; font-size: 16px;">4</button>
                    <button onclick="calcInput('5')" style="padding: 15px; font-size: 16px;">5</button>
                    <button onclick="calcInput('6')" style="padding: 15px; font-size: 16px;">6</button>
                    <button onclick="calcInput('*')" style="padding: 15px; font-size: 16px;">*</button>
                    <button onclick="calcInput('1')" style="padding: 15px; font-size: 16px;">1</button>
                    <button onclick="calcInput('2')" style="padding: 15px; font-size: 16px;">2</button>
                    <button onclick="calcInput('3')" style="padding: 15px; font-size: 16px;">3</button>
                    <button onclick="calcInput('-')" style="padding: 15px; font-size: 16px;">-</button>
                    <button onclick="calcInput('0')" style="padding: 15px; font-size: 16px;">0</button>
                    <button onclick="calcClear()" style="padding: 15px; font-size: 16px;">C</button>
                    <button onclick="calcEqual()" style="padding: 15px; font-size: 16px;">=</button>
                    <button onclick="calcInput('+')" style="padding: 15px; font-size: 16px;">+</button>
                </div>
            </div>
        </div>

        <div class="window" id="taskManager" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸ“Š SprÃ¡vce Ãºloh</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('taskManager')">_</div>
                    <div class="window-button" onclick="closeWindow('taskManager')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 0;">
                <div style="border-bottom: 2px solid #D4D0C8; padding: 5px;">
                    <button onclick="taskManagerRefresh()" style="padding: 5px 15px;">ğŸ”„ Aktualizovat</button>
                    <button onclick="endTask()" style="padding: 5px 15px; margin-left: 5px;">âŒ UkonÄit Ãºlohu</button>
                </div>
                <div style="padding: 10px;">
                    <table id="taskTable" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #D4D0C8;">
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">NÃ¡zev Ãºlohy</th>
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">Stav</th>
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">CPU</th>
                                <th style="padding: 5px; text-align: left; border: 1px solid #888;">PamÄ›Å¥</th>
                            </tr>
                        </thead>
                        <tbody id="taskTableBody">
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">System Idle Process</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no</td>
                                <td style="padding: 5px; border: 1px solid #888;">99%</td>
                                <td style="padding: 5px; border: 1px solid #888;">0 KB</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">explorer.exe</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no</td>
                                <td style="padding: 5px; border: 1px solid #888;">1%</td>
                                <td style="padding: 5px; border: 1px solid #888;">15,234 KB</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">chrome.exe</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no</td>
                                <td style="padding: 5px; border: 1px solid #888;">45%</td>
                                <td style="padding: 5px; border: 1px solid #888;">1,234,567 KB</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px; border: 1px solid #888;">urÄitÄ›_ne_virus.exe</td>
                                <td style="padding: 5px; border: 1px solid #888;">SpuÅ¡tÄ›no ğŸš©</td>
                                <td style="padding: 5px; border: 1px solid #888;">89%</td>
                                <td style="padding: 5px; border: 1px solid #888;">999,999 KB</td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 20px; padding: 10px; background: #f0f0f0; border: 1px solid #888;">
                        <p><strong>VÃ½kon systÃ©mu:</strong></p>
                        <p>CPU: <span id="cpuUsage">45%</span> | RAM: 234 MB / 256 MB</p>
                        <p>Procesy: 42 | Threads: 420 | Handles: 4200</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="runDialog" style="width: 400px; height: 200px;">
            <div class="window-title">
                <span>â–¶ï¸ Spustit</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('runDialog')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <p style="margin-bottom: 15px;">Zadejte nÃ¡zev programu, sloÅ¾ky, dokumentu nebo internetovÃ© adresy a systÃ©m Windows je otevÅ™e.</p>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px;">OtevÅ™Ã­t:</label>
                    <input type="text" id="runInput" placeholder="notepad, calc, mspaint..." style="width: 100%; padding: 5px; border: 2px inset #888;">
                </div>
                <div style="text-align: right;">
                    <button onclick="executeRun()" style="padding: 5px 20px; margin-right: 5px;">OK</button>
                    <button onclick="closeWindow('runDialog')" style="padding: 5px 20px;">Storno</button>
                </div>
            </div>
        </div>

        <div class="window" id="myDocuments" style="width: 600px; height: 400px;">
            <div class="window-title">
                <span>ğŸ“ Dokumenty</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myDocuments')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myDocuments')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myDocuments')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <div style="background: #D4D0C8; padding: 5px; margin-bottom: 10px; border: 1px solid #888;">
                    <button onclick="playClickSound()">â¬…ï¸ ZpÄ›t</button>
                    <button onclick="playClickSound()">â¡ï¸ VpÅ™ed</button>
                    <button onclick="playClickSound()">â¬†ï¸ Nahoru</button>
                    <input type="text" value="C:\Documents and Settings\User\Dokumenty" style="flex: 1; margin: 0 10px; padding: 3px;">
                </div>
                <h3>ğŸ“„ Moje dokumenty:</h3>
                <p>ğŸ“ BakalÃ¡Å™ka_final_final_FINAL.doc</p>
                <p>ğŸ“ CV_2024.pdf</p>
                <p>ğŸ“Š VÃ½daje_2024.xls</p>
                <p>ğŸ“„ TajnÃ©_plÃ¡ny.txt</p>
                <p>ğŸ“ StarÃ©_fotky_z_mobilu</p>
                <p>ğŸ“ ZÃ¡loha_zÃ¡lohy</p>
                <p>ğŸµ Playlist_2000s.m3u</p>
                <p>ğŸ“‹ Hesla_NEZÃLOHOVAT.txt</p>
            </div>
        </div>

        <div class="window" id="myMusic" style="width: 600px; height: 450px;">
            <div class="window-title">
                <span>ğŸµ Windows Media Player</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myMusic')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myMusic')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myMusic')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="background: #000; color: #0ff; padding: 0;">
                <div style="background: linear-gradient(to bottom, #2B5278, #1A3450); padding: 10px;">
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 48px; margin-bottom: 10px;">â™«</div>
                        <div style="font-size: 18px; color: #fff;">NynÃ­ pÅ™ehrÃ¡vÃ¡:</div>
                        <div style="font-size: 24px; color: #0ff; margin: 10px 0;">Darude - Sandstorm</div>
                        <div style="color: #888;">Various Artists - 2000s Hits</div>
                    </div>
                    <div style="background: #000; padding: 10px; margin: 20px 0;">
                        <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 10px;">
                            <button onclick="playClickSound()" style="padding: 10px 20px; font-size: 20px;">â®ï¸</button>
                            <button onclick="togglePlay()" id="playBtn" style="padding: 10px 30px; font-size: 20px;">â–¶ï¸</button>
                            <button onclick="playClickSound()" style="padding: 10px 20px; font-size: 20px;">â­ï¸</button>
                        </div>
                        <div style="background: #333; height: 10px; border-radius: 5px; overflow: hidden;">
                            <div id="musicProgress" style="background: linear-gradient(to right, #0ff, #00f); height: 100%; width: 35%; transition: width 0.3s;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; color: #888; font-size: 12px; margin-top: 5px;">
                            <span>1:23</span>
                            <span>3:45</span>
                        </div>
                    </div>
                    <div style="padding: 10px;">
                        <h4 style="color: #fff; margin-bottom: 10px;">ğŸ“‹ Playlist:</h4>
                        <div style="background: #000; padding: 10px; max-height: 150px; overflow-y: auto;">
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Darude - Sandstorm</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Eiffel 65 - Blue</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Crazy Frog - Axel F</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Vengaboys - Boom Boom</div>
                            <div style="padding: 5px; border-bottom: 1px solid #333;">ğŸµ Scatman John - Scatman</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="myPictures" style="width: 650px; height: 450px;">
            <div class="window-title">
                <span>ğŸ–¼ï¸ ObrÃ¡zky</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('myPictures')">_</div>
                    <div class="window-button" onclick="maximizeWindow('myPictures')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('myPictures')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <div style="background: #D4D0C8; padding: 5px; margin-bottom: 10px; border: 1px solid #888;">
                    <button onclick="playClickSound()">ğŸ” Zobrazit jako miniatury</button>
                    <button onclick="playClickSound()">ğŸ“Š Zobrazit jako seznam</button>
                </div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; margin-bottom: 5px;">ğŸï¸</div>
                        <div style="font-size: 11px;">dovolena_2003.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; margin-bottom: 5px;">ğŸ‚</div>
                        <div style="font-size: 11px;">narozeniny.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 20px; margin-bottom: 5px;">ğŸ•</div>
                        <div style="font-size: 11px;">mazlicek.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 20px; margin-bottom: 5px;">ğŸŒ…</div>
                        <div style="font-size: 11px;">wallpaper.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); padding: 20px; margin-bottom: 5px;">ğŸ“¸</div>
                        <div style="font-size: 11px;">selfie_2004.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); padding: 20px; margin-bottom: 5px;">ğŸ”ï¸</div>
                        <div style="font-size: 11px;">hory.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 20px; margin-bottom: 5px;">ğŸŒƒ</div>
                        <div style="font-size: 11px;">mesto_noc.jpg</div>
                    </div>
                    <div style="text-align: center; padding: 10px; border: 1px solid #ccc; background: #f0f0f0;">
                        <div style="font-size: 48px; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); padding: 20px; margin-bottom: 5px;">â“</div>
                        <div style="font-size: 11px;">neznamy.bmp</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="network" style="width: 550px; height: 400px;">
            <div class="window-title">
                <span>ğŸŒ SÃ­Å¥ovÃ© pÅ™ipojenÃ­</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('network')">_</div>
                    <div class="window-button" onclick="maximizeWindow('network')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('network')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>ğŸ“¡ AktivnÃ­ pÅ™ipojenÃ­:</h3>
                <div style="border: 2px inset #888; padding: 15px; margin: 15px 0; background: #fff;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <div style="font-size: 48px;">ğŸ“¶</div>
                        <div>
                            <h4>MÃ­stnÃ­ pÅ™ipojenÃ­</h4>
                            <p style="color: #0a0;">âœ“ PÅ™ipojeno</p>
                            <p style="font-size: 12px; color: #666;">100 Mb/s</p>
                        </div>
                    </div>
                    <div style="background: #f0f0f0; padding: 10px; border: 1px solid #ccc;">
                        <p><strong>IP adresa:</strong> 192.168.1.69</p>
                        <p><strong>Maska podsÃ­tÄ›:</strong> 255.255.255.0</p>
                        <p><strong>VÃ½chozÃ­ brÃ¡na:</strong> 192.168.1.1</p>
                        <p><strong>DNS server:</strong> 8.8.8.8</p>
                    </div>
                </div>
                <div style="border: 2px inset #888; padding: 15px; background: #fff;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 48px; opacity: 0.3;">ğŸ“¡</div>
                        <div style="opacity: 0.5;">
                            <h4>BezdrÃ¡tovÃ© pÅ™ipojenÃ­</h4>
                            <p style="color: #a00;">âœ— Odpojeno</p>
                            <p style="font-size: 12px; color: #666;">Wifi adaptÃ©r nenalezen</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <button onclick="playClickSound(); alert('Diagnostika sÃ­tÄ›: VÅ¡e funguje! ğŸ‘')">ğŸ”§ Diagnostika</button>
                    <button onclick="playClickSound(); alert('PÅ™ipojenÃ­ obnoveno! (moÅ¾nÃ¡)')">ğŸ”„ Obnovit</button>
                </div>
            </div>
        </div>

        <div class="window" id="cmd" style="width: 600px; height: 400px; background: #000;">
            <div class="window-title">
                <span>âš« PÅ™Ã­kazovÃ½ Å™Ã¡dek</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('cmd')">_</div>
                    <div class="window-button" onclick="maximizeWindow('cmd')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('cmd')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="background: #000; color: #0f0; font-family: 'Courier New'; padding: 10px;">
                <div id="cmdOutput">Microsoft Windows XP [Verze 5.1.2600]<br>(C) Copyright 1985-2001 Microsoft Corp.<br><br>C:\Documents and Settings\User&gt;</div>
                <div style="display: flex; margin-top: 5px;">
                    <span>C:\Documents and Settings\User&gt;</span>
                    <input type="text" id="cmdInput" style="flex: 1; background: #000; color: #0f0; border: none; outline: none; font-family: 'Courier New'; margin-left: 5px;" onkeypress="if(event.key==='Enter') executeCmd()">
                    <span class="cursor-blink" style="animation: blink 1s infinite;">_</span>
                </div>
            </div>
        </div>

        <div class="window" id="wordpad" style="width: 650px; height: 500px;">
            <div class="window-title">
                <span>ğŸ“ WordPad</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('wordpad')">_</div>
                    <div class="window-button" onclick="maximizeWindow('wordpad')">â–¡</div>
                    <div class="window-button" onclick="closeWindow('wordpad')">âœ•</div>
                </div>
            </div>
            <div class="window-content" style="padding: 0;">
                <div style="background: #D4D0C8; padding: 5px; border-bottom: 1px solid #888;">
                    <button onclick="playClickSound()" style="padding: 3px 8px;">ğŸ“„ NovÃ½</button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;">ğŸ“‚ OtevÅ™Ã­t</button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;">ğŸ’¾ UloÅ¾it</button>
                    |
                    <button onclick="playClickSound()" style="padding: 3px 8px;"><strong>B</strong></button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;"><em>I</em></button>
                    <button onclick="playClickSound()" style="padding: 3px 8px;"><u>U</u></button>
                    |
                    <select style="padding: 3px;">
                        <option>Arial</option>
                        <option>Times New Roman</option>
                        <option>Comic Sans MS</option>
                    </select>
                    <select style="padding: 3px;">
                        <option>12</option>
                        <option>14</option>
                        <option>16</option>
                    </select>
                </div>
                <textarea style="width: 100%; height: calc(100% - 40px); border: none; padding: 20px; font-family: 'Times New Roman'; font-size: 14px; resize: none;" placeholder="ZaÄnÄ›te psÃ¡t..."></textarea>
            </div>
        </div>

        <div class="window" id="systemRestore" style="width: 550px; height: 450px;">
            <div class="window-title">
                <span>ğŸ”„ ObnovenÃ­ systÃ©mu</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('systemRestore')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h2 style="color: #0066cc; margin-bottom: 20px;">VÃ­tejte v ObnovenÃ­ systÃ©mu</h2>
                <p style="margin-bottom: 20px;">ObnovenÃ­ systÃ©mu mÅ¯Å¾e vrÃ¡tit systÃ©movÃ© soubory a nastavenÃ­ poÄÃ­taÄe do dÅ™Ã­vÄ›jÅ¡Ã­ho bodu v Äase, aniÅ¾ by ovlivnilo osobnÃ­ soubory.</p>
                
                <div style="background: #fffacd; border: 2px solid #ffa500; padding: 15px; margin: 20px 0;">
                    <strong>âš ï¸ UpozornÄ›nÃ­:</strong> VÅ¡echny zmÄ›ny provedenÃ© po vybranÃ©m bodÄ› obnovenÃ­ budou zruÅ¡eny.
                </div>

                <h3>DostupnÃ© body obnovenÃ­:</h3>
                <div style="border: 2px inset #888; padding: 10px; background: #fff; max-height: 180px; overflow-y: auto;">
                    <div style="padding: 8px; border-bottom: 1px solid #ccc; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>29.1.2026 13:37</strong> - AutomatickÃ½ bod obnovenÃ­<br>
                        <span style="font-size: 12px; color: #666;">PÅ™ed instalacÃ­ podezÅ™elÃ©ho softwaru</span>
                    </div>
                    <div style="padding: 8px; border-bottom: 1px solid #ccc; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>15.1.2026 10:00</strong> - ManuÃ¡lnÃ­ bod obnovenÃ­<br>
                        <span style="font-size: 12px; color: #666;">KdyÅ¾ vÅ¡echno jeÅ¡tÄ› fungovalo</span>
                    </div>
                    <div style="padding: 8px; border-bottom: 1px solid #ccc; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>1.1.2026 00:00</strong> - SilvestrovskÃ½ bod obnovenÃ­<br>
                        <span style="font-size: 12px; color: #666;">PÅ™ed oslavami novÃ©ho roku</span>
                    </div>
                    <div style="padding: 8px; cursor: pointer;" onclick="this.style.background='#e0e0ff'">
                        <strong>25.12.2025 18:00</strong> - VÃ¡noÄnÃ­ bod<br>
                        <span style="font-size: 12px; color: #666;">PÅ™ed rozbalovÃ¡nÃ­m dÃ¡rkÅ¯</span>
                    </div>
                </div>

                <div style="text-align: right; margin-top: 20px;">
                    <button onclick="restoreSystem()" style="padding: 8px 20px;">â–¶ï¸ Spustit obnovenÃ­</button>
                    <button onclick="closeWindow('systemRestore')" style="padding: 8px 20px; margin-left: 10px;">ZruÅ¡it</button>
                </div>
            </div>
        </div>

        <div class="window" id="diskCleanup" style="width: 500px; height: 450px;">
            <div class="window-title">
                <span>ğŸ§¹ VyÄiÅ¡tÄ›nÃ­ disku</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="closeWindow('diskCleanup')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>VyÄiÅ¡tÄ›nÃ­ disku (C:)</h3>
                <p style="margin: 15px 0;">MÅ¯Å¾ete uvolnit aÅ¾ <strong style="color: #0066cc;">4.20 GB</strong> mÃ­sta na disku C:</p>
                
                <div style="border: 2px inset #888; padding: 10px; background: #fff; margin: 15px 0;">
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> DoÄasnÃ© internetovÃ© soubory (1.2 GB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> KoÅ¡ (850 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> DoÄasnÃ© soubory (650 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox"> Miniatury obrÃ¡zkÅ¯ (420 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox" checked> StarÃ© soubory protokolu (890 MB)
                    </label>
                    <label style="display: block; padding: 5px;">
                        <input type="checkbox"> Offline webovÃ© strÃ¡nky (210 MB)
                    </label>
                </div>

                <div style="background: #f0f0f0; padding: 15px; border: 1px solid #ccc; margin: 15px 0;">
                    <p><strong>Popis:</strong> DoÄasnÃ© internetovÃ© soubory jsou webovÃ© strÃ¡nky uloÅ¾enÃ© v poÄÃ­taÄi pro rychlÃ½ pÅ™Ã­stup. OsobnÃ­ nastavenÃ­ webovÃ½ch strÃ¡nek zÅ¯stanou zachovÃ¡na.</p>
                </div>

                <div style="text-align: right;">
                    <button onclick="startCleanup()" style="padding: 8px 20px;">ğŸ§¹ VyÄistit</button>
                    <button onclick="closeWindow('diskCleanup')" style="padding: 8px 20px; margin-left: 10px;">ZruÅ¡it</button>
                </div>
            </div>
        </div>

        <div class="window" id="defrag" style="width: 600px; height: 400px;">
            <div class="window-title">
                <span>ğŸ’¿ Defragmentace disku</span>
                <div class="window-buttons">
                    <div class="window-button" onclick="minimizeWindow('defrag')">_</div>
                    <div class="window-button" onclick="closeWindow('defrag')">âœ•</div>
                </div>
            </div>
            <div class="window-content">
                <h3>Defragmentace disku</h3>
                <p style="margin: 15px 0;">Vyberte disk, kterÃ½ chcete defragmentovat:</p>
                
                <div style="border: 2px inset #888; background: #fff; padding: 10px; margin: 15px 0;">
                    <div style="padding: 10px; background: #e0e0ff; margin-bottom: 5px; cursor: pointer;">
                        <strong>ğŸ’¿ Disk C:</strong> (SystÃ©movÃ½)<br>
                        <span style="font-size: 12px;">Fragmentace: 45% - DoporuÄena defragmentace!</span>
                    </div>
                    <div style="padding: 10px; background: #f0f0f0; cursor: pointer;">
                        <strong>ğŸ’¿ Disk D:</strong> (Data)<br>
                        <span style="font-size: 12px;">NenÃ­ k dispozici</span>
                    </div>
                </div>

                <div id="defragProgress" style="display: none; margin: 20px 0;">
                    <p><strong>ProbÃ­hÃ¡ defragmentace...</strong></p>
                    <div style="background: #fff; border: 2px inset #888; height: 30px; margin: 10px 0; position: relative; overflow: hidden;">
                        <div id="defragBar" style="background: linear-gradient(to right, #0066cc, #00aaff); height: 100%; width: 0%; transition: width 0.5s;"></div>
                    </div>
                    <p style="font-size: 12px; color: #666;">OdhadovanÃ½ Äas: 2 hodiny 15 minut (neboj, to je fake)</p>
                </div>

                <div style="text-align: right; margin-top: 20px;">
                    <button onclick="startDefrag()" style="padding: 8px 20px;">â–¶ï¸ Defragmentovat</button>
                    <button onclick="analyzeDefrag()" style="padding: 8px 20px; margin-left: 10px;">ğŸ” Analyzovat</button>
                    <button onclick="closeWindow('defrag')" style="padding: 8px 20px; margin-left: 10px;">ZavÅ™Ã­t</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playBeep(frequency = 800, duration = 0.1, volume = 0.3) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playStartupSound() {
            // Try to play win.mp3
            const audio = new Audio('win.mp3');
            audio.volume = 0.5;
            audio.play().catch(err => {
                console.log('win.mp3 not found, using beep sounds');
                // Fallback to beep sounds if win.mp3 doesn't exist
                playBeep(523, 0.15, 0.2);
                setTimeout(() => playBeep(659, 0.15, 0.2), 150);
                setTimeout(() => playBeep(784, 0.15, 0.2), 300);
                setTimeout(() => playBeep(1047, 0.3, 0.25), 450);
            });
        }

        function playClickSound() {
            playBeep(1200, 0.05, 0.15);
        }

        function playErrorSound() {
            playBeep(300, 0.1, 0.3);
            setTimeout(() => playBeep(250, 0.2, 0.3), 100);
        }

        function playShutdownSound() {
            playBeep(1047, 0.15, 0.2);
            setTimeout(() => playBeep(784, 0.15, 0.2), 150);
            setTimeout(() => playBeep(659, 0.15, 0.2), 300);
            setTimeout(() => playBeep(523, 0.3, 0.25), 450);
        }

        // Loading simulation
        let loadingProgress = 0;
        function simulateLoading() {
            loadingProgress += 2;
            if (loadingProgress >= 100) {
                setTimeout(() => {
                    document.getElementById('loading-screen').style.display = 'none';
                    document.getElementById('desktop').style.display = 'block';
                    playStartupSound();
                    updateClock();
                    randomizeIconPositions();
                }, 500);
            } else {
                setTimeout(simulateLoading, 50);
            }
        }

        // Start loading after a short delay
        setTimeout(simulateLoading, 1000);

        // Random icon positioning
        function randomizeIconPositions() {
            const icons = document.querySelectorAll('.icon');
            const desktop = document.getElementById('desktop');
            const desktopWidth = desktop.clientWidth - 100;
            const desktopHeight = desktop.clientHeight - 150;
            
            icons.forEach((icon, index) => {
                const x = 20 + (index % 3) * 100 + Math.random() * 50;
                const y = 20 + Math.floor(index / 3) * 100 + Math.random() * 50;
                icon.style.left = Math.min(x, desktopWidth) + 'px';
                icon.style.top = Math.min(y, desktopHeight) + 'px';
            });
        }

        // Icon dragging and opening
        let draggedIcon = null;
        let iconDragOffset = { x: 0, y: 0 };
        let isDraggingIcon = false;
        let dragStartPos = { x: 0, y: 0 };
        let lastClickedIcon = null;
        let lastClickTime = 0;

        document.addEventListener('mousedown', (e) => {
            const icon = e.target.closest('.icon');
            if (icon && !e.target.closest('.window')) {
                draggedIcon = icon;
                const rect = icon.getBoundingClientRect();
                iconDragOffset.x = e.clientX - rect.left;
                iconDragOffset.y = e.clientY - rect.top;
                dragStartPos = { x: e.clientX, y: e.clientY };
                isDraggingIcon = false;
                
                // Select icon
                document.querySelectorAll('.icon').forEach(i => i.classList.remove('selected'));
                icon.classList.add('selected');
                selectedIcon = icon;
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (draggedIcon) {
                const distance = Math.sqrt(
                    Math.pow(e.clientX - dragStartPos.x, 2) + 
                    Math.pow(e.clientY - dragStartPos.y, 2)
                );
                
                // Only start dragging if moved more than 5 pixels
                if (distance > 5) {
                    isDraggingIcon = true;
                    draggedIcon.classList.add('dragging');
                    
                    const x = e.clientX - iconDragOffset.x;
                    const y = e.clientY - iconDragOffset.y;
                    
                    const maxX = window.innerWidth - 80;
                    const maxY = window.innerHeight - 120;
                    
                    draggedIcon.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
                    draggedIcon.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
                    
                    e.preventDefault();
                }
            }
        });

        document.addEventListener('mouseup', (e) => {
            if (draggedIcon) {
                draggedIcon.classList.remove('dragging');
                
                // If we didn't drag, handle click/double-click
                if (!isDraggingIcon) {
                    const currentTime = Date.now();
                    const timeSinceLastClick = currentTime - lastClickTime;
                    
                    // Double-click detection (within 500ms)
                    if (lastClickedIcon === draggedIcon && timeSinceLastClick < 500) {
                        // Double click - open icon
                        openIconById(draggedIcon);
                        lastClickedIcon = null;
                        lastClickTime = 0;
                    } else {
                        // Single click - just select
                        lastClickedIcon = draggedIcon;
                        lastClickTime = currentTime;
                    }
                }
                
                draggedIcon = null;
                isDraggingIcon = false;
            }
        });

        // Helper function to open icon
        function openIconById(icon) {
            if (!icon) return;
            
            playClickSound();
            const iconId = icon.getAttribute('data-icon-id');
            
            if (iconId === 'gopnik') {
                window.open('gopnik/loading.html', '_blank');
            } else if (iconId === 'pacman') {
                window.open('login.html', '_blank');
            } else if (iconId) {
                openWindow(iconId);
            }
        }

        // Context menu handling
        let currentContextMenu = null;
        let selectedIcon = null;

        // Desktop context menu
        document.getElementById('desktop').addEventListener('contextmenu', (e) => {
            if (e.target.closest('.window') || e.target.closest('.taskbar')) return;
            
            e.preventDefault();
            hideAllContextMenus();
            
            const icon = e.target.closest('.icon');
            if (icon) {
                selectedIcon = icon;
                icon.classList.add('selected');
                showContextMenu('iconContextMenu', e.clientX, e.clientY);
            } else {
                showContextMenu('desktopContextMenu', e.clientX, e.clientY);
            }
        });

        function showContextMenu(menuId, x, y) {
            const menu = document.getElementById(menuId);
            menu.style.display = 'block';
            menu.style.left = x + 'px';
            menu.style.top = y + 'px';
            currentContextMenu = menu;
            playClickSound();
        }

        function hideAllContextMenus() {
            document.querySelectorAll('.context-menu').forEach(menu => {
                menu.style.display = 'none';
            });
            document.querySelectorAll('.icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            currentContextMenu = null;
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.context-menu')) {
                hideAllContextMenus();
            }
        });

        // Context menu functions
        function openSelectedIcon() {
            if (selectedIcon) {
                openIconById(selectedIcon);
            }
            hideAllContextMenus();
        }

        function deleteToRecycleBin() {
            if (selectedIcon) {
                playErrorSound();
                const iconName = selectedIcon.querySelector('.icon-label').textContent;
                selectedIcon.style.transition = 'all 0.3s';
                selectedIcon.style.opacity = '0';
                selectedIcon.style.transform = 'scale(0.5)';
                
                setTimeout(() => {
                    alert(`"${iconName}" byl pÅ™esunut do koÅ¡e! ğŸ—‘ï¸`);
                    selectedIcon.style.display = 'none';
                    selectedIcon.style.transition = '';
                    selectedIcon.style.opacity = '';
                    selectedIcon.style.transform = '';
                }, 300);
            }
            hideAllContextMenus();
        }

        function arrangeIcons() {
            playClickSound();
            const icons = document.querySelectorAll('.icon');
            const spacing = 100;
            const startX = 20;
            const startY = 20;
            
            icons.forEach((icon, index) => {
                if (icon.style.display !== 'none') {
                    const col = index % 8;
                    const row = Math.floor(index / 8);
                    icon.style.transition = 'all 0.5s';
                    icon.style.left = (startX + col * spacing) + 'px';
                    icon.style.top = (startY + row * spacing) + 'px';
                    
                    setTimeout(() => {
                        icon.style.transition = '';
                    }, 500);
                }
            });
            hideAllContextMenus();
        }

        function desktopRefresh() {
            playClickSound();
            document.getElementById('desktop').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('desktop').style.opacity = '1';
            }, 100);
            hideAllContextMenus();
        }

        function createNewFile() {
            playClickSound();
            const newIcon = document.createElement('div');
            newIcon.className = 'icon';
            newIcon.setAttribute('data-icon-id', 'notepad');
            newIcon.innerHTML = `
                <div class="icon-img">ğŸ“„</div>
                <div class="icon-label">NovÃ½ dokument.txt</div>
            `;
            newIcon.style.left = '300px';
            newIcon.style.top = '300px';
            
            document.getElementById('desktopIcons').appendChild(newIcon);
            alert('NovÃ½ soubor vytvoÅ™en! ğŸ“„');
            hideAllContextMenus();
        }

        // Selection box
        let isSelecting = false;
        let selectionStart = { x: 0, y: 0 };
        const selectionBox = document.getElementById('selectionBox');

        document.getElementById('desktop').addEventListener('mousedown', (e) => {
            if (e.target.id === 'desktop' || e.target.closest('.desktop-icons')) {
                if (!e.target.closest('.icon') && !e.target.closest('.window')) {
                    isSelecting = true;
                    selectionStart = { x: e.clientX, y: e.clientY };
                    selectionBox.style.left = e.clientX + 'px';
                    selectionBox.style.top = e.clientY + 'px';
                    selectionBox.style.width = '0px';
                    selectionBox.style.height = '0px';
                    selectionBox.style.display = 'block';
                }
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isSelecting) {
                const width = Math.abs(e.clientX - selectionStart.x);
                const height = Math.abs(e.clientY - selectionStart.y);
                const left = Math.min(e.clientX, selectionStart.x);
                const top = Math.min(e.clientY, selectionStart.y);
                
                selectionBox.style.left = left + 'px';
                selectionBox.style.top = top + 'px';
                selectionBox.style.width = width + 'px';
                selectionBox.style.height = height + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            if (isSelecting) {
                isSelecting = false;
                selectionBox.style.display = 'none';
            }
        });

        // Clock
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('clock').textContent = `${hours}:${minutes}`;
            setTimeout(updateClock, 1000);
        }

        // Window management
        let activeWindows = [];
        let windowPositions = {};
        let zIndexCounter = 100;

        function createTaskbarItem(id, title) {
            const taskbarItems = document.getElementById('taskbarItems');
            let item = document.getElementById('taskbar-' + id);
            
            if (!item) {
                item = document.createElement('div');
                item.className = 'taskbar-item';
                item.id = 'taskbar-' + id;
                item.innerHTML = title;
                item.onclick = function() {
                    const win = document.getElementById(id);
                    if (win.style.display === 'none') {
                        win.style.display = 'block';
                        win.classList.add('maximizing');
                        setTimeout(() => win.classList.remove('maximizing'), 300);
                    }
                    focusWindow(id);
                };
                taskbarItems.appendChild(item);
            }
            
            return item;
        }

        function removeTaskbarItem(id) {
            const item = document.getElementById('taskbar-' + id);
            if (item) {
                item.remove();
            }
        }

        function focusWindow(id) {
            // Remove active class from all windows
            document.querySelectorAll('.window').forEach(w => {
                w.classList.remove('active');
                w.querySelector('.window-title').classList.add('inactive');
            });
            
            // Remove active class from all taskbar items
            document.querySelectorAll('.taskbar-item').forEach(t => {
                t.classList.remove('active');
            });
            
            // Add active class to selected window
            const win = document.getElementById(id);
            win.classList.add('active');
            win.querySelector('.window-title').classList.remove('inactive');
            win.style.zIndex = ++zIndexCounter;
            
            // Add active class to taskbar item
            const taskbarItem = document.getElementById('taskbar-' + id);
            if (taskbarItem) {
                taskbarItem.classList.add('active');
            }
        }

        // Start menu
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            playClickSound();
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        // Close start menu when clicking outside
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('startMenu');
            const startBtn = document.querySelector('.start-button');
            if (!menu.contains(e.target) && !startBtn.contains(e.target)) {
                menu.style.display = 'none';
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+C - Copy
            if (e.ctrlKey && e.key === 'c') {
                playClickSound();
                if (selectedIcon) {
                    alert('ğŸ“‹ ZkopÃ­rovÃ¡no do schrÃ¡nky!');
                }
            }
            // Ctrl+V - Paste
            if (e.ctrlKey && e.key === 'v') {
                playClickSound();
                alert('ğŸ“‹ VloÅ¾eno ze schrÃ¡nky! (asi)');
            }
            // Delete - Delete to recycle bin
            if (e.key === 'Delete') {
                if (selectedIcon) {
                    deleteToRecycleBin();
                }
            }
            // F5 - Refresh
            if (e.key === 'F5') {
                e.preventDefault();
                desktopRefresh();
            }
            // Alt+F4 - Close active window
            if (e.altKey && e.key === 'F4') {
                e.preventDefault();
                const activeWindow = document.querySelector('.window.active');
                if (activeWindow) {
                    closeWindow(activeWindow.id);
                }
            }
            // Ctrl+Shift+Esc - Task Manager
            if (e.ctrlKey && e.shiftKey && e.key === 'Escape') {
                e.preventDefault();
                openWindow('taskManager');
            }
            // Ctrl+Alt+Delete - Security screen
            if (e.ctrlKey && e.altKey && e.key === 'Delete') {
                e.preventDefault();
                showSecurityScreen();
            }
            // Windows+R - Run dialog
            if ((e.metaKey || e.key === 'Meta') && e.key === 'r') {
                e.preventDefault();
                openWindow('runDialog');
            }
            // Windows key - Toggle start menu
            if (e.key === 'Meta' || e.key === 'OS') {
                e.preventDefault();
                toggleStartMenu();
            }
        });

        // Task Manager functions
        function taskManagerRefresh() {
            playClickSound();
            const cpuUsage = document.getElementById('cpuUsage');
            const newCpu = Math.floor(Math.random() * 100);
            cpuUsage.textContent = newCpu + '%';
            
            // Simulate process updates
            const tbody = document.getElementById('taskTableBody');
            const rows = tbody.querySelectorAll('tr');
            rows.forEach(row => {
                const cpuCell = row.cells[2];
                if (cpuCell) {
                    const randomCpu = Math.floor(Math.random() * 100);
                    cpuCell.textContent = randomCpu + '%';
                }
            });
            
            alert('SprÃ¡vce Ãºloh aktualizovÃ¡n! ğŸ“Š');
        }

        function endTask() {
            playErrorSound();
            alert('UkonÄuji Ãºlohu... (ale ve skuteÄnosti ne) ğŸ˜„');
        }

        // Run dialog functions
        function executeRun() {
            const input = document.getElementById('runInput').value.toLowerCase();
            playClickSound();
            
            const commands = {
                'notepad': () => openWindow('notepad'),
                'calc': () => openWindow('calculator'),
                'calculator': () => openWindow('calculator'),
                'mspaint': () => openWindow('paint'),
                'paint': () => openWindow('paint'),
                'taskmgr': () => openWindow('taskManager'),
                'explorer': () => openWindow('myComputer'),
                'iexplore': () => openWindow('ie'),
                'wmplayer': () => openWindow('myMusic'),
                'cmd': () => openWindow('cmd'),
                'wordpad': () => openWindow('wordpad'),
                'cleanmgr': () => openWindow('diskCleanup'),
                'dfrg.msc': () => openWindow('defrag'),
                'rstrui': () => openWindow('systemRestore'),
                'regedit': () => alert('Registry Editor je zakÃ¡zÃ¡n! âš ï¸'),
                'shutdown': () => shutdown(),
            };
            
            if (commands[input]) {
                commands[input]();
                closeWindow('runDialog');
            } else {
                playErrorSound();
                alert(`Soubor "${input}" nebyl nalezen! âŒ`);
            }
            
            document.getElementById('runInput').value = '';
        }

        // Windows Media Player
        let isPlaying = false;
        function togglePlay() {
            isPlaying = !isPlaying;
            const btn = document.getElementById('playBtn');
            btn.textContent = isPlaying ? 'â¸ï¸' : 'â–¶ï¸';
            playClickSound();
            
            if (isPlaying) {
                simulateMusicProgress();
            }
        }

        function simulateMusicProgress() {
            if (!isPlaying) return;
            const bar = document.getElementById('musicProgress');
            let width = parseInt(bar.style.width || '35');
            if (width < 100) {
                bar.style.width = (width + 1) + '%';
                setTimeout(simulateMusicProgress, 1000);
            } else {
                isPlaying = false;
                document.getElementById('playBtn').textContent = 'â–¶ï¸';
                bar.style.width = '0%';
            }
        }

        // Command Prompt
        function executeCmd() {
            const input = document.getElementById('cmdInput');
            const output = document.getElementById('cmdOutput');
            const command = input.value.toLowerCase().trim();
            
            output.innerHTML += `<br>${input.value}`;
            
            const responses = {
                'dir': '<br>Svazek v jednotce C nemÃ¡ nÃ¡zev.<br>SÃ©riovÃ© ÄÃ­slo svazku je 1234-5678<br><br>AdresÃ¡Å™: C:\\Documents and Settings\\User<br><br>29.01.2026  13:37    &lt;DIR&gt;          .<br>29.01.2026  13:37    &lt;DIR&gt;          ..<br>15.01.2026  10:00    &lt;DIR&gt;          Dokumenty<br>01.01.2026  00:00         420,690 tahle_slozka.txt<br>               1 soubor(Å¯)        420,690 bajtÅ¯<br>               3 adresÃ¡Å™(Å¯)  1,024,000,000 bajtÅ¯ volnÃ½ch',
                'help': '<br>DostupnÃ© pÅ™Ã­kazy:<br>DIR - zobrazÃ­ obsah adresÃ¡Å™e<br>CD - zmÄ›nÃ­ adresÃ¡Å™<br>COPY - kopÃ­ruje soubory<br>DEL - smaÅ¾e soubory<br>CLS - vyÄistÃ­ obrazovku<br>EXIT - ukonÄÃ­ CMD<br>TREE - zobrazÃ­ strukturu adresÃ¡Å™Å¯<br>PING - testuje sÃ­Å¥ovÃ© pÅ™ipojenÃ­',
                'cls': 'CLEAR',
                'exit': 'EXIT',
                'tree': '<br>C:\\<br>â”œâ”€â”€ Documents and Settings<br>â”‚   â””â”€â”€ User<br>â”‚       â”œâ”€â”€ Dokumenty<br>â”‚       â”œâ”€â”€ Hudba<br>â”‚       â””â”€â”€ ObrÃ¡zky<br>â”œâ”€â”€ Program Files<br>â””â”€â”€ Windows<br>    â””â”€â”€ System32',
                'ping google.com': '<br>PÅ™Ã­kaz Ping pro google.com [142.250.185.78] s 32 bajty dat:<br>OdpovÄ›Ä z 142.250.185.78: bajtÅ¯=32 Äas=15ms TTL=117<br>OdpovÄ›Ä z 142.250.185.78: bajtÅ¯=32 Äas=16ms TTL=117<br>OdpovÄ›Ä z 142.250.185.78: bajtÅ¯=32 Äas=14ms TTL=117<br>Statistika:<br>    PÅ™enesenÃ½ch = 3, PÅ™ijatÃ½ch = 3, ZtracenÃ½ch = 0 (0% ztrÃ¡ta)',
                'ipconfig': '<br>Konfigurace protokolu IP systÃ©mu Windows<br><br>AdaptÃ©r sÃ­tÄ› Ethernet - MÃ­stnÃ­ pÅ™ipojenÃ­:<br>   IP adresa: 192.168.1.69<br>   Maska podsÃ­tÄ›: 255.255.255.0<br>   VÃ½chozÃ­ brÃ¡na: 192.168.1.1',
                'systeminfo': '<br>NÃ¡zev hostitele: WINDOWS-XP<br>NÃ¡zev operaÄnÃ­ho systÃ©mu: Microsoft Windows XP Professional<br>Verze operaÄnÃ­ho systÃ©mu: 5.1.2600 Service Pack 3<br>VÃ½robce operaÄnÃ­ho systÃ©mu: Microsoft Corporation<br>Procesor: Pentium 4 2.8 GHz<br>CelkovÃ¡ fyzickÃ¡ pamÄ›Å¥: 256 MB',
                'color 0a': 'COLOR_GREEN',
                'tasklist': '<br>NÃ¡zev bitovÃ© kopie              PID  Velikost pamÄ›ti<br>System Idle Process              0           0 kB<br>explorer.exe                  1234      15,234 kB<br>chrome.exe                    5678   1,234,567 kB<br>urÄitÄ›_ne_virus.exe           6666     999,999 kB'
            };
            
            if (command === 'cls') {
                output.innerHTML = 'Microsoft Windows XP [Verze 5.1.2600]<br>(C) Copyright 1985-2001 Microsoft Corp.<br><br>C:\\Documents and Settings\\User&gt;';
            } else if (command === 'exit') {
                closeWindow('cmd');
            } else if (command === 'color 0a') {
                document.querySelector('#cmd .window-content').style.color = '#0f0';
            } else if (responses[command]) {
                output.innerHTML += responses[command];
            } else if (command) {
                output.innerHTML += `<br>'${input.value}' nenÃ­ rozpoznÃ¡n jako vnitÅ™nÃ­ nebo externÃ­ pÅ™Ã­kaz, spustitelnÃ½ program nebo dÃ¡vkovÃ½ soubor.`;
            }
            
            output.innerHTML += '<br>C:\\Documents and Settings\\User&gt;';
            input.value = '';
            output.scrollTop = output.scrollHeight;
        }

        // System Restore
        function restoreSystem() {
            playClickSound();
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 100000;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 24px;
                flex-direction: column;
            `;
            overlay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 20px;">ğŸ”„</div>
                    <div>ObnovovÃ¡nÃ­ systÃ©mu...</div>
                    <div style="margin-top: 20px; font-size: 16px; color: #ccc;">ProsÃ­m Äekejte...</div>
                    <div style="width: 300px; height: 20px; background: #333; margin: 20px auto; border-radius: 10px; overflow: hidden;">
                        <div id="restoreProgress" style="width: 0%; height: 100%; background: linear-gradient(to right, #0066cc, #00aaff); transition: width 0.5s;"></div>
                    </div>
                </div>
            `;
            document.body.appendChild(overlay);
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                document.getElementById('restoreProgress').style.width = progress + '%';
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        overlay.remove();
                        alert('SystÃ©m byl ÃºspÄ›Å¡nÄ› obnoven! ğŸ‰\n(Ne doopravdy, ale vypadalo to cool, ne?)');
                        closeWindow('systemRestore');
                    }, 500);
                }
            }, 300);
        }

        // Disk Cleanup
        function startCleanup() {
            playClickSound();
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #ECE9D8;
                border: 2px solid #0054E3;
                padding: 30px;
                z-index: 100000;
                box-shadow: 3px 3px 10px rgba(0,0,0,0.5);
                min-width: 400px;
                text-align: center;
            `;
            overlay.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 20px;">ğŸ§¹</div>
                <div style="margin-bottom: 20px;">ÄŒiÅ¡tÄ›nÃ­ disku...</div>
                <div style="width: 100%; height: 20px; background: #fff; border: 2px inset #888; margin-bottom: 10px;">
                    <div id="cleanupProgress" style="width: 0%; height: 100%; background: linear-gradient(to right, #0066cc, #00aaff);"></div>
                </div>
                <div id="cleanupText" style="font-size: 12px; color: #666;">MazÃ¡nÃ­ doÄasnÃ½ch souborÅ¯...</div>
            `;
            document.body.appendChild(overlay);
            
            const messages = [
                'MazÃ¡nÃ­ doÄasnÃ½ch souborÅ¯...',
                'ÄŒiÅ¡tÄ›nÃ­ koÅ¡e...',
                'OdstraÅˆovÃ¡nÃ­ miniatur...',
                'MazÃ¡nÃ­ protokolÅ¯...',
                'DokonÄovÃ¡nÃ­...'
            ];
            
            let progress = 0;
            let msgIndex = 0;
            const interval = setInterval(() => {
                progress += 20;
                document.getElementById('cleanupProgress').style.width = progress + '%';
                if (msgIndex < messages.length) {
                    document.getElementById('cleanupText').textContent = messages[msgIndex++];
                }
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        overlay.remove();
                        alert('VyÄiÅ¡tÄ›nÃ­ dokonÄeno! ğŸ‰\nUvolnÄ›no: 4.20 GB');
                        closeWindow('diskCleanup');
                    }, 500);
                }
            }, 600);
        }

        // Defragmentation
        function analyzeDefrag() {
            playClickSound();
            alert('ğŸ“Š AnalÃ½za disku:\n\nFragmentace: 45%\nâœ“ DoporuÄena defragmentace!\n\nSoubory: 12,345\nFragmentovanÃ© soubory: 5,678\nVelkost dat: 42 GB');
        }

        function startDefrag() {
            playClickSound();
            document.getElementById('defragProgress').style.display = 'block';
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                document.getElementById('defragBar').style.width = progress + '%';
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        alert('âœ… Defragmentace dokonÄena!\n\nDisk C: byl ÃºspÄ›Å¡nÄ› defragmentovÃ¡n.\nFragmentace: 0%');
                        document.getElementById('defragProgress').style.display = 'none';
                        document.getElementById('defragBar').style.width = '0%';
                    }, 500);
                }
            }, 500);
        }

        // Enter key in Run dialog
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const runDialog = document.getElementById('runDialog');
                if (runDialog.style.display === 'block') {
                    executeRun();
                }
            }
        });

        // Security screen (Ctrl+Alt+Del)
        function showSecurityScreen() {
            playClickSound();
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #0A246A;
                z-index: 99999;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 16px;
            `;
            overlay.innerHTML = `
                <h1 style="margin-bottom: 50px; font-size: 36px;">Windows ZabezpeÄenÃ­</h1>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="this.parentElement.parentElement.remove(); openWindow('taskManager');" style="padding: 15px 50px; font-size: 18px; cursor: pointer;">ğŸ“Š SprÃ¡vce Ãºloh</button>
                    <button onclick="this.parentElement.parentElement.remove();" style="padding: 15px 50px; font-size: 18px; cursor: pointer;">ğŸ”’ Zamknout poÄÃ­taÄ</button>
                    <button onclick="this.parentElement.parentElement.remove(); playClickSound(); alert('OdhlÃ¡Å¡enÃ­... (ne doopravdy)');" style="padding: 15px 50px; font-size: 18px; cursor: pointer;">ğŸ‘¤ OdhlÃ¡sit se</button>
                    <button onclick="this.parentElement.parentElement.remove(); shutdown();" style="padding: 15px 50px; font-size: 18px; cursor: pointer;">ğŸ”´ Vypnout</button>
                    <button onclick="this.parentElement.parentElement.remove();" style="padding: 15px 50px; font-size: 18px; cursor: pointer; margin-top: 20px;">âŒ ZruÅ¡it</button>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        // Screen saver simulation (after 30 seconds of inactivity)
        let screenSaverTimeout;
        let screenSaverActive = false;

        function resetScreenSaverTimer() {
            clearTimeout(screenSaverTimeout);
            if (screenSaverActive) {
                exitScreenSaver();
            }
            screenSaverTimeout = setTimeout(startScreenSaver, 30000);
        }

        function startScreenSaver() {
            screenSaverActive = true;
            const desktop = document.getElementById('desktop');
            const overlay = document.createElement('div');
            overlay.id = 'screenSaver';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #000;
                z-index: 99999;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #00ff00;
                font-size: 48px;
                font-family: 'Courier New';
                cursor: pointer;
            `;
            overlay.innerHTML = 'Windows XP Screensaver<br><span style="font-size: 20px;">Klikni nebo pohni myÅ¡Ã­</span>';
            overlay.onclick = exitScreenSaver;
            document.body.appendChild(overlay);
        }

        function exitScreenSaver() {
            const overlay = document.getElementById('screenSaver');
            if (overlay) {
                overlay.remove();
                screenSaverActive = false;
            }
            resetScreenSaverTimer();
        }

        document.addEventListener('mousemove', resetScreenSaverTimer);
        document.addEventListener('keydown', resetScreenSaverTimer);
        resetScreenSaverTimer();

        // System sounds on various actions
        function playSystemSound(type) {
            switch(type) {
                case 'maximize':
                    playBeep(800, 0.05, 0.15);
                    break;
                case 'minimize':
                    playBeep(600, 0.05, 0.15);
                    break;
                case 'restore':
                    playBeep(700, 0.05, 0.15);
                    break;
            }
        }

        // Window functions
        function openWindow(id) {
            playClickSound();
            const win = document.getElementById(id);
            win.style.display = 'block';
            
            // Position window if not positioned yet
            if (!windowPositions[id]) {
                const offset = activeWindows.length * 30;
                win.style.left = (50 + offset) + 'px';
                win.style.top = (50 + offset) + 'px';
                windowPositions[id] = true;
            }
            
            if (!activeWindows.includes(id)) {
                activeWindows.push(id);
            }
            
            createTaskbarItem(id, win.querySelector('.window-title span').textContent);
            focusWindow(id);
            document.getElementById('startMenu').style.display = 'none';
        }

        function closeWindow(id) {
            playClickSound();
            const win = document.getElementById(id);
            win.style.display = 'none';
            activeWindows = activeWindows.filter(w => w !== id);
            removeTaskbarItem(id);
        }

        function minimizeWindow(id) {
            playSystemSound('minimize');
            const win = document.getElementById(id);
            win.classList.add('minimizing');
            setTimeout(() => {
                win.style.display = 'none';
                win.classList.remove('minimizing');
            }, 300);
        }

        function maximizeWindow(id) {
            const win = document.getElementById(id);
            
            if (win.dataset.maximized === 'true') {
                // Restore
                playSystemSound('restore');
                win.style.width = '500px';
                win.style.height = '350px';
                win.style.left = win.dataset.oldLeft;
                win.style.top = win.dataset.oldTop;
                win.dataset.maximized = 'false';
            } else {
                // Maximize
                playSystemSound('maximize');
                win.dataset.oldLeft = win.style.left;
                win.dataset.oldTop = win.style.top;
                win.style.left = '0';
                win.style.top = '0';
                win.style.width = '100%';
                win.style.height = 'calc(100% - 42px)';
                win.dataset.maximized = 'true';
            }
        }

        // Make windows draggable
        document.querySelectorAll('.window').forEach(win => {
            const titleBar = win.querySelector('.window-title');
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            
            titleBar.addEventListener('mousedown', (e) => {
                if (e.target.closest('.window-button')) return;
                
                isDragging = true;
                initialX = e.clientX - win.offsetLeft;
                initialY = e.clientY - win.offsetTop;
                focusWindow(win.id);
                
                // Prevent text selection while dragging
                e.preventDefault();
            });
            
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    e.preventDefault();
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;
                    
                    // Keep window within bounds
                    const maxX = window.innerWidth - 100;
                    const maxY = window.innerHeight - 100;
                    
                    currentX = Math.max(0, Math.min(currentX, maxX));
                    currentY = Math.max(0, Math.min(currentY, maxY));
                    
                    win.style.left = currentX + 'px';
                    win.style.top = currentY + 'px';
                    win.style.transform = 'none'; // Remove centering transform
                }
            });
            
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
            
            // Focus window on click
            win.addEventListener('mousedown', () => {
                focusWindow(win.id);
            });
        });

        function shutdown() {
            playShutdownSound();
            document.getElementById('desktop').style.display = 'none';
            document.getElementById('loading-screen').style.display = 'flex';
            
            const bootScreen = document.querySelector('.xp-boot-screen');
            bootScreen.innerHTML = `
                <div style="text-align: center; color: #fff;">
                    <div style="font-size: 48px; margin-bottom: 30px;">Windows se vypÃ­nÃ¡</div>
                    <div style="font-size: 18px;">MÅ¯Å¾eÅ¡ nynÃ­ vypnout poÄÃ­taÄ</div>
                    <div style="margin-top: 50px; color: #888;">DÃ­ky za pouÅ¾itÃ­! ğŸ˜Š</div>
                </div>
            `;
        }

        // Calculator functions
        let calcExpression = '';
        let calcDisplay = '0';

        function calcInput(value) {
            playClickSound();
            if (calcDisplay === '0' && value !== '.') {
                calcDisplay = value;
            } else {
                calcDisplay += value;
            }
            calcExpression += value;
            document.getElementById('calcDisplay').value = calcDisplay;
        }

        function calcClear() {
            playClickSound();
            calcExpression = '';
            calcDisplay = '0';
            document.getElementById('calcDisplay').value = calcDisplay;
        }

        function calcEqual() {
            playClickSound();
            try {
                const result = eval(calcExpression);
                calcDisplay = result.toString();
                calcExpression = result.toString();
                document.getElementById('calcDisplay').value = calcDisplay;
            } catch (e) {
                playErrorSound();
                calcDisplay = 'Chyba';
                document.getElementById('calcDisplay').value = calcDisplay;
                setTimeout(calcClear, 1000);
            }
        }

        // Paint application
        let paintCanvas = null;
        let paintCtx = null;
        let isPainting = false;
        let currentTool = 'pen';
        let lastX = 0;
        let lastY = 0;

        // Initialize paint canvas when window opens
        function initPaintCanvas() {
            paintCanvas = document.getElementById('paintCanvas');
            if (!paintCanvas) return;
            
            paintCtx = paintCanvas.getContext('2d');
            paintCtx.lineCap = 'round';
            paintCtx.lineJoin = 'round';
            
            paintCanvas.addEventListener('mousedown', startPainting);
            paintCanvas.addEventListener('mousemove', paint);
            paintCanvas.addEventListener('mouseup', stopPainting);
            paintCanvas.addEventListener('mouseout', stopPainting);
        }

        function startPainting(e) {
            isPainting = true;
            const rect = paintCanvas.getBoundingClientRect();
            lastX = e.clientX - rect.left;
            lastY = e.clientY - rect.top;
        }

        function paint(e) {
            if (!isPainting) return;
            
            const rect = paintCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            paintCtx.beginPath();
            paintCtx.moveTo(lastX, lastY);
            paintCtx.lineTo(x, y);
            
            if (currentTool === 'pen') {
                paintCtx.strokeStyle = document.getElementById('colorPicker').value;
                paintCtx.lineWidth = document.getElementById('brushSize').value;
            } else if (currentTool === 'eraser') {
                paintCtx.strokeStyle = '#ffffff';
                paintCtx.lineWidth = 20;
            }
            
            paintCtx.stroke();
            
            lastX = x;
            lastY = y;
        }

        function stopPainting() {
            isPainting = false;
        }

        function selectTool(tool) {
            playClickSound();
            currentTool = tool;
            
            // Update button states
            document.getElementById('toolPen').style.background = tool === 'pen' ? '#fff' : '#E0E0E0';
            document.getElementById('toolEraser').style.background = tool === 'eraser' ? '#fff' : '#E0E0E0';
        }

        function clearCanvas() {
            playClickSound();
            if (paintCtx) {
                paintCtx.fillStyle = '#ffffff';
                paintCtx.fillRect(0, 0, paintCanvas.width, paintCanvas.height);
            }
        }

        // Initialize paint when paint window is opened
        const originalOpenWindow = openWindow;
        openWindow = function(id) {
            originalOpenWindow(id);
            if (id === 'paint') {
                setTimeout(initPaintCanvas, 100);
            }
        };

        // Blink animation for cursor
        const style = document.createElement('style');
        style.textContent = `
            @keyframes blink {
                0%, 50% { opacity: 1; }
                51%, 100% { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
